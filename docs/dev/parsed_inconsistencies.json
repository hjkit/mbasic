{
  "metadata": {
    "source_file": "docs/history/docs_inconsistencies_report-v7.md",
    "generated_date": "2025-11-05",
    "total_issues": 467,
    "code_comment_conflicts": 183,
    "other_inconsistencies": 284
  },
  "issues_by_severity": {
    "high": [
      {
        "severity": "high",
        "type": "code_vs_documentation",
        "description": "ProgramManager uses file_io.py's FileIO abstraction for LOAD/SAVE/MERGE operations, but the documentation claims it uses direct filesystem operations",
        "affected_files": [
          "src/file_io.py",
          "src/editing/manager.py"
        ],
        "details": "ProgramManager.save_to_file() docstring says 'Raises: IOError: If file cannot be written' and uses direct 'open(filename, 'w')' calls. However, file_io.py defines a FileIO abstraction layer (RealFileIO and SandboxedFileIO) that should be used instead. The manager.py code directly accesses filesystem:\n\n```python\ndef save_to_file(self, filename: str) -> None:\n    with open(filename, 'w') as f:\n        for line_number in sorted(self.lines.keys()):\n            f.write(self.lines[line_number] + '\\n')\n```\n\nBut file_io.py provides:\n```python\nclass FileIO(ABC):\n    @abstractmethod\n    def save_file(self, filename: str, content: str) -> None:\n```\n\nThis means ProgramManager bypasses the abstraction layer entirely."
      },
      {
        "severity": "high",
        "type": "code_vs_documentation",
        "description": "Two competing filesystem abstraction layers exist with different APIs and purposes",
        "affected_files": [
          "src/file_io.py",
          "src/filesystem/base.py"
        ],
        "details": "file_io.py defines FileIO abstract class with methods:\n- list_files(filespec: str) -> List[Tuple[str, int, bool]]\n- load_file(filename: str) -> str\n- save_file(filename: str, content: str) -> None\n- delete_file(filename: str) -> None\n- file_exists(filename: str) -> bool\n\nfilesystem/base.py defines FileSystemProvider with different API:\n- open(filename: str, mode: str, binary: bool) -> FileHandle\n- exists(filename: str) -> bool\n- delete(filename: str)\n- list_files(pattern: Optional[str]) -> list\n- get_size(filename: str) -> int\n- reset()\n\nThe FileSystemProvider uses a FileHandle abstraction for file operations, while FileIO uses direct string content. These appear to be two different architectural approaches to the same problem, with no clear indication of which should be used where."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "Docstring for cmd_edit() claims count prefixes and search commands are not implemented, but doesn't show if they're parsed or rejected",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "Docstring says:\n\"Note: Count prefixes ([n]D, [n]C) and search commands ([n]S, [n]K) are not yet implemented.\"\n\nBut the implementation only handles single-character commands (D, C, I, X, H, L, E, Q, A, Space, CR). There's no code to detect or reject count prefixes or search commands - they would just be treated as unknown commands and ignored. The docstring implies they might be added later, but the code doesn't validate or warn about them."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "Comment claims return_stmt > len(statements) is invalid, but code allows return_stmt == len(statements) as valid, creating confusion about boundary condition",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Comment at line 1009: '# return_stmt is 0-indexed offset. Valid range: 0 to len(statements) inclusive.'\nComment at line 1010: '# return_stmt == len(statements) is valid: \"continue at next line\" (GOSUB was last stmt)'\nComment at line 1011: '# return_stmt > len(statements) is invalid: statement was deleted (validation error)'\n\nBut then code at line 1012: 'if return_stmt > len(line_statements):  # Check for strictly greater than (== len is OK)'\n\nThe comment says 'Valid range: 0 to len(statements) inclusive' which is ambiguous. Does 'inclusive' mean <= len or < len? The code clarifies it means <= len is valid, but the comment could be clearer by saying 'Valid range: 0 to len(statements) (where len means continue at next line)'."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "OPTION BASE comment says 'Duplicate Definition' for arrays existing, but doesn't clarify implicit vs explicit dimensioning",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In execute_optionbase() at line ~1330, comment states:\n# MBASIC 5.21 gives 'Duplicate Definition' if:\n# 1. OPTION BASE has already been executed, OR\n# 2. Any arrays have been created (even with implicit BASE 0)\n\nThe code checks:\nif len(self.runtime._arrays) > 0:\n    raise RuntimeError('Duplicate Definition')\n\nThis doesn't distinguish between explicitly dimensioned arrays (via DIM) and implicitly created arrays (via first use like A(5)=10). MBASIC 5.21 behavior may differ for these cases. The comment says 'even with implicit BASE 0' but it's unclear if this means implicitly-created arrays or implicitly-assumed base."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "OPEN statement comment lists valid modes but error message differs",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In execute_open() at line ~1850, comment states:\n# Valid modes: I (input), O (output), A (append), R (random access)\n# Any other mode raises 'Invalid OPEN mode' error\n\nBut the actual error raised is:\nraise RuntimeError(f'Invalid OPEN mode: {mode}')\n\nThe comment says the error message is 'Invalid OPEN mode' but the code includes the actual mode value. This is a minor inconsistency but could affect error handling code that matches on exact error messages."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "apply_keyword_case_policy function has 'preserve' policy that docstring says shouldn't be called but code handles anyway",
        "affected_files": [
          "src/position_serializer.py"
        ],
        "details": "In apply_keyword_case_policy:\nelif policy == \"preserve\":\n    # Preserve is handled by caller passing in original case\n    # This shouldn't be called with \"preserve\", but if it is, use capitalize\n    return keyword.capitalize()\n\nThis is contradictory - if preserve is handled by caller, why does this function need to handle it? Either:\n1. The function should raise an error for 'preserve' policy\n2. The comment is wrong and 'preserve' IS a valid policy here\n3. The implementation is defensive but the comment should explain why"
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "max_string_length documented as '255 bytes (MBASIC 5.21 limit - standard for 8-bit BASIC)' but this appears in multiple places with inconsistent justification",
        "affected_files": [
          "src/resource_limits.py"
        ],
        "details": "The 255-byte string limit appears in:\n1. ResourceLimits.__init__ default: max_string_length=255 with comment '255 bytes (MBASIC 5.21 limit - standard for 8-bit BASIC)'\n2. create_web_limits: max_string_length=255 with same comment\n3. create_local_limits: max_string_length=255 with same comment\n4. create_unlimited_limits: max_string_length=1024*1024 (1MB)\n\nThe 'unlimited' preset breaks the '255 is MBASIC standard' rule. Either:\n1. The comment should say '255 is recommended for compatibility' not 'standard'\n2. The unlimited preset should also use 255 for MBASIC compatibility\n3. The comment should explain that unlimited is for testing only"
      },
      {
        "severity": "high",
        "type": "Code vs Documentation inconsistency",
        "description": "STEP command documentation conflicts with keybinding description for statement vs line execution",
        "affected_files": [
          "src/ui/cli_debug.py",
          "src/ui/curses_keybindings.json"
        ],
        "details": "cli_debug.py cmd_step() docstring says:\n\"Executes a single statement (not a full line). If a line contains multiple\nstatements separated by colons, each statement is executed separately.\n\nThis matches the curses UI 'Step Statement' command (Ctrl+T).\nFor line-based stepping, see the UI-specific step_line command.\"\n\nBut curses_keybindings.json shows TWO different step commands:\n- \"step_line\" (Ctrl+K): \"Step Line (execute all statements on current line)\"\n- \"step\" (Ctrl+T): \"Step statement (execute one statement)\"\n\nThe CLI documentation claims STEP matches Ctrl+T (statement stepping), but also references a separate step_line command that doesn't exist in CLI."
      },
      {
        "severity": "high",
        "type": "internal_code_inconsistency",
        "description": "Inconsistent line number width handling between parsing (variable) and formatting (fixed)",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "_parse_line_number method uses variable-width parsing:\nspace_idx = line.find(' ', 1)\nif space_idx > 1:\n    line_num = int(line[1:space_idx])\n    code_start_col = space_idx + 1\n\nThis allows any number of digits for line numbers.\n\nBut _parse_line_numbers method formats with fixed width:\nline_num_formatted = f\"{num_str:>5}\"\nnew_line = f\" {line_num_formatted} {rest}\"\n\nThis creates inconsistency: parsing accepts variable width but formatting always produces 5 characters."
      },
      {
        "severity": "high",
        "type": "code_internal_inconsistency",
        "description": "Variable name inconsistency: editor_lines vs self.editor.lines",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Line ~99: 'if self.program.has_lines() and not self.editor_lines:'\n\nBut throughout the rest of the code, the pattern is 'self.editor.lines' (e.g., line ~577: 'if line_number in self.editor.lines:', line ~619: 'self.editor.lines[insert_num] = \"\"').\n\nThere's no visible initialization of self.editor_lines as a separate attribute, suggesting this may be a typo or outdated reference."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "Comment says 'NOTE: Don't call interpreter.start() because it resets PC!' but then immediately clears halted flag and manipulates state, which may have similar effects",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment: '# NOTE: Don't call interpreter.start() because it resets PC!\n# RUN 120 already set PC to line 120, so just clear halted flag'\nCode then does:\nif not hasattr(self.interpreter, 'state') or self.interpreter.state is None:\n    self.interpreter.state = InterpreterState(_interpreter=self.interpreter)\nself.runtime.halted = False\nself.interpreter.state.is_first_line = True\n\nThe comment warns against resetting PC, but the code creates a new InterpreterState if none exists, which may have initialization side effects. The relationship between these operations and PC preservation is unclear."
      },
      {
        "severity": "high",
        "type": "code_vs_documentation",
        "description": "Help widget footer shows 'u=Back' but keybindings.py documents 'U' (uppercase) for back navigation",
        "affected_files": [
          "src/ui/help_widget.py",
          "src/ui/keybindings.py"
        ],
        "details": "help_widget.py line 72:\nself.footer = urwid.Text(\" ↑/↓=Scroll Tab=Next Link Enter=Follow /=Search u=Back ESC/Q=Exit \")\n\nhelp_widget.py line 289:\nelif key == 'u' or key == 'U':\n\nThis accepts both, but the footer only shows lowercase 'u', which may confuse users expecting consistency with other uppercase key displays like 'Q'."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "Comment says 'Execution stack window (menu only - no dedicated key, step_line uses Ctrl+K)' but LIST_KEY is defined as step_line with Ctrl+K, creating confusion about what Ctrl+K does",
        "affected_files": [
          "src/ui/keybindings.py"
        ],
        "details": "keybindings.py line 103-106:\n# Execution stack window (menu only - no dedicated key, step_line uses Ctrl+K)\nSTACK_KEY = ''  # No keyboard shortcut\nSTACK_CHAR = ''\nSTACK_DISPLAY = 'Menu only'\n\nkeybindings.py line 127-130:\n# Step Line (Ctrl+K) - execute all statements on current line\n_list_key = _get_key('editor', 'step_line') or 'Ctrl+K'\nLIST_KEY = _ctrl_key_to_urwid(_list_key)\nLIST_CHAR = _ctrl_key_to_char(_list_key)\n\nThe comment about stack window mentions 'step_line uses Ctrl+K' as if explaining why stack can't use it, but this creates confusion about the relationship between these features."
      },
      {
        "severity": "high",
        "type": "code_vs_documentation",
        "description": "KEYBINDINGS_BY_CATEGORY shows 'Shift+Ctrl+B' for Clear all breakpoints but CLEAR_BREAKPOINTS_KEY is defined as 'ctrl shift b' (different order)",
        "affected_files": [
          "src/ui/keybindings.py"
        ],
        "details": "keybindings.py line 165-167:\n# Clear all breakpoints (hardcoded)\nCLEAR_BREAKPOINTS_KEY = 'ctrl shift b'\nCLEAR_BREAKPOINTS_DISPLAY = 'Ctrl+Shift+B'\n\nThe urwid key format is 'ctrl shift b' but the display format is 'Ctrl+Shift+B'. While these may be equivalent, the inconsistency in modifier order (ctrl shift vs Shift+Ctrl) could cause confusion."
      },
      {
        "severity": "high",
        "type": "code_vs_documentation",
        "description": "LIST_KEY is documented as 'Step Line' but STATUS_BAR_SHORTCUTS shows '^K stack', suggesting Ctrl+K has conflicting purposes",
        "affected_files": [
          "src/ui/keybindings.py"
        ],
        "details": "keybindings.py line 127-130:\n# Step Line (Ctrl+K) - execute all statements on current line\n_list_key = _get_key('editor', 'step_line') or 'Ctrl+K'\nLIST_KEY = _ctrl_key_to_urwid(_list_key)\nLIST_DISPLAY = _list_key\n\nkeybindings.py line 260:\nSTATUS_BAR_SHORTCUTS = \"MBASIC - ^F help  ^U menu  ^W vars  ^K stack  Tab cycle  ^Q quit\"\n\nCtrl+K is defined as 'Step Line' in the keybindings but the status bar shows it as 'stack'. These are different functions."
      },
      {
        "severity": "high",
        "type": "incomplete_implementation",
        "description": "Method _edit_simple_variable is incomplete - cuts off mid-implementation",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "The _edit_simple_variable method at line ~840 ends abruptly:\n\n# Create a token with line=-1 to indicate immediate mode / variable editor\nclass ImmediateModeToken:\n    def __init__(self):\n        self.line = -1\n        self.position = None\n\nThe method doesn't complete - it defines a token class but never uses it to actually update the variable. The implementation is cut off."
      },
      {
        "severity": "high",
        "type": "internal_logic_inconsistency",
        "description": "Array element editing uses inconsistent array_base logic",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _edit_array_element() at lines 95-103:\n\"if not default_subscripts and dimensions:\\n            array_base = self.runtime.array_base\\n            if array_base == 0:\\n                # OPTION BASE 0: use all zeros\\n                default_subscripts = ','.join(['0'] * len(dimensions))\\n            else:\\n                # OPTION BASE 1: use all ones\\n                default_subscripts = ','.join(['1'] * len(dimensions))\"\n\nThis assumes array_base can only be 0 or 1, but the else clause treats ANY non-zero value as base 1. This could be incorrect if array_base has an invalid value. Should explicitly check for array_base == 1 in the else-if."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "Comment in cmd_cont() describes CONT command behavior but implementation doesn't match typical BASIC CONT semantics",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In cmd_cont() method around line 1450:\nDocstring: 'Execute CONT command - continue after STOP.\\n\\nResumes execution after:\\n- STOP statement\\n- Ctrl+C/Break\\n- END statement (in some cases)\\n\\nInvalid if program was edited after stopping.'\n\nBut the implementation:\n1. Only checks 'self.runtime.stopped' flag - doesn't validate if program was edited\n2. Uses 'self.runtime.stop_line' and 'self.runtime.stop_stmt_index' which aren't set anywhere in the visible code\n3. Calls '_tick()' method which doesn't exist (should be '_execute_tick()')\n4. Sets 'self.is_running' which doesn't exist (should be 'self.running')\n\nThis suggests the cmd_cont() implementation is incomplete or outdated."
      },
      {
        "severity": "high",
        "type": "code_internal_inconsistency",
        "description": "cmd_cont() calls non-existent '_tick()' method instead of '_execute_tick()'",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In cmd_cont() method (line 1472): 'self._tick()'\n\nBut the actual method defined in the class is '_execute_tick()' (line 1100). The '_tick()' method doesn't exist, so CONT command would crash with AttributeError."
      },
      {
        "severity": "high",
        "type": "code_vs_documentation",
        "description": "The renum_program() function's docstring says it takes a 'renum_callback' parameter that 'Should handle GOTO, GOSUB, ON GOTO, ON GOSUB, IF THEN/ELSE line numbers', but the actual implementation walks the AST and calls the callback for ALL statements, not just those with line number references.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "Docstring:\nrenum_callback: Function that takes (stmt, line_map) to update statement references\n                Should handle GOTO, GOSUB, ON GOTO, ON GOSUB, IF THEN/ELSE line numbers\n\nImplementation:\nfor stmt in line_node.statements:\n    renum_callback(stmt, line_map)  # Called for EVERY statement\n\nThis means the callback will be invoked for PRINT, LET, REM, etc. statements that have no line number references. The docstring should clarify that the callback is responsible for filtering which statements need updates."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "Comment says 'reuse existing interpreter to preserve session' but code creates new exec_io handler which may not preserve session",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In _menu_step_line() and _menu_step_stmt():\n# Update IO handler for execution (reuse existing interpreter to preserve session)\nself.exec_io = SimpleWebIOHandler(self._append_output, self._get_input)\nself.interpreter.io = self.exec_io\n\nCreating a new IO handler and replacing the interpreter's IO may not preserve the session state. The comment suggests session preservation is the goal, but the implementation creates a fresh IO handler."
      },
      {
        "severity": "high",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent check for empty program between _menu_run and step functions",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In _menu_run():\n# If empty program, just show Ready (variables cleared, nothing to execute)\nif not self.program.lines:\n    self._set_status('Ready')\n    self.running = False\n    return\n\nBut in _menu_step_line() and _menu_step_stmt():\nif not self.program.lines:\n    self._notify('No program loaded', type='warning')\n    return\n\nRUN silently succeeds on empty program (just sets status), but STEP shows a warning. This inconsistency may confuse users."
      },
      {
        "severity": "high",
        "type": "code_vs_comment",
        "description": "Comment in _execute_immediate says 'Don't sync editor from AST' but there's a TODO suggesting future architecture change",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Comment at line ~1590:\n# Don't sync editor from AST after immediate command - editor text is the source!\n# Current flow: editor text → parsed to AST → execution\n# (Never reverse: AST → text, as that would lose user's exact text/formatting)\n# TODO: Future architecture: parse lines immediately into AST,\n# text only kept for syntax errors\n\nThis TODO contradicts the 'Never reverse' statement above it. The TODO suggests a future where AST becomes the source of truth, which would require syncing editor from AST. This is a design inconsistency that needs resolution."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "README.md lists 'visual' backend but common/index.md does not mention it in the main help topics",
        "affected_files": [
          "docs/help/README.md",
          "docs/help/common/index.md"
        ],
        "details": "README.md states: 'Entry Points... Visual Help: ui/visual/index.md' but common/index.md only lists shortcuts, language reference, and examples without any UI-specific navigation"
      },
      {
        "severity": "high",
        "type": "code_vs_documentation",
        "description": "Settings dialog in web UI doesn't implement breakpoint management but debugging.md describes Web UI breakpoint features",
        "affected_files": [
          "src/ui/web/web_settings_dialog.py",
          "docs/help/common/debugging.md"
        ],
        "details": "web_settings_dialog.py only implements editor settings (auto-numbering) and limits settings (read-only)\ndebugging.md describes: 'Web UI: Click the line number to toggle breakpoint, Use the \"Breakpoint\" button in the toolbar'\nNo breakpoint settings or management visible in WebSettingsDialog class"
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Error codes table has inconsistent numbering",
        "affected_files": [
          "docs/help/common/language/appendices/error-codes.md"
        ],
        "details": "The error codes documentation shows gaps in numbering:\n- Codes 1-18 are listed in General Errors\n- Then jumps to 19-23, 26, 29-30 in Extended errors\n- Then jumps to 50-58, 61-64, 66-67 in Disk I/O errors\n\nCodes 24-25, 27-28, 31-49, 59-60, 65 are missing without explanation. This could confuse users who encounter these error numbers."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "HELPSETTING command name inconsistency",
        "affected_files": [
          "docs/help/common/language/statements/helpsetting.md",
          "docs/help/common/language/statements/index.md"
        ],
        "details": "helpsetting.md title: 'HELPSETTING'\nindex.md lists it as: 'HELP SET'\n\nThese are different command names. Should be consistent - either 'HELPSETTING' or 'HELP SET' throughout."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Contradictory information about PEEK/POKE implementation",
        "affected_files": [
          "docs/help/mbasic/architecture.md",
          "docs/help/mbasic/compatibility.md"
        ],
        "details": "architecture.md states: \"PEEK/POKE - Emulated for compatibility\" and \"POKE: Parsed and executes successfully, but performs no operation (no-op)\" and \"PEEK: Returns random integer 0-255\"\n\ncompatibility.md states: \"PEEK/POKE - Emulated for compatibility\" with same description but adds: \"PEEK does NOT return values written by POKE\"\n\nBoth documents describe the same feature but architecture.md is more detailed. The key point about PEEK not returning POKE values should be consistent across both documents."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Self-contradictory statements about file handling in Web UI",
        "affected_files": [
          "docs/help/mbasic/compatibility.md"
        ],
        "details": "Within the same section of compatibility.md, there are contradictory statements:\n\n\"**Web UI** - In-memory virtual filesystem:\nThe Web UI uses a sandboxed in-memory filesystem for security:\"\n\nBut earlier in the same document:\n\"**IMPORTANT:** File handling differs between UIs:\n**CLI, Tk, and Curses UIs** - Real filesystem access:\"\n\nThen later: \"Files stored in browser memory (not browser localStorage)\"\n\nBut also: \"Files persist only during browser session\"\n\nThese statements need to be reconciled - does Web UI use memory only, localStorage, or both? The documentation should clearly state the storage mechanism."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Broken internal documentation link",
        "affected_files": [
          "docs/help/ui/curses/feature-reference.md"
        ],
        "details": "curses/feature-reference.md references 'See [Find/Replace Status](find-replace.md)' but this file does not exist in the provided documentation. The only find-replace documentation is at 'docs/help/ui/cli/find-replace.md', not in the curses directory."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Contradictory keyboard shortcuts for Save operation",
        "affected_files": [
          "docs/help/ui/curses/files.md",
          "docs/help/ui/curses/quick-reference.md"
        ],
        "details": "files.md states: 'Press **Ctrl+V** (Note: Ctrl+S unavailable due to terminal flow control)' for saving programs.\n\nHowever, quick-reference.md lists: '**Ctrl+V** | Save program' in the Program Management section.\n\nBut the note in files.md explicitly says Ctrl+S is unavailable, yet quick-reference.md doesn't mention Ctrl+V at all for saving - it only shows 'Menu only' for some operations but lists Ctrl+V for Save without the caveat about Ctrl+S."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Contradictory help keyboard shortcuts",
        "affected_files": [
          "docs/help/ui/curses/quick-reference.md",
          "docs/help/ui/curses/getting-started.md"
        ],
        "details": "quick-reference.md states: '**?** | Help (with search)' under Global Commands.\n\nBut getting-started.md states: '**Ctrl+P** - Help (you're here now!)' in the Essential Keys section.\n\nThese are two completely different key combinations for the same function. Users following getting-started.md would press Ctrl+P, but quick-reference.md says to press ?."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Menu access keyboard shortcut discrepancy",
        "affected_files": [
          "docs/help/ui/curses/quick-reference.md",
          "docs/help/ui/curses/index.md"
        ],
        "details": "quick-reference.md states: '**Ctrl+U** | Show menu' under Global Commands.\n\nBut index.md does not mention Ctrl+U at all in its help navigation table, and the curses UI documentation generally doesn't emphasize menu access as a primary interaction method."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Find and Replace keyboard shortcuts inconsistency",
        "affected_files": [
          "docs/help/ui/tk/feature-reference.md",
          "docs/help/ui/tk/features.md"
        ],
        "details": "feature-reference.md documents:\n'### Find/Replace (Ctrl+F / Ctrl+H)'\nAnd later: '- Find: Ctrl+F\n- Replace: Ctrl+H\n- Find Next: F3'\n\nBut features.md documents:\n'**Find text ({{kbd:find}}):**'\n'**Replace text ({{kbd:find_replace}}):**'\n\nThe template notation {{kbd:find}} and {{kbd:find_replace}} should expand to the same shortcuts as feature-reference.md, but this isn't clear. If they expand to different shortcuts, that's an inconsistency."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Tk settings documentation claims 'more configuration options than the Web UI' and lists Keywords, Variables, Interpreter, and UI tabs, but Web settings documentation only shows Editor and Limits tabs with minimal options",
        "affected_files": [
          "docs/help/ui/tk/settings.md",
          "docs/help/ui/web/settings.md"
        ],
        "details": "Tk settings.md states:\n'The Tk (Tkinter) desktop GUI provides the most comprehensive settings dialog with tabbed interface for all MBASIC settings. It offers more configuration options than the Web UI, including keyword display, variable case handling, interpreter settings, and UI themes.'\n\nTabs listed in Tk:\n- Editor Tab\n- Keywords Tab (Case Style: force_lower, force_upper, force_capitalize)\n- Variables Tab (Case Conflict policies, Show Types In Window)\n- Interpreter Tab (Strict Mode, Max Execution Time, Debug Mode)\n- UI Tab (Theme, Font Size)\n\nWeb settings.md only shows:\n- Editor Tab (auto-numbering only)\n- Limits Tab (view-only)\n\nThis is a major feature discrepancy that needs verification."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Conflicting information about breakpoint implementation status",
        "affected_files": [
          "docs/help/ui/web/debugging.md",
          "docs/help/ui/web/features.md"
        ],
        "details": "debugging.md states:\n'Currently Implemented:\n1. Use Run → Toggle Breakpoint menu option\n2. Enter the line number when prompted\n3. A visual indicator appears in the editor\n4. Use Run → Clear All Breakpoints to remove all'\n\nAnd explicitly notes:\n'Note: Advanced features like clicking line numbers to set breakpoints, conditional breakpoints, and a dedicated breakpoint panel are planned for future releases but not yet implemented.'\n\nBut features.md under 'Debugging Tools > Breakpoints' lists:\n'Line breakpoints\nConditional breakpoints\nHit count breakpoints\nLogpoints'\n\nWithout any 'future' or 'planned' qualifiers, suggesting they are currently available."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Features document lists capabilities that are explicitly marked as not implemented in other documents",
        "affected_files": [
          "docs/help/ui/web/features.md"
        ],
        "details": "features.md lists under 'Debugging Tools > Breakpoints':\n'Management:\n- Enable/disable\n- Edit conditions\n- View all breakpoints\n- Export/import'\n\nAnd under 'Advanced Features':\n'Session Management:\n- Save sessions\n- Load sessions\n- Share sessions\n- Collaborative editing\n- Version control\n- Conflict resolution'\n\nBut debugging.md explicitly states:\n'Note: Advanced features like clicking line numbers to set breakpoints, conditional breakpoints, and a dedicated breakpoint panel are planned for future releases but not yet implemented.'\n\nAnd getting-started.md states:\n'Note: Collaboration features (sharing, collaborative editing, version control) are not currently implemented.'\n\nfeatures.md appears to be aspirational rather than documenting actual current features."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Duplicate installation documentation with different content",
        "affected_files": [
          "docs/user/INSTALL.md",
          "docs/user/INSTALLATION.md"
        ],
        "details": "Two separate installation guides exist: INSTALL.md (detailed, complete guide) and INSTALLATION.md (placeholder stating 'PLACEHOLDER - Documentation in progress'). INSTALLATION.md references 'docs/dev/INSTALLATION_FOR_DEVELOPERS.md' which is not in the provided files. This creates confusion about which installation guide to follow."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Contradictory statements about feature completeness",
        "affected_files": [
          "docs/user/INSTALL.md"
        ],
        "details": "INSTALL.md states 'This is a complete implementation of MBASIC 5.21. All core language features are implemented and tested.' under 'Feature Status', but then lists 'What Doesn't Work' including PEEK/POKE, INP/OUT, and LPRINT/LLIST. While these are explained as hardware-specific, the claim of 'complete implementation' and 'all core language features' is contradicted by the existence of non-working features."
      },
      {
        "severity": "high",
        "type": "documentation_inconsistency",
        "description": "Smart Insert feature availability contradiction",
        "affected_files": [
          "docs/user/TK_UI_QUICK_START.md",
          "docs/user/UI_FEATURE_COMPARISON.md"
        ],
        "details": "TK_UI_QUICK_START.md extensively documents Smart Insert (Ctrl+I) as a Tk feature:\n| **Ctrl+I** | Smart insert blank line |\n## Smart Insert Workflow\n**Smart Insert (Ctrl+I)** is the fastest way to add code...\n\nUI_FEATURE_COMPARISON.md confirms:\n| **Smart Insert** | ❌ | ❌ | ✅ | ❌ | Tk exclusive feature |\n\nHowever, keyboard-shortcuts.md (Curses) does NOT document Ctrl+I at all, but DOES document:\n| `Ctrl+J` | Insert line |\n\nThis suggests Curses has a 'Insert line' feature (Ctrl+J) that may be similar to Smart Insert, but it's unclear if this is the same feature or different. If different, the distinction should be clarified. If same, the feature comparison table is incorrect."
      }
    ],
    "medium": [
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Duplicate 'column' field definition in DefFnStatementNode",
        "affected_files": [
          "src/ast_nodes.py"
        ],
        "details": "@dataclass\nclass DefFnStatementNode:\n    \"\"\"DEF FN statement - define single-line function\"\"\"\n    name: str\n    parameters: List['VariableNode']\n    expression: 'ExpressionNode'\n    line_num: int = 0\n    column: int = 0\n    column: int = 0  # <-- Duplicate field"
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims identifiers preserve original case, but code returns original_text unconditionally without using case keeper table",
        "affected_files": [
          "src/case_string_handler.py"
        ],
        "details": "In case_keepy_string method:\nComment says: \"Identifiers always preserve their original case. Unlike keywords, which can be forced to a specific case policy, identifiers (variable/function names) retain their case as typed. This matches MBASIC 5.21 behavior where identifiers are case-insensitive for matching but preserve display case.\"\n\nCode: elif setting_prefix == \"idents\":\n    return original_text\n\nThe comment describes the behavior correctly, but the implementation bypasses the case keeper table entirely. If identifiers should be case-insensitive for matching (as stated), they should still be registered in the identifier_table for consistency checking, even if they always return original_text."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "INPUT function docstring uses incorrect syntax for file parameter",
        "affected_files": [
          "src/basic_builtins.py"
        ],
        "details": "Docstring says:\n\"INPUT$(n) - read n characters from keyboard\nINPUT$(n, #filenum) - read n characters from file\"\n\nBut the function signature is: def INPUT(self, num, file_num=None)\n\nThe docstring shows '#filenum' syntax which is BASIC syntax, not Python. The actual call would be INPUT(n, filenum) without the #. This could confuse developers about how to call the function from Python code."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "UsingFormatter handles string encoding inconsistently between CVI/CVS/CVD and MKI/MKS/MKD",
        "affected_files": [
          "src/basic_builtins.py"
        ],
        "details": "CVI/CVS/CVD functions use:\nbyte_data = s.encode('latin-1')\n\nMKI/MKS/MKD functions use:\nreturn byte_data.decode('latin-1')\n\nThis assumes all binary data can be represented as latin-1 strings. However, the INPUT function that reads from files doesn't specify encoding, which could cause issues. The file handling should consistently use binary mode for these operations."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "SandboxedFileIO documentation contradicts its implementation status",
        "affected_files": [
          "src/file_io.py"
        ],
        "details": "Class docstring says:\n\"NOTE: Partially implemented. list_files() delegates to backend.sandboxed_fs, but load_file(), save_file(), delete_file(), and file_exists() are STUBS that raise IOError or return empty results.\"\n\nBut the load_file() implementation shows:\n```python\ndef load_file(self, filename: str) -> str:\n    raise IOError(\"LOAD not yet implemented in web UI - requires async refactor\")\n```\n\nWhile list_files() shows:\n```python\ndef list_files(self, filespec: str = \"\") -> List[Tuple[str, int, bool]]:\n    if hasattr(self.backend, 'sandboxed_fs'):\n        pattern = filespec.strip().strip('\"').strip(\"'\") if filespec else None\n        files = self.backend.sandboxed_fs.list_files(pattern)\n```\n\nThis indicates list_files() depends on backend.sandboxed_fs existing, but there's no documentation about what backend.sandboxed_fs is or how it relates to src/filesystem/sandboxed_fs.py's SandboxedFileSystemProvider."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "FileIO class docstring describes usage pattern that doesn't match actual architecture",
        "affected_files": [
          "src/file_io.py"
        ],
        "details": "FileIO docstring says:\n\"Different UIs provide different implementations:\n- Local UIs (TK/Curses/CLI): RealFileIO (direct filesystem)\n- Web UI: SandboxedFileIO (browser localStorage)\"\n\nBut SandboxedFileIO.__init__() takes a 'backend' parameter and delegates to backend.sandboxed_fs, suggesting it's a wrapper rather than a direct implementation. The docstring implies SandboxedFileIO directly implements localStorage access, but the code shows it's an adapter to another abstraction layer."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "InMemoryFileHandle.flush() implementation doesn't match typical flush semantics",
        "affected_files": [
          "src/filesystem/sandboxed_fs.py"
        ],
        "details": "The flush() method is documented as 'Flush write buffers' but implementation shows:\n```python\ndef flush(self):\n    \"\"\"Flush write buffers.\"\"\"\n    # StringIO/BytesIO have flush() methods (no-ops) - hasattr check for safety\n    if hasattr(self.file_obj, 'flush'):\n        self.file_obj.flush()\n```\n\nThe comment admits StringIO/BytesIO flush() are no-ops, but doesn't actually flush to the virtual filesystem. Content is only saved on close():\n```python\ndef close(self):\n    if not self.closed:\n        if 'w' in self.mode or 'a' in self.mode or '+' in self.mode:\n            # Save content back to virtual filesystem\n            self.file_obj.seek(0)\n            content = self.file_obj.read()\n            self.fs_provider._save_file_content(self.filename, content)\n```\n\nThis means flush() doesn't actually persist changes, which could be unexpected behavior."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "SandboxedFileIO claims to use browser localStorage but SandboxedFileSystemProvider uses in-memory storage",
        "affected_files": [
          "src/file_io.py",
          "src/filesystem/sandboxed_fs.py"
        ],
        "details": "SandboxedFileIO docstring says:\n\"Sandboxed file operations for web UI.\n\nDesigned for browser localStorage file storage with 'mbasic_file_' prefix.\nNo access to server filesystem - all files are client-side only.\"\n\nBut SandboxedFileSystemProvider docstring says:\n\"Sandboxed in-memory filesystem for web UI.\n\nFeatures:\n- All files stored in memory (no disk access)\"\n\nAnd uses class variable:\n```python\n_user_filesystems: Dict[str, Dict[str, Union[str, bytes]]] = {}\n```\n\nThis is Python memory, not browser localStorage. The files would be lost on server restart. The documentation claims localStorage persistence but implementation is volatile memory."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Docstring claims GOTO/GOSUB are not supported in immediate mode, but code does not explicitly prevent them",
        "affected_files": [
          "src/immediate_executor.py"
        ],
        "details": "The _show_help() method states:\n\"• GOTO, GOSUB, and control flow statements are not supported\"\n\nHowever, the execute() method does not check for or reject GOTO/GOSUB statements. It simply executes whatever statement is provided through execute_statement(). There is no validation that prevents control flow statements from being attempted."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'DO NOT execute when status is: waiting_for_input' but can_execute_immediate() returns True when input_prompt is not None",
        "affected_files": [
          "src/immediate_executor.py"
        ],
        "details": "The class docstring states:\n\"DO NOT execute when status is:\n- 'waiting_for_input' - Program is waiting for INPUT (use normal input instead)\"\n\nBut can_execute_immediate() returns True when waiting for input:\n\"return (self.runtime.halted or\n        state.error_info is not None or\n        state.input_prompt is not None)\"\n\nThe condition 'state.input_prompt is not None' means the program IS waiting for input, yet the function returns True (safe to execute), contradicting the docstring."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims RENUM uses AST-based approach but implementation delegates to ui_helpers without showing AST usage",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "Comment in cmd_renum() says:\n\"Delegates to renum_program() from ui_helpers, which uses an AST-based approach:\n1. Parse program to AST\n2. Build line number mapping (old -> new)\n3. Walk AST and update all line number references (via _renum_statement callback)\n4. Serialize AST back to source\"\n\nBut the actual implementation just calls:\nold_lines, line_map = renum_program(\n    self.program,\n    args,\n    self._renum_statement,\n    self.program_runtime\n)\n\nThe comment describes the internal workings of renum_program() which is in a different file (ui_helpers), making it unclear if this is documentation or implementation detail."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'Only AUTO and EDIT are true meta-commands' but then lists many other commands",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "In execute_command() method:\nComment says: \"Meta-commands (editor commands that manipulate program source)\nOnly AUTO and EDIT are true meta-commands that can't be parsed - they're\nhandled specially below. Everything else goes through parser as immediate mode.\"\n\nBut then the code has special handling for:\n- AUTO (handled specially)\n- EDIT (handled specially)\n- Empty command (handled specially)\n- Everything else goes to execute_immediate()\n\nThe comment is accurate but could be clearer that AUTO/EDIT are the only ones that bypass the parser entirely."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment about readline Ctrl+A binding conflicts with actual behavior",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "In _setup_readline() method:\nComment says: \"Bind Ctrl+A to insert literal \\x01 character instead of moving cursor\nThis overrides default Ctrl+A (beginning-of-line). The literal character\nappears in input string where it's detected for edit mode (see start() method)\"\n\nCode does:\nreadline.parse_and_bind('Control-a: self-insert')\n\nBut 'self-insert' in readline inserts the character that was typed, not a literal \\x01. The actual \\x01 comes from the terminal sending Ctrl+A as ASCII 0x01, which readline then inserts. The comment makes it sound like the binding creates the \\x01, when really it just stops readline from interpreting it as beginning-of-line."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Docstring for cmd_delete() delegates to ui_helpers but doesn't mention error handling differences",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "Docstring says:\n\"Delegates to ui_helpers.delete_lines_from_program() which handles:\n- Parsing the delete range syntax\n- Removing lines from program manager\n- Updating runtime statement table if program is loaded\"\n\nBut the implementation wraps the call in try/except:\ntry:\n    delete_lines_from_program(self, args, self.program_runtime)\nexcept ValueError as e:\n    print(f\"?{e}\")\nexcept Exception as e:\n    print(f\"?Syntax error\")\n\nThe docstring doesn't mention that ValueError is caught and printed, while other exceptions are converted to \"?Syntax error\". This error handling behavior is important for understanding how the command works."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent error handling between cmd_save/cmd_load and cmd_merge",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "cmd_save() and cmd_load() use:\ntry:\n    # operation\nexcept FileNotFoundError:\n    print(f\"?File not found: {filename}\")\nexcept Exception as e:\n    print(f\"?{type(e).__name__}: {e}\")\n\ncmd_merge() uses:\ntry:\n    # operation\nexcept FileNotFoundError:\n    print(f\"?File not found: {filename}\")\nexcept Exception as e:\n    print(f\"?{type(e).__name__}: {e}\")\n\nBoth are identical, but cmd_chain() uses different error handling:\nexcept FileNotFoundError:\n    print(f\"?File not found: {filename}\")\nexcept ChainException:\n    raise\nexcept Exception as e:\n    print_error(e, self.program_runtime if hasattr(self, 'program_runtime') else None)\n\nThe inconsistency is that cmd_chain uses print_error() while others use direct print(). This may be intentional (chain runs during execution) but creates inconsistent error reporting."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment_conflict",
        "description": "Comment claims immediate mode does NOT support GOTO/GOSUB, but the code only saves and restores PC without actually preventing GOTO/GOSUB execution",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "Comment states: \"Immediate mode does NOT support GOTO/GOSUB (see help text), so any PC changes from statements are not meaningful\"\n\nHowever, the code executes statements without any restriction:\nfor stmt in line_node.statements:\n    interpreter.execute_statement(stmt)\n\nThe code saves/restores PC to preserve stopped program position, but doesn't actually prevent GOTO/GOSUB from executing. If GOTO/GOSUB are truly unsupported in immediate mode, there should be validation or error handling to prevent their execution."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims skip_next_breakpoint_check prevents re-triggering the same breakpoint immediately, but code shows it's set AFTER hitting a breakpoint and cleared when continuing past it",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Comment at line 52-53: 'skip_next_breakpoint_check: bool = False  # Allows execution past a breakpoint after stopping on it\n                                               # (prevents re-triggering the same breakpoint immediately)'\n\nBut code at lines 330-335 shows:\n'if at_breakpoint:\n    if not self.state.skip_next_breakpoint_check:\n        self.runtime.halted = True\n        self.state.skip_next_breakpoint_check = True\n        return self.state\n    else:\n        self.state.skip_next_breakpoint_check = False'\n\nThe flag is set to True when stopping at a breakpoint, then cleared when passing it again. This means it allows ONE execution past the breakpoint after stopping, not 'prevents re-triggering immediately'."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment in execute_next says 'NEXT I, J, K closes I first, then J, then K' but this is backwards - it should say 'processes I first, then J, then K' since closing happens in reverse order",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Comment at line 1088: '# Process variables in order: NEXT I, J, K closes I first, then J, then K'\n\nThis is misleading. The code processes variables left-to-right (I, then J, then K), but 'closes' suggests popping from a stack, which would be reverse order. The actual behavior is: increment I and check if it continues (if so, jump back and skip J, K). If I finishes, pop I's loop, then process J, etc. The comment should say 'processes' not 'closes' to avoid confusion with stack operations."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'OLD EXECUTION METHODS REMOVED (v1.0.300)' but doesn't specify what version the current code is, making it unclear if this is historical or current",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Comment at lines 577-581: '# OLD EXECUTION METHODS REMOVED (v1.0.300)\n    # run_from_current(), _run_loop(), step_once() removed\n    # These used old current_line/next_line fields\n    # Replaced by tick_pc() and PC-based execution\n    # CONT command now uses tick() directly'\n\nThe file header says 'MBASIC 5.21 Interpreter' (line 2), but the comment references v1.0.300. Are these different versioning schemes? Is v1.0.300 a component version while 5.21 is the MBASIC language version? This needs clarification."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment in _execute_next_single says 'return_stmt is 0-indexed offset. Valid values are 0 to len(statements)' but then says 'return_stmt == len(statements) means FOR was last statement' which contradicts 0-indexed terminology",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Comment at lines 1149-1152: '# return_stmt is 0-indexed offset. Valid values are 0 to len(statements).\n            # return_stmt == len(statements) means FOR was last statement (continue at next line).\n            # return_stmt > len(statements) is invalid (statement was deleted).'\n\nIf return_stmt is 0-indexed and there are N statements (indices 0 to N-1), then return_stmt == N is not a valid index into the statements array. The comment should clarify that return_stmt can be one-past-the-end to indicate 'continue at next line', which is a special sentinel value, not a valid statement index."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says RESUME 0 and RESUME have identical meaning, but code treats them differently",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Comment at line ~1050 states:\n# RESUME or RESUME 0 - retry the statement that caused the error\n# Both forms are valid BASIC syntax with identical meaning\n\nHowever, the code implementation treats them differently:\nif stmt.line_number is None or stmt.line_number == 0:\n    # RESUME or RESUME 0 - retry the statement that caused the error\n\nThe condition 'stmt.line_number is None' handles RESUME (no argument), while 'stmt.line_number == 0' handles RESUME 0 (explicit zero). These are logically equivalent in the condition, but the comment implies they should be treated identically when in fact the parser may distinguish them."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "WEND comment describes popping loop before jumping, but this may cause issues with nested loops",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In execute_wend() at line ~1020, comment states:\n# Pop the loop from the stack BEFORE jumping back to WHILE.\n# The WHILE will re-push if the condition is still true, or skip the\n# loop body if the condition is now false. This ensures clean stack state.\n\nThis implementation pops the loop info before jumping back to WHILE. However, if the WHILE condition is true and re-pushes, this creates a new loop entry. If the condition is false, the WHILE skips to after WEND. This seems correct, but the comment doesn't explain what happens if there's an error or GOTO during the WHILE re-evaluation - the loop stack state could become inconsistent."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "INPUT statement comment describes state machine behavior but doesn't document all state variables",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In execute_input() at line ~1410, comment states:\n# In tick-based execution mode, this may transition to 'waiting_for_input' state\n# instead of blocking. When input is provided via provide_input(), execution\n# resumes from the input buffer.\n\nThe code sets multiple state variables:\nself.state.input_prompt = full_prompt\nself.state.input_variables = stmt.variables\nself.state.input_file_number = None\n\nBut the comment doesn't document that input_variables and input_file_number are also part of the state machine. Additionally, the code clears these at the end but doesn't explain when/how they're used during resumption."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "CLEAR comment says it closes all files but code doesn't handle close errors gracefully",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In execute_clear() at line ~1270, comment states:\n# Close all open files\n\nThe code implementation:\nfor file_num in list(self.runtime.files.keys()):\n    try:\n        file_obj = self.runtime.files[file_num]\n        if hasattr(file_obj, 'close'):\n            file_obj.close()\n    except:\n        pass\n\nThe bare 'except: pass' silently ignores all errors. The comment doesn't mention this error handling behavior. If a file close fails (e.g., disk full, permission error), the user has no way to know. This could lead to data loss or corruption."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "MID$ assignment docstring incomplete - doesn't document what happens when length parameter is omitted",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In execute_midassignment() at line ~2120, docstring states:\nSyntax: MID$(string_var, start, length) = value\n\nHowever, MBASIC allows MID$(string_var, start) = value (length omitted), which replaces from start to end of string or end of value, whichever is shorter. The code evaluates stmt.length, but doesn't document or handle the case where length might be None or omitted. This could cause a runtime error if the parser allows omitting length."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims CONT cannot resume after Ctrl+C Break, but the code doesn't actually check what caused the stop",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Comment in execute_cont says:\n\"Note: Ctrl+C (Break) does not set stopped flag, so CONT cannot resume after Break.\"\n\nHowever, the code only checks:\nif not self.runtime.stopped:\n    raise RuntimeError(\"Can't continue - no program stopped\")\n\nThe comment describes a limitation but the code doesn't distinguish between STOP and Break - it only checks the stopped flag. The comment may be describing behavior elsewhere in the codebase, but within this function there's no special handling for Break vs STOP."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Docstring for execute_stop says 'npc is set by statement execution flow' but doesn't explain what npc is or where it's set",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "The docstring comment states:\n\"# Save PC position for CONT\n# npc is set by statement execution flow to point to next statement\nself.runtime.stop_pc = self.runtime.npc\"\n\nThe comment references 'npc' (next program counter) but this variable is not defined or used anywhere in the visible code. The comment assumes knowledge of implementation details not present in this code section. This could confuse maintainers."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "MID$ assignment comment claims it calculates minimum of three values, but the actual calculation may not match the description",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Comment states:\n\"# Calculate how many characters to actually replace\n# This is the minimum of: length parameter, length of new_value, and available space in string\nchars_to_replace = min(length, len(new_value), len(current_value) - start_idx)\"\n\nThe code does take the minimum of these three values, but the comment doesn't explain the semantic meaning: 'length' is how many chars to replace, 'len(new_value)' limits replacement to available replacement text, and 'len(current_value) - start_idx' prevents going past string end. The comment is technically accurate but could be clearer about why this is the correct behavior."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "GUIIOHandler is not exported in __init__.py but is documented as a public module",
        "affected_files": [
          "src/iohandler/__init__.py",
          "src/iohandler/gui.py"
        ],
        "details": "src/iohandler/__init__.py exports: __all__ = ['IOHandler', 'ConsoleIOHandler', 'CursesIOHandler']\n\nBut src/iohandler/gui.py exists and contains GUIIOHandler class with full documentation suggesting it should be importable from the package."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "WebIOHandler is not exported in __init__.py but is a complete implementation",
        "affected_files": [
          "src/iohandler/__init__.py",
          "src/iohandler/web_io.py"
        ],
        "details": "src/iohandler/__init__.py exports: __all__ = ['IOHandler', 'ConsoleIOHandler', 'CursesIOHandler']\n\nBut src/iohandler/web_io.py exists with WebIOHandler class that is a full implementation for NiceGUI web components."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims KeywordCaseManager exists for complex policies but code uses SimpleKeywordCase",
        "affected_files": [
          "src/lexer.py"
        ],
        "details": "In src/lexer.py line ~40:\n        # Keyword case handler - uses SimpleKeywordCase (simple force-based policies only)\n        # Note: KeywordCaseManager class exists for more complex policies (first_wins, preserve)\n        self.keyword_case_manager = keyword_case_manager or SimpleKeywordCase(policy=\"force_lower\")\n\nHowever, src/keyword_case_manager.py shows KeywordCaseManager DOES support first_wins and preserve policies via CaseKeeperTable. The comment suggests a limitation that doesn't exist."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "error() method uses color_pair(4) without initialization or documentation",
        "affected_files": [
          "src/iohandler/curses_io.py"
        ],
        "details": "In curses_io.py error() method:\n                if curses.has_colors():\n                    self.output_win.addstr(message, curses.color_pair(4))\n\nThe code assumes color_pair(4) is initialized and represents red, but:\n1. CursesIOHandler.__init__() doesn't initialize any color pairs\n2. No documentation explains what color_pair(4) should be\n3. If color pairs aren't initialized, this will fail or show wrong colors"
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Module docstring says 'Similar to variable case handling' but no variable case handling code is shown",
        "affected_files": [
          "src/keyword_case_manager.py"
        ],
        "details": "keyword_case_manager.py docstring:\n\"\"\"Keyword Case Management - Single source of truth for keyword display case\n\nSimilar to variable case handling, maintains a table mapping normalized (lowercase)\nkeywords to their display case based on the configured policy.\"\"\"\n\nThis references 'variable case handling' as if it's a parallel system, but no variable case handling code is provided in the files. This may reference code not included in the analysis."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims APOSTROPHE ends the current statement but not the line, but code implementation treats it as ending the line",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Comment at line ~100 states:\n\"Note: APOSTROPHE starts a comment statement and ends the current statement,\nbut not the line itself (the comment content continues on the same line).\nThis allows comment statements to be preserved in the AST.\"\n\nHowever, in parse_line() at line ~300, the code breaks after parsing a comment:\n\"elif self.match(TokenType.REM, TokenType.REMARK, TokenType.APOSTROPHE):\n    # Allow REM/REMARK/' without colon after statement (standard MBASIC)\n    # These consume rest of line as a comment\n    stmt = self.parse_remark()\n    if stmt:\n        statements.append(stmt)\n    break  # Comment ends the line\"\n\nThe 'break' statement ends the line parsing, contradicting the comment that says APOSTROPHE doesn't end the line."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment about MID$ statement detection describes complex lookahead but implementation may have edge cases",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Comment at line ~650 states:\n\"# MID$ statement (substring assignment)\n# Detect MID$ used as statement: MID$(var, start, len) = value\"\n\nAnd later:\n\"# Look ahead to distinguish MID$ statement from MID$ function\n# MID$ statement has pattern: MID$ ( ... ) =\n# MID$ is tokenized as single MID token ($ is part of the keyword)\n# Complex lookahead: scan past parentheses (tracking depth) to find = sign\"\n\nHowever, the implementation uses a try-except block that catches all exceptions:\n\"try:\n    ...\nexcept:\n    pass\"\n\nThis broad exception handling could hide bugs and doesn't match the comment's description of 'complex lookahead' - it's more like 'speculative parsing with fallback'."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims both comma and semicolon after INPUT prompt show '?' but code doesn't track separator type",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Comment at line ~35 states:\n\"# Note: In MBASIC, both comma and semicolon after prompt show \"?\" prompt.\n# The separator type doesn't affect behavior (both display \"?\"), so we just\n# consume it without tracking.\"\n\nHowever, this contradicts the suppress_question flag logic which specifically handles INPUT; (semicolon immediately after INPUT keyword) to suppress the '?' prompt. The comment suggests separator after prompt doesn't matter, but the code has special handling for semicolon position."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent handling of DEF type suffix application in DIM vs FOR/NEXT statements",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "In parse_dim() (line ~1180):\n\"# Determine type suffix based on explicit suffix or DEF type\n# If no explicit suffix, check DEF type map and add appropriate suffix\nif name and name[-1] not in '$%!#':\n    first_letter = name[0].lower()\n    if first_letter in self.def_type_map:\n        var_type = self.def_type_map[first_letter]\n        # Append appropriate suffix based on DEF type\n        if var_type == TypeInfo.STRING:\n            name = name + '$'\"\n\nThis modifies the name string by appending the suffix.\n\nHowever, in parse_for() (line ~880) and parse_next() (line ~950), the code checks def_type_map but assigns to type_suffix variable without modifying the name:\n\"if not type_suffix:\n    first_letter = var_name[0].lower()\n    if first_letter in self.def_type_map:\n        var_type = self.def_type_map[first_letter]\n        if var_type == TypeInfo.STRING:\n            type_suffix = '$'\"\n\nThis inconsistency means DIM modifies the variable name while FOR/NEXT keep name and suffix separate."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment about REM after THEN line_number contradicts general statement separator rules",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "In parse_if() at line ~780:\n\"# Allow optional REM after THEN line_number (without colon)\n# Syntax: IF condition THEN 100 REM comment\nif self.match(TokenType.REM, TokenType.REMARK):\n    # REM consumes rest of line, we're done\n    self.parse_remark()\n    # Don't check for ELSE since REM consumed the line\"\n\nThis special-cases REM to not require a colon separator after 'THEN 100', but elsewhere in the code (like after GOTO/GOSUB line numbers), there's no such special handling. This inconsistency in statement separator requirements is not explained."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "parse_width docstring claims statement is 'no-op in execution' but this is parser code, not executor",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Docstring says: 'Both parameters are parsed but the statement is a no-op in execution (see execute_width). Modern terminals handle line width automatically.'\n\nThis comment belongs in the executor, not the parser. The parser's job is just to parse the syntax, not to describe execution behavior. The reference to 'execute_width' suggests this docstring was copied from or intended for the executor module."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "parse_call comment about argument parsing contradicts implementation details",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Docstring says: 'CALL ROUTINE(X,Y) - Call with arguments (fully parsed/supported)'\n\nBut the implementation comment says: '# Note: CALL ROUTINE(X,Y) is parsed as VariableNode with subscripts'\n\nThis reveals that the 'full support' is actually a workaround where function-call-like syntax is initially misparsed as array access, then corrected. The docstring's claim of 'fully parsed/supported' is misleading about the implementation approach."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "PC class docstring describes stmt_offset as '0-based index' but example shows confusion between offset and index terminology",
        "affected_files": [
          "src/pc.py"
        ],
        "details": "Docstring says:\n\"The stmt_offset is a 0-based index into the statements list for a line.\"\nThen example says:\n\"PC(10, 2)  - Third statement on line 10 (offset 2 = index 2)\"\n\nThis is redundant/confusing - if stmt_offset IS a 0-based index, then saying 'offset 2 = index 2' is tautological. The comment should clarify that offset 2 means the third statement (since 0-based), not restate that offset equals index."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Function serialize_statement has fallback comment that doesn't match actual fallback behavior",
        "affected_files": [
          "src/position_serializer.py"
        ],
        "details": "In serialize_statement method:\nelse:\n    # Fallback: Use pretty printing from ui_helpers\n    from src.ui.ui_helpers import serialize_statement\n    return \" \" + serialize_statement(stmt)\n\nThe fallback adds a leading space, but the comment doesn't mention this. Other statement serializers don't add leading spaces - they rely on emit_token for spacing. This inconsistency could cause double-spacing issues."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Module docstring claims to track position conflicts but doesn't explain what causes them or how they're resolved",
        "affected_files": [
          "src/position_serializer.py"
        ],
        "details": "Module docstring says:\n\"Tracks position conflicts when actual output column doesn't match expected token column (conflicts occur during AST modifications).\"\n\nBut the PositionConflict class and conflict tracking mechanism are not explained. The docstring should clarify:\n1. What AST modifications cause conflicts\n2. How conflicts are resolved (the 'Strategy: Add single space' approach)\n3. Whether conflicts are errors or just warnings"
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment in emit_keyword says it uses 'keyword case table' but implementation uses 'keyword case manager'",
        "affected_files": [
          "src/position_serializer.py"
        ],
        "details": "Docstring says:\n\"Emit a keyword token with case from keyword case table.\"\n\nBut code does:\nif self.keyword_case_manager:\n    keyword_with_case = self.keyword_case_manager.get_display_case(keyword)\n\nThe terminology is inconsistent - is it a 'table' or a 'manager'? The __init__ docstring correctly calls it 'KeywordCaseManager instance', so the emit_keyword docstring should match."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Function _adjust_statement_positions has case for 'AssignmentStatementNode' but serialize_statement has 'LetStatementNode'",
        "affected_files": [
          "src/position_serializer.py"
        ],
        "details": "In serialize_statement:\nif stmt_type == 'LetStatementNode':\n    return self.serialize_let_statement(stmt)\n\nBut in _adjust_statement_positions:\nif stmt_type == 'AssignmentStatementNode':\n    _adjust_expression_positions(stmt.variable, offset)\n    _adjust_expression_positions(stmt.expression, offset)\n\nThese appear to be the same statement type with different names. This inconsistency could cause position adjustments to fail for LET statements during renumbering."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "check_array_allocation docstring says it 'Raises RuntimeError if allocation would exceed limits' but also 'Returns estimated size in bytes'",
        "affected_files": [
          "src/resource_limits.py"
        ],
        "details": "The function both checks limits (raising errors) and returns size. The name 'check_array_allocation' suggests it only validates, but it also computes the size. This dual purpose should be clarified - perhaps rename to 'validate_and_compute_array_size' or split into two functions."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Docstring for get_variable() states token is REQUIRED but implementation allows token=None in some cases",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "Docstring says:\n\"This method MUST be called with a token for normal program execution.\"\n\"Args:\n    token: REQUIRED - Token object with line and position info for tracking.\"\n\nBut implementation has:\n```python\nif token is None:\n    raise ValueError(\"get_variable() requires token parameter. Use get_variable_for_debugger() instead.\")\n```\n\nHowever, later in the code:\n```python\ntracking_info = {\n    'line': getattr(token, 'line', self.pc.line_num if self.pc and not self.pc.halted() else None),\n    'position': getattr(token, 'position', None),\n    'timestamp': time.perf_counter()\n}\n```\n\nThe getattr with fallback suggests token could be None or missing attributes, contradicting the REQUIRED claim and the ValueError check."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment in _variables storage says 'line -1 indicates debugger/prompt/internal set' but set_variable() uses line=-1 for debugger_set=True",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "Comment at line ~50:\n\"# Each variable is stored as: name_with_suffix -> {'value': val, 'last_read': {...}, 'last_write': {...}, 'original_case': str, 'case_variants': [...]}\n# Note: line -1 in last_write indicates debugger/prompt/internal set (not from program execution)\"\n\nBut in set_variable_raw() implementation:\n```python\nclass FakeToken:\n    def __init__(self):\n        self.line = -1\n        self.position = None\n\nfake_token = FakeToken()\n\n# Call set_variable for uniform handling\nself.set_variable(name, type_suffix, value, token=fake_token)\n```\n\nThis creates a token with line=-1 for internal/system variables (like ERR%, ERL%), which is different from debugger_set=True. The comment suggests line=-1 is only for debugger sets, but it's also used for system variable initialization."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'Error PC and details are stored in ErrorInfo (interpreter.py state)' but Runtime class has error_handler attributes",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "Comment at line ~130:\n\"# Note: Actual error state (occurred/active) is tracked in state.error_info, not here\n# Runtime only stores the registered handler location, not whether an error occurred\n# Error PC and details are stored in ErrorInfo (interpreter.py state)\n# ERL%, ERS%, and ERR% system variables are set from ErrorInfo\"\n\nBut then the code initializes:\n```python\n# Initialize system variables ERR% and ERL% to 0\n# These are integer type variables set by error handling code\nself.set_variable_raw('err%', 0)\nself.set_variable_raw('erl%', 0)\n```\n\nThe comment says ERR% and ERL% are set from ErrorInfo, but the code shows they're stored as regular variables in Runtime. This is confusing about where error state actually lives."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Docstring for _resolve_variable_name() says 'For special cases like system variables (ERR%, ERL%), see set_variable_raw()' but set_variable_raw() calls set_variable() internally",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "Docstring for _resolve_variable_name():\n\"This is the standard method for determining the storage key for a variable,\napplying BASIC type resolution rules (explicit suffix > DEF type > default).\nFor special cases like system variables (ERR%, ERL%), see set_variable_raw().\"\n\nBut set_variable_raw() implementation:\n```python\ndef set_variable_raw(self, full_name, value):\n    \"\"\"Set variable by full name (e.g., 'err%', 'erl%').\n    ...\n    Internally calls set_variable() for uniform handling with line=-1 token.\n    \"\"\"\n    # Split the variable name from the type suffix using utility function\n    name, type_suffix = split_variable_name_and_suffix(full_name)\n    ...\n    # Call set_variable for uniform handling\n    self.set_variable(name, type_suffix, value, token=fake_token)\n```\n\nSo set_variable_raw() is not a special case that bypasses _resolve_variable_name() - it still goes through set_variable() which uses _resolve_variable_name(). The comment is misleading."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Inconsistency in get_execution_stack() docstring regarding 'from_line' field for GOSUB entries",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "The docstring states:\n\"For GOSUB calls:\n{\n    'type': 'GOSUB',\n    'from_line': 60,      # Line to return to (despite misleading name)\n    'return_line': 60,    # Line to return to\n    'return_stmt': 0      # Statement offset to return to\n}\"\n\nBut the actual code implementation is:\nresult.append({\n    'type': 'GOSUB',\n    'from_line': entry.get('return_line', 0),  # Line to return to\n    'return_line': entry.get('return_line', 0),\n    'return_stmt': entry.get('return_stmt', 0)  # Statement offset\n})\n\nThe docstring acknowledges 'from_line' is misleading but still includes it in the documented return format. The field name suggests 'line where GOSUB was called from' but the comment and implementation show it's actually 'line to return to', making it redundant with 'return_line'."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Comment claims 'interpreter.max_execution_time and interpreter.debug_mode are available' but these settings are not defined in SETTING_DEFINITIONS",
        "affected_files": [
          "src/settings_definitions.py"
        ],
        "details": "Comment at line ~150 in settings_definitions.py:\n# Note: interpreter.max_execution_time and interpreter.debug_mode are available\n# but not shown in UI - edit settings file directly if needed\n\nHowever, SETTING_DEFINITIONS dict only contains:\n- variables.case_conflict\n- variables.show_types_in_window\n- keywords.case_style\n- editor.auto_number\n- editor.auto_number_start\n- editor.auto_number_step\n\nNo 'interpreter.max_execution_time' or 'interpreter.debug_mode' settings exist."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "settings.py docstring describes scope precedence as 'file > project > global > default' but SettingScope enum only defines GLOBAL, PROJECT, FILE without clear precedence documentation",
        "affected_files": [
          "src/settings.py",
          "src/settings_definitions.py"
        ],
        "details": "src/settings.py line 5:\n\"\"\"Handles loading, saving, and accessing user settings with scope precedence.\nSupports global settings (~/.mbasic/settings.json) and project settings (.mbasic/settings.json).\"\"\"\n\nLine 23:\n\"\"\"Manages user settings with scope precedence (file > project > global > default)\"\"\"\n\nBut in settings_definitions.py, SettingScope enum (lines 18-22) only has:\nclass SettingScope(Enum):\n    GLOBAL = \"global\"      # ~/.mbasic/settings.json\n    PROJECT = \"project\"    # .mbasic/settings.json in project dir\n    FILE = \"file\"          # Per-file metadata\n\nNo documentation of precedence order in the enum itself."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "keywords.case_style setting has choice 'force_capitalize' but simple_keyword_case.py docstring says 'Capitalize first letter (modern style)' which is ambiguous",
        "affected_files": [
          "src/simple_keyword_case.py",
          "src/settings_definitions.py"
        ],
        "details": "In settings_definitions.py (line ~95):\nchoices=[\"force_lower\", \"force_upper\", \"force_capitalize\"],\ndescription=\"How to handle keyword case in source code\",\nhelp_text=\"lowercase (MBASIC 5.21), UPPERCASE (classic), or Capitalize (modern)\",\n\nIn simple_keyword_case.py (line ~11):\n- force_capitalize: Capitalize first letter (modern style)\n\nThe term 'Capitalize first letter' could mean either 'Print' or 'PRINT' depending on interpretation. The code uses keyword.capitalize() which would produce 'Print', but this should be explicitly documented."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'Future: per-file settings' but FILE scope is already implemented in SettingScope enum and used in code",
        "affected_files": [
          "src/settings.py"
        ],
        "details": "In settings.py line 32:\nself.file_settings: Dict[str, Any] = {}  # Future: per-file settings\n\nBut in settings_definitions.py, SettingScope.FILE is already defined and used:\nclass SettingScope(Enum):\n    FILE = \"file\"          # Per-file metadata\n\nAnd in settings.py, the set() method already handles FILE scope (line ~186):\nelif scope == SettingScope.FILE:\n    self.file_settings[key] = value\n\nThe comment 'Future:' is outdated - FILE scope is already partially implemented."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "CLIBackend imports and uses InteractiveMode but InteractiveMode is not shown in the provided source files",
        "affected_files": [
          "src/ui/cli.py"
        ],
        "details": "In cli.py (line ~42):\nfrom interactive import InteractiveMode\n\nAnd line ~47:\nself.interactive = InteractiveMode(io_handler)\n\nThe 'interactive' module is imported but not provided in the source files. This makes it impossible to verify if the integration is correct or if there are inconsistencies between CLIBackend's interface and InteractiveMode's implementation."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "CLIBackend imports cli_debug module that is not shown in the provided source files",
        "affected_files": [
          "src/ui/cli.py"
        ],
        "details": "In cli.py (lines ~53-54):\nfrom .cli_debug import add_debug_commands\nself.debugger = add_debug_commands(self.interactive)\n\nThe cli_debug module is imported and used but not provided in the source files. This creates an incomplete picture of the CLI backend's capabilities."
      },
      {
        "severity": "medium",
        "type": "Code vs Comment conflict",
        "description": "Comment says 'without buttons' but code creates footer with keyboard shortcuts",
        "affected_files": [
          "src/ui/curses_settings_widget.py"
        ],
        "details": "In _create_body() method at line creating listbox:\n# Create scrollable list (without buttons)\nlistbox = urwid.ListBox(urwid.SimpleFocusListWalker(content))\n\n# Create footer with keyboard shortcuts hint\nfooter_text = urwid.Text(\"Enter=OK  ESC/^P=Cancel  ^A=Apply  ^R=Reset\", align='center')\n\nThe comment 'without buttons' is misleading - it creates a footer with keyboard shortcuts that act as virtual buttons. The comment appears outdated from a refactoring where physical button widgets were removed."
      },
      {
        "severity": "medium",
        "type": "Code vs Documentation inconsistency",
        "description": "BREAK command documentation incomplete - missing reference to program attribute",
        "affected_files": [
          "src/ui/cli_debug.py"
        ],
        "details": "In cmd_break() method, the code checks:\nif line_num in self.interactive.program.lines:\n\nBut the docstring for CLIDebugger.__init__() only mentions:\nArgs:\n    interactive_mode: The InteractiveMode instance to extend\n\nIt doesn't document that interactive_mode must have a 'program' attribute with a 'lines' dictionary. This is an implicit dependency not documented in the class or method documentation."
      },
      {
        "severity": "medium",
        "type": "Code vs Documentation inconsistency",
        "description": "cmd_step() references program_interpreter.state.program_ended but also checks program_interpreter existence inconsistently",
        "affected_files": [
          "src/ui/cli_debug.py"
        ],
        "details": "In cmd_step() method:\nif not self.interactive.program_runtime:\n    self.interactive.io_handler.output(\"No program running. Use RUN first.\")\n    return\n\nBut later in the same method:\nif self.interactive.program_interpreter.state.program_ended:\n\nThe code checks program_runtime exists but then accesses program_interpreter without checking. This inconsistency suggests either:\n1. Both should be checked, or\n2. They're always synchronized (not documented)\n3. There's a potential AttributeError bug"
      },
      {
        "severity": "medium",
        "type": "Code vs Documentation inconsistency",
        "description": "enhance_run_command() modifies cmd_run but doesn't document the signature change",
        "affected_files": [
          "src/ui/cli_debug.py"
        ],
        "details": "Original method signature is preserved in docstring:\ndef enhanced_run(start_line=None):\n    \"\"\"Enhanced RUN with breakpoint support\n\n    Args:\n        start_line: Optional line number to start execution at\n    \"\"\"\n\nBut there's no documentation that:\n1. The original cmd_run is stored and called\n2. What the original cmd_run signature is expected to be\n3. Whether start_line parameter is actually passed through (code shows it is: original_run(start_line=start_line))\n4. The relationship between this and _install_breakpoint_handler()"
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims line numbers use variable width but code still uses fixed 5-character formatting",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Class docstring says: 'Note: Line numbers use variable width (not fixed 5 chars) for flexibility with large programs.'\n\nBut in _parse_line_numbers method (line ~1050):\nline_num_formatted = f\"{num_str:>5}\"\nnew_line = f\" {line_num_formatted} {rest}\"\n\nAnd again at line ~1090:\nline_num_formatted = f\"{num_str:>5}\"\nnew_line = f\"{status}{line_num_formatted} {rest}\"\n\nThe code is still using fixed 5-character right-justified formatting (:>5), contradicting the comment about variable width."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Multiple comments claim variable-width line numbers but formatting code uses fixed width",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment at line ~280: 'Note: Line numbers use variable width (not fixed 5 chars) for flexibility with large programs.'\n\nComment at line ~320: '# Variable-width line numbers - no need to right-justify'\n\nComment at line ~330: '# With variable width, check if we're in line number area (before first space after status)'\n\nBut the actual formatting in _parse_line_numbers uses:\nf\"{num_str:>5}\" (fixed 5-character right-justified)\n\nAnd in keypress method line ~460:\n'if 1 <= col_in_line <= 6:' suggests fixed 6-column width (status + 5 digits)"
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Format string in _format_line docstring doesn't match implementation",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Docstring at line ~570 says:\n'Format: \"S<linenum> CODE\" (where <linenum> is variable width)'\n\nBut the actual implementation creates:\nprefix = f\"{status}{line_num_str} \"\n\nwhere line_num_str is just str(line_num), which is indeed variable width. However, _parse_line_numbers reformats everything to fixed 5-char width, so the actual format in the editor is 'S     NN CODE' (fixed width), not 'SNN CODE' (variable width)."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims ImmediateExecutor will be re-initialized in start() and _run_program(), but _run_program() method does not exist in the provided code",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment at line ~75: '# Create a proper ImmediateExecutor (will be re-initialized in start() and _run_program())'\n\nThe start() method does re-initialize ImmediateExecutor (line ~95), but there is no _run_program() method visible in the code. The actual method is _run_program() which is referenced but not shown in the provided excerpt."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Two different CapturingIOHandler classes are created - one inline and one imported",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Line ~8: 'from src.immediate_executor import OutputCapturingIOHandler'\n\nLines ~13-48: A complete CapturingIOHandler class is defined inline with methods like output(), get_and_clear_output(), input(), etc.\n\nLine ~51: 'self.io_handler = CapturingIOHandler()' uses the inline class\n\nLine ~55: 'immediate_io = OutputCapturingIOHandler()' uses the imported class\n\nThis creates two different IO handler implementations being used in the same initialization, which could lead to inconsistent behavior."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims _setup_program() is called but this method is not visible in the provided code",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Lines ~437-439: 'if not self._setup_program():\n    return  # Setup failed (error already displayed)'\n\nThe _setup_program() method is called in _debug_step() and _debug_step_line() but is not defined in the visible code excerpt. This could indicate missing code or that the method is defined elsewhere in the file."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'RUN = CLEAR + GOTO first line (or start_line if specified)' but code behavior differs",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "In _setup_program() method around line 1050:\nComment: '# Reset runtime with current program - RUN = CLEAR + GOTO first line (or start_line if specified)\\n# This preserves breakpoints but clears variables'\n\nHowever, the code calls runtime.reset_for_run() which clears variables, then later sets PC to start_line if specified. The comment suggests this happens atomically as part of 'RUN', but the implementation shows it's a two-step process where start() is called first (which resets PC to first line), then PC is manually overridden if start_line is provided."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment about preserving PC conflicts with actual conditional logic",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "In _sync_program_to_runtime() around line 1150:\nComment: '# Restore PC only if execution is running AND not paused at breakpoint\\n# (paused programs need PC reset to current breakpoint location)\\n# Otherwise ensure halted (don't accidentally start execution)'\n\nThe comment says 'paused programs need PC reset to current breakpoint location', but the code in the else branch sets PC to halted_pc(), not to any breakpoint location. The comment implies PC should be set to the breakpoint, but the code just halts it."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims 'Log the command to output pane (not separate immediate history)' but there is no evidence of a separate immediate history feature anywhere in the code",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Line comment: '# Log the command to output pane (not separate immediate history)'\nThis comment suggests there was or could be a separate immediate history, but no such feature exists in the codebase. The comment is misleading."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'Sync program to runtime (but don't reset PC - keep current execution state)' but the actual behavior and necessity of this is unclear",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment: '# Sync program to runtime (but don't reset PC - keep current execution state)\n# This allows LIST to work, but doesn't start execution'\nThe comment suggests this is specifically to allow LIST to work without affecting execution state, but it's unclear why LIST would need this sync or what _sync_program_to_runtime actually does to the PC."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'duplicates definition in _run_program - consider extracting to shared location' but this duplication is a code smell that should be addressed",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment: '# (duplicates definition in _run_program - consider extracting to shared location)'\nThe entire CapturingIOHandler class is defined inline within _execute_immediate, duplicating code from _run_program. This is acknowledged but not fixed, creating maintenance burden."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment in cmd_renum says 'Need access to InteractiveMode's _renum_statement' but doesn't explain why this private method is being accessed",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment: '# Need access to InteractiveMode's _renum_statement\n# Curses UI has self.interpreter which should have interactive_mode'\nThe code accesses a private method (_renum_statement) from another class without explanation of why this coupling is necessary or whether there should be a public API."
      },
      {
        "severity": "medium",
        "type": "code_inconsistency",
        "description": "Inconsistent error message format across cmd_* methods - some use '?Error' prefix, some don't",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "cmd_save uses: '?Syntax error: filename required' and '?Error saving file:'\ncmd_delete uses: '?{e}' and '?Error during delete:'\ncmd_renum uses: '?RENUM not available' and '?{e}' and '?Error during renumber:'\ncmd_merge uses: '?Syntax error: filename required' and '?Parse error' and '?{e}'\ncmd_files uses: '?Error listing files:'\ncmd_cont uses: '?Can't continue' and '?Error:'\n\nThe error message format is inconsistent - sometimes the exception message is prefixed with '?', sometimes with '?Error:', and the patterns vary."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "Help widget footer shows 'U=Back' in one place and 'u=Back' in another, inconsistent capitalization",
        "affected_files": [
          "src/ui/help_widget.py",
          "src/ui/keybindings.py"
        ],
        "details": "help_widget.py line 72:\nself.footer = urwid.Text(\" ↑/↓=Scroll Tab=Next Link Enter=Follow /=Search u=Back ESC/Q=Exit \")\n\nhelp_widget.py line 161:\nself.footer.set_text(\" ↑/↓=Scroll Tab=Next Link Enter=Follow /=Search U=Back ESC/Q=Exit \")\n\nLine 72 uses lowercase 'u', line 161 uses uppercase 'U' for the same action."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Docstring says HelpWidget is 'Urwid-based' and 'curses-specific', but help_macros.py is designed to work with any UI",
        "affected_files": [
          "src/ui/help_widget.py"
        ],
        "details": "help_widget.py line 1-9:\n\"\"\"Urwid-based help browser widget for navigating markdown documentation.\n\nProvides:\n- Up/Down scrolling through help content\n- Enter to follow links\n- ESC/Q to exit\n- Navigation breadcrumbs\n- Search across three-tier help system (/)\n\"\"\"\n\nhelp_widget.py line 38:\n# HelpWidget is curses-specific (uses urwid), so hardcode 'curses' UI name\nself.macros = HelpMacros('curses', help_root)\n\nBut help_macros.py is designed to accept any ui_name parameter and load corresponding keybindings. The comment suggests this is a limitation, but it's actually just a choice to hardcode 'curses'."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "Keybindings module shows 'Shift+Ctrl+V' for Save As and 'Shift+Ctrl+O' for Recent Files, but these are not documented in the JSON config loading",
        "affected_files": [
          "src/ui/keybindings.py",
          "src/ui/interactive_menu.py"
        ],
        "details": "keybindings.py line 234-235:\n('Shift+Ctrl+V', 'Save As'),\n('Shift+Ctrl+O', 'Recent files'),\n\nThese appear in KEYBINDINGS_BY_CATEGORY but there's no corresponding _get_key() call or JSON config reference for these bindings. They appear to be hardcoded in the documentation but may not actually work."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "Interactive menu shows 'Toggle Breakpoint' with keybinding display but uses hardcoded format conversion instead of loading from JSON",
        "affected_files": [
          "src/ui/interactive_menu.py",
          "src/ui/keybindings.py"
        ],
        "details": "interactive_menu.py line 30-31:\ndef fmt_key(display):\n    \"\"\"Convert keybinding display to compact ^X format.\"\"\"\n    if display.startswith('Ctrl+'):\n        return '^' + display[5:]\n    return display\n\ninteractive_menu.py line 48:\n(f'Toggle Breakpoint {fmt_key(kb.BREAKPOINT_DISPLAY)}', '_toggle_breakpoint_current_line'),\n\nThe menu is using keybindings.py constants (kb.BREAKPOINT_DISPLAY) but then converting them with a local function. This creates a dependency on the format of the display strings from keybindings.py."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'Search across three-tier help system' but the code only shows two tiers in tier_labels mapping",
        "affected_files": [
          "src/ui/help_widget.py"
        ],
        "details": "help_widget.py line 8:\n- Search across three-tier help system (/)\n\nhelp_widget.py line 95-98:\ntier_labels = {\n    'language': '📕 Language',\n    'mbasic': '📗 MBASIC',\n}\n\nThe docstring mentions 'three-tier' but only two tiers are defined in the mapping. The code does handle a third tier ('ui/') but it's not in the tier_labels dict, suggesting incomplete implementation or outdated documentation."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "STATUS_BAR_SHORTCUTS shows '^K stack' but STACK_DISPLAY is 'Menu only' with no keyboard shortcut",
        "affected_files": [
          "src/ui/keybindings.py"
        ],
        "details": "keybindings.py line 103-106:\n# Execution stack window (menu only - no dedicated key, step_line uses Ctrl+K)\nSTACK_KEY = ''  # No keyboard shortcut\nSTACK_CHAR = ''\nSTACK_DISPLAY = 'Menu only'\n\nkeybindings.py line 260:\nSTATUS_BAR_SHORTCUTS = \"MBASIC - ^F help  ^U menu  ^W vars  ^K stack  Tab cycle  ^Q quit\"\n\nThe status bar shows '^K stack' but the STACK constants indicate there's no keyboard shortcut and it's menu-only. This is contradictory."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "Help browser implements Ctrl+F for in-page search but this keybinding is not documented in tk_keybindings.json",
        "affected_files": [
          "src/ui/tk_help_browser.py",
          "src/ui/tk_keybindings.json"
        ],
        "details": "tk_help_browser.py line 127-128:\n# Make text read-only but allow copy (Ctrl+C) and find (Ctrl+F)\ndef readonly_key_handler(event):\n    # Allow Ctrl+C (copy), Ctrl+A (select all), Ctrl+F (find)\n    if event.state & 0x4:  # Control key\n        if event.keysym in ('c', 'C', 'a', 'A'):  # Ctrl+C, Ctrl+A\n            return  # Allow these\n        elif event.keysym in ('f', 'F'):  # Ctrl+F\n            self._inpage_search_show()\n            return \"break\"\n\nLine 136:\nself.bind(\"<Control-f>\", lambda e: self._inpage_search_show())\n\ntk_keybindings.json has no entry for Ctrl+F in help_browser section"
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent handling of link tags - some use 'link_' prefix, some use 'result_link_' prefix, but both are stored in the same link_urls dictionary with potentially overlapping keys",
        "affected_files": [
          "src/ui/tk_help_browser.py"
        ],
        "details": "Line 244:\ntag_name = f\"link_{self.link_counter}\"\n\nLine 330:\ntag_name = f\"result_link_{self.link_counter}\"\n\nBoth are stored in self.link_urls and both increment self.link_counter, so there's no actual conflict. However, the naming inconsistency could be confusing. The code checks for both prefixes in _create_context_menu (line 502-503):\nfor tag in tags:\n    if tag.startswith(\"link_\") or tag.startswith(\"result_link_\"):\n\nThis is actually consistent behavior, just inconsistent naming convention."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "Duplicate entries in keybindings JSON - 'new_program' and 'file_new' both map to Ctrl+N, 'save_file' and 'file_save' both map to Ctrl+S",
        "affected_files": [
          "src/ui/tk_keybindings.json"
        ],
        "details": "tk_keybindings.json lines 3-9:\n\"file_new\": {\n  \"keys\": [\"Ctrl+N\"],\n  \"primary\": \"Ctrl+N\",\n  \"description\": \"New file\"\n},\n\"new_program\": {\n  \"keys\": [\"Ctrl+N\"],\n  \"primary\": \"Ctrl+N\",\n  \"description\": \"New file\"\n}\n\nLines 19-29:\n\"file_save\": {\n  \"keys\": [\"Ctrl+S\"],\n  \"primary\": \"Ctrl+S\",\n  \"description\": \"Save file\"\n},\n\"save_file\": {\n  \"keys\": [\"Ctrl+S\"],\n  \"primary\": \"Ctrl+S\",\n  \"description\": \"Save file\"\n}\n\nThese appear to be duplicate entries with different names for the same action. This could cause confusion about which action name to use in code."
      },
      {
        "severity": "medium",
        "type": "implementation_inconsistency",
        "description": "Inconsistent error handling between _on_apply and _on_cancel methods",
        "affected_files": [
          "src/ui/tk_settings_dialog.py"
        ],
        "details": "_on_apply method (lines 193-201):\n    try:\n        set_setting(key, value, SettingScope.GLOBAL)\n    except Exception as e:\n        messagebox.showerror(...)\n        return False\n\n_on_cancel method (lines 211-217):\n    try:\n        set_setting(key, value, SettingScope.GLOBAL)\n    except Exception:\n        pass  # Ignore errors on cancel\n\nThe _on_apply method shows error dialogs and stops on failure, while _on_cancel silently ignores all errors. This inconsistency means if settings restoration fails during cancel, the user gets no feedback and settings may be in an inconsistent state."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment describes 3-pane layout but implementation uses different structure",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "Docstring says: '3-pane vertical layout: editor (top), output (middle), immediate mode (bottom)'\n\nBut code shows:\n- editor_frame with weight=3 (~50%)\n- output_frame with weight=2 (~33%)\n- immediate_frame with weight=1 (~17%)\n\nThe immediate_frame contains only an input line, not a full pane. The comment '# Bottom pane: Immediate Mode - just the input line' contradicts the docstring's description of it as a full pane."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Variables window column order inconsistency between setup and usage",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _create_variables_window() at line ~730:\ntree = ttk.Treeview(self.variables_window, columns=('Value', 'Type'), show='tree headings')\ntree.heading('Value', text='  Value')\ntree.heading('Type', text='  Type')\n\nBut in _on_variable_heading_click() at line ~780:\nif column == '#1':  # Value column (swapped to be first)\n    col_x = event.x - self.variables_tree.column('#0', 'width')\nelif column == '#2':  # Type column (swapped to be second)\n\nThe comment says 'swapped' but the columns are defined in Value, Type order from the start. There's no evidence of swapping."
      },
      {
        "severity": "medium",
        "type": "missing_implementation",
        "description": "Method _edit_array_element is referenced but not shown in code",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _on_variable_double_click at line ~825:\nif 'Array' in value_display:\n    # Array variable - edit last accessed element\n    self._edit_array_element(variable_display, type_suffix_display, value_display)\n\nThe method _edit_array_element is called but its implementation is not included in the provided code. This could be because the file is truncated."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'No formatting is applied' but code does apply formatting through _refresh_editor",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _refresh_editor() method:\nComment says: \"Line numbers are part of the text content as entered by user.\\nNo formatting is applied to preserve compatibility with real MBASIC.\"\n\nBut in _on_enter_key() method:\n- Line 1234: \"# Refresh to sort lines (only if no errors)\\n        self._refresh_editor()\"\n- This sorts/reorders lines, which IS formatting\n- The comment at line 1227 says \"# Save current program state\" followed by _save_editor_to_program() which clears and rebuilds the program, then _refresh_editor() loads it back sorted"
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Inconsistent handling of blank lines between methods",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _on_enter_key() at line 1234:\nComment: \"# At this point, the editor contains only the numbered lines (no blank lines)\\n        # because _refresh_editor loads from the program, which filters out blank lines\"\n\nBut _refresh_editor() at line 1119 does NOT filter blank lines:\n\"self.editor_text.text.insert(tk.END, line_text + '\\n')\"\nIt inserts lines exactly as stored in program.\n\nThe filtering happens in _save_editor_to_program() which skips empty lines when parsing, but _refresh_editor() itself doesn't filter - it just loads what's in self.program."
      },
      {
        "severity": "medium",
        "type": "internal_logic_inconsistency",
        "description": "Inconsistent error handling between parse failure paths",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _save_editor_to_program() at lines 1138-1145:\nWhen parse fails: \"self.editor_text.set_error(line_num, True, error)\\nhad_errors = True\"\n\nIn _on_enter_key() at lines 1263-1268:\nWhen parse fails: \"# Not valid BASIC - don't auto-number, just move to next line\\nself.editor_text.text.insert(tk.INSERT, '\\n')\\nreturn 'break'\"\n\nThe _on_enter_key() path does NOT call set_error() to mark the line with an error indicator, while _save_editor_to_program() does. This creates inconsistent user feedback - errors are only marked when saving, not when pressing Enter on an invalid line."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'DON'T save to program yet' but code behavior suggests line should be saved when user moves off it",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _smart_insert_line() method around line 1050:\nComment: '# DON\\'T save to program yet - the line is blank and would be filtered out\\n# Just position the cursor on the new line so user can start typing\\n# The line will be saved when they finish typing and move off it'\n\nHowever, the _check_line_change() method that handles moving off lines has logic that only triggers sort 'if old_line_num is not None' (line 1000), meaning blank numbered lines (which have no parsed line number) won't trigger save/sort. This creates inconsistency - the comment implies the line will be saved later, but the code won't save blank numbered lines."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'DON'T sort if just clicking around without editing' but logic may not distinguish clicking from editing",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _check_line_change() method around line 990:\nComment: '# DON\\'T sort if just clicking around without editing (old is None means we\\'re just tracking)'\n\nHowever, old_line_num can be None in two cases:\n1. First time tracking (just initialized, no previous line)\n2. Previous line had no line number\n\nThe code treats 'old_line_num is None' as 'just clicking around', but case #2 could be after actual editing (user removed a line number). This may cause missed sorts when user edits a line to remove its number then clicks away."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent variable naming: 'self.running' vs 'self.is_running'",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "Throughout the file, execution state is tracked with 'self.running' (lines 700, 1200, 1300, 1600, etc.).\n\nBut in cmd_cont() method (line 1470), code sets 'self.is_running = True' which is a different variable name. This appears to be a typo/bug that would cause CONT to not work properly."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'DON'T call interpreter.start()' but reasoning may be incomplete",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _execute_immediate() method around line 1580:\nComment: '# NOTE: Don\\'t call interpreter.start() because it resets PC!\\n# RUN 120 already set PC to line 120, so just clear halted flag'\n\nThis assumes RUN 120 was executed, but has_work() could be true for other reasons (like GOTO in immediate mode). The comment's reasoning is specific to one case but the code path handles all cases where has_work() is true."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "input() docstring says it uses inline input field, but input_line() docstring says it 'always uses modal dialog' - inconsistent behavior description",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "input() docstring: \"Used by INPUT statement to read user input (raw string).\nComma-separated parsing happens at interpreter level.\nShows an inline input field below output pane.\"\n\ninput_line() docstring: \"Used by LINE INPUT statement for reading entire line as string.\nUnlike input(), always uses modal dialog (not inline input field).\"\n\nThis suggests INPUT uses inline field while LINE INPUT uses modal dialog, but the distinction and reasoning is unclear. Why would LINE INPUT need a modal dialog when INPUT can use inline?"
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent widget access patterns between editor and output context menus",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _setup_editor_context_menu():\n- Accesses inner widget: self.editor_text.text.tag_ranges(tk.SEL)\n- Binds to inner widget: self.editor_text.text.bind(\"<Button-3>\", show_context_menu)\n\nIn _setup_output_context_menu():\n- Accesses widget directly: self.output_text.tag_ranges(tk.SEL)\n- Binds to widget directly: self.output_text.bind(\"<Button-3>\", show_context_menu)\n\nThis suggests editor_text is a wrapper object with a .text attribute, while output_text is a direct text widget. The inconsistency could cause confusion or bugs if the pattern isn't maintained."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Docstring states line numbers should be part of text content (not drawn separately) and requires Phase 2 refactoring, but code actually parses line numbers from text content already",
        "affected_files": [
          "src/ui/tk_widgets.py"
        ],
        "details": "Class docstring says:\n\"Note: Line numbers should be part of the text content (not drawn separately).\nThis requires Phase 2 refactoring to integrate line numbers into text.\"\n\nBut _redraw() method comment says:\n\"Note: Line numbers are no longer drawn in canvas - they should be\npart of the text content itself (Phase 2 of editor refactoring).\"\n\nHowever, the code already implements this - _parse_line_number() extracts BASIC line numbers from text content, and _redraw() uses this parsed number. The implementation already treats line numbers as part of text content, not drawn separately."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Status click handler docstring says it handles breakpoint toggling, but implementation only shows info messages without toggling",
        "affected_files": [
          "src/ui/tk_widgets.py"
        ],
        "details": "Method docstring:\n\"Handle click on status column (show error for ?, breakpoint info for ●).\"\n\nAnd the info message says:\n\"Click the ● again to toggle it off.\"\n\nBut the _on_status_click() method only displays messagebox.showinfo() or messagebox.showerror() - it does not actually toggle breakpoints. There is no code to call set_breakpoint() or modify line_metadata to toggle the breakpoint state."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "_parse_line_number regex comment says 'Whitespace or end of string' but regex allows both simultaneously",
        "affected_files": [
          "src/ui/tk_widgets.py"
        ],
        "details": "Comment in _parse_line_number():\nmatch = re.match(r'^(\\d+)(?:\\s|$)', line_text)  # Whitespace or end of string\n\nThe regex pattern '(?:\\s|$)' means 'whitespace OR end of string', which is correct. However, the comment could be misread as requiring one or the other exclusively. The regex will match '10 PRINT' (whitespace after number) and '10' (end of string after number), which is the intended behavior. The comment is technically accurate but could be clearer about the 'or' relationship."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "Function serialize_line() is documented and implemented but references serialize_statement() which calls serialize_expression() and serialize_variable(). However, serialize_variable() has inconsistent behavior regarding type suffixes.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "In serialize_variable():\n# Comment says: \"Only add type suffix if it was explicit in the original source\"\n# Comment says: \"Don't add suffixes that were inferred from DEF statements\"\nif var.type_suffix and getattr(var, 'explicit_type_suffix', False):\n    text += var.type_suffix\n\nBut the logic checks for 'explicit_type_suffix' attribute which is not documented anywhere in the module docstring or function docstrings. This attribute's existence and purpose is unclear."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "The update_line_references() function comment describes a 'Two-pass regex approach' but the implementation actually uses a single-pass approach with two separate regex patterns applied sequentially, not two passes over the data.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "Comment says:\n# Two-pass regex approach:\n# Pass 1: Match keyword + first line number (GOTO/GOSUB/THEN/ELSE/ON...GOTO/ON...GOSUB)\n# Pass 2: Match comma-separated line numbers (for ON...GOTO/GOSUB lists)\n\nBut the code does:\ncode = pattern.sub(replace_line_ref, code)  # First substitution\ncode = comma_pattern.sub(replace_comma_line, code)  # Second substitution\n\nThis is two sequential substitutions on the same string, not two passes. The terminology is misleading."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "The serialize_expression() function handles ERR and ERL as special cases (system variables without parentheses), but this behavior is not documented in the function's docstring.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "Code:\nif expr.name in ('ERR', 'ERL') and len(expr.arguments) == 0:\n    return expr.name\n\nDocstring only says:\nSerialize an expression node to source text.\n\nArgs:\n    expr: Expression AST node to serialize\n\nReturns:\n    str: Expression source text\n\nNo mention of special handling for ERR/ERL system variables."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "The delete_lines_from_program() function updates runtime.statement_table if provided, but the docstring doesn't mention this side effect or explain what statement_table is.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "Docstring:\nArgs:\n    program_manager: ProgramManager instance with .lines and .line_asts\n    args: DELETE command arguments (e.g., \"40\", \"40-100\", \"-40\", \"40-\")\n    runtime: Optional runtime object with statement_table to update\n\nThe docstring mentions 'statement_table' but doesn't explain what it is or why it needs updating. This is important for understanding the function's full behavior."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "Docstring claims Runtime accesses program.line_asts directly, but code shows Runtime is initialized with program.line_asts and program.lines as separate parameters",
        "affected_files": [
          "src/ui/visual.py"
        ],
        "details": "Comment in cmd_run() says:\n\"# (Runtime accesses program.line_asts directly, no need for program_ast variable)\"\n\nBut the actual code is:\n\"self.runtime = Runtime(self.program.line_asts, self.program.lines)\"\n\nThis suggests Runtime receives line_asts and lines as constructor parameters, not accessing them directly from program object."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Missing assignment of program_manager to self.program in __init__ method",
        "affected_files": [
          "src/ui/visual.py"
        ],
        "details": "The __init__ docstring and class docstring reference 'self.program' throughout:\n\"Args:\n    program_manager: ProgramManager instance\"\n\nAnd usage examples show:\n\"self.program.add_line(line_num, text)\"\n\"self.program.get_lines()\"\n\"self.program.clear()\"\n\nBut the __init__ method only shows:\n\"super().__init__(io_handler, program_manager)\"\n\"self.runtime = None\"\n\"self.interpreter = None\"\n\nThere's no visible 'self.program = program_manager' assignment, suggesting it might be done in the parent UIBackend class, but this is not documented."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'Don't print prompt here' but doesn't explain why or where prompt IS printed",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In SimpleWebIOHandler.input() method (line 61):\nComment: '# Don't print prompt here - _enable_inline_input will add it'\nThis references a method _enable_inline_input that is not shown in the provided code. The comment assumes knowledge of implementation details not visible in this file, making it unclear where the prompt actually gets displayed."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "VariablesDialog uses 'accessed' as default sort mode but comment says 'matches Tk UI defaults'",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In VariablesDialog.__init__ (lines 96-99):\n```\n# Sort state (matches Tk UI defaults)\nself.sort_mode = 'accessed'  # Current sort mode\nself.sort_reverse = True  # Sort direction\n```\nThe comment claims this matches Tk UI defaults, but without seeing the Tk UI code or documentation, we cannot verify if 'accessed' with reverse=True is actually the Tk default. This creates a dependency on external code that may not be consistent."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'RUN at a breakpoint restarts from the beginning' but code doesn't check for breakpoints",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In _menu_run() docstring:\n\"\"\"Run > Run Program - Execute program.\n\nRUN is always valid - it's just CLEAR + GOTO first line.\nRUN on empty program is fine (just clears variables).\nRUN at a breakpoint restarts from the beginning.\n\"\"\"\n\nBut the code doesn't have any special handling for breakpoints - it just calls runtime.reset_for_run() which preserves breakpoints but doesn't check if currently paused at one."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment in _execute_tick says 'up to 1000 statements' but code passes max_statements=1000 which may not mean 'up to'",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Comment:\n# Execute one tick (up to 1000 statements)\nstate = self.interpreter.tick(mode='run', max_statements=1000)\n\nThe comment suggests it might execute fewer than 1000, but without seeing the tick() implementation, it's unclear if max_statements is a limit or a target."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent handling of current_statement_char_start/char_end between _execute_tick and _handle_step_result",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In _execute_tick():\nchar_start = state.current_statement_char_start if state.current_statement_char_start > 0 else None\nchar_end = state.current_statement_char_end if state.current_statement_char_end > 0 else None\n\nBut in _handle_step_result() when runtime.halted:\n# Get char positions directly from statement_table (state properties return 0 when halted)\nchar_start = None\nchar_end = None\nstmt = self.runtime.statement_table.get(pc)\nif stmt:\n    char_start = getattr(stmt, 'char_start', 0) if hasattr(stmt, 'char_start') else 0\n    char_end = getattr(stmt, 'char_end', 0) if hasattr(stmt, 'char_end') else 0\n\nThe comment in _handle_step_result suggests state properties return 0 when halted, but _execute_tick uses state properties directly. This inconsistency suggests one approach may be wrong."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent breakpoint storage types - sometimes PC objects, sometimes plain integers",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In _toggle_breakpoint():\npc = PC(line_num, stmt_offset)\nif pc in self.runtime.breakpoints:\n    self.runtime.breakpoints.discard(pc)\nelse:\n    self.runtime.breakpoints.add(pc)\n\nBut in _do_toggle_breakpoint():\nif line_num in self.runtime.breakpoints:\n    self.runtime.breakpoints.remove(line_num)\nelse:\n    self.runtime.breakpoints.add(line_num)\n\nAnd in _update_breakpoint_display():\nfor item in self.runtime.breakpoints:\n    # Handle both PC objects and plain integers\n    if isinstance(item, PC):\n\nThe code tries to handle both types, but mixing PC objects and integers in the same set will cause bugs since PC(10, 0) != 10."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says 'Use the same logic as current_statement_char_end for consistency' but doesn't show what that logic is",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In _update_breakpoint_display():\nif stmt and hasattr(stmt, 'char_start') and hasattr(stmt, 'char_end'):\n    # Use the same logic as current_statement_char_end for consistency\n    char_start = stmt.char_start\n    # Check for next statement to calculate proper char_end\n    next_pc = PC(item.line_num, item.stmt_offset + 1)\n\nThe comment references 'current_statement_char_end' logic but doesn't explain what that logic is or where it's defined. This makes the code harder to understand."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment claims _sync_program_to_runtime preserves PC conditionally, but code always checks exec_timer state",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Comment says: 'Preserves current PC/execution state only if exec_timer is active; otherwise resets PC to halted.'\n\nCode at line ~1150:\nif self.exec_timer and self.exec_timer.active:\n    # Timer is running - preserve execution state\n    self.runtime.pc = old_pc\n    self.runtime.halted = old_halted\nelse:\n    # No execution in progress - ensure halted\n    self.runtime.pc = PC.halted_pc()\n    self.runtime.halted = True\n\nThis is consistent, but the docstring says 'conditionally preserving PC' which could be clearer about the specific condition (exec_timer.active)."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment says _remove_blank_lines removes all blank lines except current cursor line, but implementation keeps last line regardless of cursor position",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Docstring says: 'Remove blank lines from editor except the current line where cursor is. This prevents removing the blank line user just created with Enter.'\n\nCode at line ~1240:\nfor i, line in enumerate(lines):\n    if line.strip() or i == len(lines) - 1:\n        non_blank_lines.append(line)\n\nThe code keeps the LAST line if blank, not necessarily where the cursor is. The cursor could be anywhere. The comment assumes cursor is at the end, which may not always be true."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment in _check_auto_number says 'Only auto-numbers a line once' but implementation checks old_lines snapshot",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Docstring: 'Only auto-numbers a line once - tracks the last snapshot to avoid re-numbering lines while user is still typing on them.'\n\nCode at line ~1450:\nif stripped and (i < len(old_lines) or len(lines) > len(old_lines)):\n    old_line = old_lines[i] if i < len(old_lines) else ''\n    if not re.match(r'^\\s*\\d+', old_line):\n        # Line wasn't numbered before, number it now\n\nThe logic checks if the line existed in old snapshot and wasn't numbered. But if user deletes a line number, this would re-number it, which contradicts 'only once'. The 'once' claim is misleading."
      },
      {
        "severity": "medium",
        "type": "code_internal_inconsistency",
        "description": "Two different methods for handling input: _get_input_async and _get_input, but only _get_input is used",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "_get_input_async at line ~1530:\nasync def _get_input_async(self, prompt):\n    loop = asyncio.get_event_loop()\n    self.input_future = loop.create_future()\n    self._enable_inline_input(prompt)\n    result = await self.input_future\n    return result\n\n_get_input at line ~1545:\ndef _get_input(self, prompt):\n    self._enable_inline_input(prompt)\n    return ''\n\nBoth methods exist but serve different purposes. The async version uses futures, the sync version returns empty string. It's unclear when each should be used, and _get_input_async appears unused."
      },
      {
        "severity": "medium",
        "type": "code_vs_comment",
        "description": "Comment in _execute_immediate says 'Query interpreter directly via has_work()' but then checks if interpreter exists",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Comment at line ~1600:\n# Check if interpreter has work to do (after RUN statement)\n# Query interpreter directly via has_work() instead of checking runtime flags\nhas_work = self.interpreter.has_work() if self.interpreter else False\n\nThe comment says to query interpreter directly, but the code has a defensive check 'if self.interpreter'. This suggests interpreter might not exist, which contradicts the 'direct query' approach. If interpreter can be None, the comment should explain when/why."
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "web_help_launcher.py uses hardcoded URL 'http://localhost/mbasic_docs' but documentation doesn't specify this URL or how to set up the web server",
        "affected_files": [
          "src/ui/web_help_launcher.py",
          "docs/help/README.md"
        ],
        "details": "Code: HELP_BASE_URL = 'http://localhost/mbasic_docs'\nDocumentation describes MkDocs building and local servers but doesn't mention the /mbasic_docs path or how to configure Apache/nginx to serve at this location"
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent keyboard shortcut documentation for breakpoints between debugging.md and editor-commands.md",
        "affected_files": [
          "docs/help/common/debugging.md",
          "docs/help/common/editor-commands.md"
        ],
        "details": "debugging.md states Tk UI uses 'Ctrl+B' for breakpoints\neditor-commands.md does not list Ctrl+B at all, only lists 'b' as alternative to 'Ctrl+O' for Load program"
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "editor-commands.md says 'For debugging-specific commands like breakpoints and stepping, see Debugging Features' but doesn't list any debug shortcuts, while debugging.md lists Ctrl+R, Ctrl+T, Ctrl+G, Ctrl+Q as working in all UIs",
        "affected_files": [
          "docs/help/common/editor-commands.md",
          "docs/help/common/debugging.md"
        ],
        "details": "editor-commands.md Program Commands section lists 'F2 or Ctrl+R: Run program' but doesn't mention this is also a debug command\ndebugging.md 'Keyboard Shortcuts Summary' section lists these as debug commands for 'All UIs'"
      },
      {
        "severity": "medium",
        "type": "code_vs_documentation",
        "description": "version.py shows VERSION = '1.0.653' but documentation doesn't reference version numbers or where to find them",
        "affected_files": [
          "src/version.py",
          "docs/help/common/getting-started.md"
        ],
        "details": "version.py comment: 'Increment VERSION after each commit to track which code is running. This appears in debug output so Claude can verify the user has latest code.'\nNo documentation explains where users can see the version number or what it means"
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "ASCII codes documentation references non-existent Appendix M",
        "affected_files": [
          "docs/help/common/language/appendices/ascii-codes.md",
          "docs/help/common/language/functions/asc.md"
        ],
        "details": "In asc.md: \"Returns a numerical value that is the ASCII code of the first character of the string X$. (See Appendix M for ASCII codes.)\"\n\nHowever, the actual ASCII codes documentation is located at appendices/ascii-codes.md, not \"Appendix M\". The reference should point to the correct location."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Missing cross-reference to error codes in CVI/CVS/CVD documentation",
        "affected_files": [
          "docs/help/common/language/appendices/error-codes.md",
          "docs/help/common/language/functions/cvi-cvs-cvd.md"
        ],
        "details": "The cvi-cvs-cvd.md file references \"Section 3.25 and Appendix B\" in the example:\n\"70 FIELD #1,4 AS N$, 12 AS B$, •••\n80 GET #1\n90 Y=CVS (N$)\nSee also MKI$r MKS$, MKD$, Section 3.25 and Appendix B.\"\n\nHowever, these section references (Section 3.25, Appendix B) don't exist in the current documentation structure. Should reference error-codes.md or other relevant docs."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "EOF documentation references non-existent LINE INPUT# page",
        "affected_files": [
          "docs/help/common/language/functions/eof.md"
        ],
        "details": "In eof.md See Also section, it references:\n\"[LINE INPUT#](../statements/inputi.md) - Read entire line from file\"\n\nThe link points to 'inputi.md' but based on other documentation, the correct filename should be 'line-input.md' or 'line-input-hash.md'."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent information about string length limits",
        "affected_files": [
          "docs/help/common/language/character-set.md",
          "docs/help/common/language/appendices/ascii-codes.md"
        ],
        "details": "In character-set.md:\n\"STRING ($) - Text data, up to 255 characters per string.\"\n\nIn data-types.md (referenced from character-set.md):\n\"Strings are limited to 255 characters\"\n\nIn appendices/ascii-codes.md:\n\"Strings can contain any printable ASCII characters (32-126)\"\n\nThe ascii-codes.md doesn't mention the 255 character limit, which is important information that should be consistent across all string-related documentation."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Incomplete See Also section with malformed statement reference",
        "affected_files": [
          "docs/help/common/language/functions/cvi-cvs-cvd.md"
        ],
        "details": "In cvi-cvs-cvd.md, the See Also section includes:\n\"[CLOAD THIS COMMAND IS NOT INCLUDED IN THE DEC VT180 VERSION](../statements/cload.md)\"\n\nThis appears to be a malformed reference where version-specific information was incorrectly included in the link text. Should be cleaned up to either:\n1. Just \"[CLOAD](../statements/cload.md)\" with a note about version compatibility\n2. Remove if not relevant to CVI/CVS/CVD functions"
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent error message format in INSTR documentation",
        "affected_files": [
          "docs/help/common/language/functions/instr.md"
        ],
        "details": "The INSTR documentation shows error message as 'ILLEGAL ARGUMENT IN <line number>' but other documentation files use different error message formats. The example also has formatting issues with extra spaces: '10 X$ = \"ABCDEB\"\n 20 Y$ = \"B\"' with leading spaces that appear inconsistent."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting and error message in MID$ documentation",
        "affected_files": [
          "docs/help/common/language/functions/mid_dollar.md"
        ],
        "details": "The MID$ example has:\n'LIST\\n 10 A$=\"GOOD \"\\n 20 B$=\"MORNING EVENING AFTERNOON\"\\n 30 PRINT A$;MID$(B$,9,7)\\n Ok\\n RUN\\n GOOD EVENING\\n Ok'\nwith 'LIST' command shown, which is inconsistent with other examples. Also shows error message 'ILLEGAL ARGUMENT IN <line number>' which may be inconsistent with actual error format."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent implementation note formatting across system functions",
        "affected_files": [
          "docs/help/common/language/functions/peek.md",
          "docs/help/common/language/functions/inp.md",
          "docs/help/common/language/functions/lpos.md",
          "docs/help/common/language/functions/usr.md"
        ],
        "details": "PEEK uses 'ℹ️ **Emulated with Random Values**' while INP, LPOS, and USR use '⚠️ **Not Implemented**'. The formatting and structure of implementation notes varies between these similar system-level functions that cannot be implemented in Python."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Function count mismatch in language reference index",
        "affected_files": [
          "docs/help/common/language/index.md",
          "docs/help/common/language/functions/index.md"
        ],
        "details": "The index.md states:\n\"[Functions](functions/index.md) - 40 intrinsic functions\"\n\nHowever, this is a claim that should be verified against the actual functions/index.md file. If the functions/index.md file lists a different number of functions, this would be an inconsistency. The documentation should either:\n1. Match the actual count\n2. Remove the specific number if it's subject to change\n3. Use approximate language like \"over 40\" or \"approximately 40\""
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Statement count mismatch in language reference index",
        "affected_files": [
          "docs/help/common/language/index.md",
          "docs/help/common/language/statements/index.md"
        ],
        "details": "The index.md states:\n\"[Statements](statements/index.md) - 63 commands and statements\"\n\nSimilar to the functions count, this should be verified against the actual statements/index.md file. The specific count may not match the actual number of documented statements."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Incomplete example in DIM documentation",
        "affected_files": [
          "docs/help/common/language/statements/dim.md"
        ],
        "details": "The Example section shows:\n```basic\n10 DIM A(20)\n             20 FOR 1=0 TO 20\n             30 READ A(I)\n             40 NEXT I\n                 •\n```\n\nIssues:\n1. Inconsistent indentation (excessive spaces before line numbers)\n2. Variable name inconsistency: line 20 uses '1' (number one) instead of 'I' (letter I) in the FOR statement\n3. The bullet point (•) at the end suggests incomplete code\n4. Missing DATA statements that would be needed for the READ statement to work"
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "END statement documentation claims CONT can continue after END, but this contradicts typical BASIC behavior",
        "affected_files": [
          "docs/help/common/language/statements/end.md",
          "docs/help/common/language/statements/cont.md"
        ],
        "details": "end.md states: 'BASIC-80 always returns to command level after an END is executed' and lists CONT in See Also.\n\ncont.md reference suggests CONT works after END: 'To continue program execution after a Control-C has been typed, or a STOP or END statement has been executed'\n\nThis is contradictory - if END closes all files and returns to command level, CONT typically cannot resume execution after END in most BASIC implementations."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "ERR reset behavior documentation is incomplete or contradictory",
        "affected_files": [
          "docs/help/common/language/statements/err-erl-variables.md"
        ],
        "details": "Documentation states ERR is reset to 0 when:\n- RESUME statement is executed\n- A new RUN command is issued\n- An error handling routine ends normally\n\nHowever, it also states 'They retain their values until the next error occurs' which contradicts the reset conditions. The behavior when an error handler ends normally needs clarification."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "GET documentation mentions INPUT# and LINE INPUT# usage that seems incorrect",
        "affected_files": [
          "docs/help/common/language/statements/get.md"
        ],
        "details": "Note states: 'After a GET statement, INPUT# and LINE INPUT# may be used to read characters from the random file buffer.'\n\nThis is unusual and potentially incorrect. Typically, random file buffers are accessed via field variables defined with FIELD, not via INPUT# which is for sequential files. This needs verification."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "IF...THEN...ELSE multiple statement syntax unclear",
        "affected_files": [
          "docs/help/common/language/statements/if-then-else-if-goto.md"
        ],
        "details": "Documentation states: 'Use colon to separate multiple statements in THEN or ELSE clause'\n\nBut the formal syntax doesn't show this:\n'IF <expression> THEN <statement(s)> | <line number>'\n\nShould be: 'IF <expression> THEN <statement>[:<statement>...] | <line number>'"
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "INPUT# documentation has garbled text",
        "affected_files": [
          "docs/help/common/language/statements/input_hash.md"
        ],
        "details": "The Remarks section contains corrupted text:\n'<variable list> contains the vari?lble names'\n'With INPUT#, no question mark is printed, as with INPUT. The data items in the file should appear just as they would if data were being typed in response to an INPUT statement.    with numeric values'\n\nMultiple formatting issues including '?lble' instead of 'able' and inconsistent spacing."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "LLIST implementation note contradicts documentation structure",
        "affected_files": [
          "docs/help/common/language/statements/llist.md"
        ],
        "details": "Implementation note states: 'Not Implemented: This feature requires line printer hardware'\n\nBut then provides full documentation including 'Remarks' that state 'LLIST assumes a l32-character wide printer' (note: '132' is misspelled as 'l32').\n\nIf not implemented, the detailed remarks about printer width are misleading."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "LPRINT USING syntax incomplete",
        "affected_files": [
          "docs/help/common/language/statements/lprint-lprint-using.md"
        ],
        "details": "Syntax shows:\n'LPRINT USING <string exp>;<list of expressions>'\n\nBut doesn't show the format string patterns that can be used (like ##, $$, etc.) which are presumably the same as PRINT USING. Should reference PRINT USING documentation or include format string syntax."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Modern extensions section lists commands with inconsistent names",
        "affected_files": [
          "docs/help/common/language/statements/index.md",
          "docs/help/common/language/statements/helpsetting.md",
          "docs/help/common/language/statements/limits.md",
          "docs/help/common/language/statements/showsettings.md"
        ],
        "details": "index.md lists:\n- 'HELP SET' (links to helpsetting.md)\n- 'SET' (links to setsetting.md)\n- 'SHOW SETTINGS' (links to showsettings.md)\n\nBut the actual file names and titles are:\n- helpsetting.md with title 'HELPSETTING'\n- setsetting.md (referenced but not in provided files)\n- showsettings.md (referenced but not in provided files)\n\nCommand names should match between index and actual documentation."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "ON ERROR GOTO documentation has incomplete See Also section",
        "affected_files": [
          "docs/help/common/language/statements/on-error-goto.md"
        ],
        "details": "The See Also section references 'ERR/ERL' as 'err-erl-variables.md' but the actual documentation structure may differ. The reference should be verified against actual file naming conventions."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Print zone width inconsistency between PRINT and PRINT# documentation",
        "affected_files": [
          "docs/help/common/language/statements/print.md",
          "docs/help/common/language/statements/printi-printi-using.md"
        ],
        "details": "PRINT documentation states zones are 14 columns each:\n'When items are separated by commas, values are printed in zones of 14 columns each'\n\nPRINT# documentation states:\n'Items separated by commas are printed in print zones'\n\nBut doesn't specify if the zone width is the same 14 columns. This should be clarified for consistency."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "RENUM documentation has duplicate line numbers in example",
        "affected_files": [
          "docs/help/common/language/statements/renum.md"
        ],
        "details": "Example 6 shows:\n'1000 PRINT \"OPTION 1\"\n1100 END\n1100 PRINT \"OPTION 2\"\n1200 END\n1200 PRINT \"OPTION 3\"'\n\nLines 1100 and 1200 appear twice each, which is impossible. This appears to be a copy-paste error in the documentation."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "SETSETTING is marked as MBASIC Extension but appears in common docs",
        "affected_files": [
          "docs/help/common/language/statements/setsetting.md"
        ],
        "details": "The file is located in 'docs/help/common/language/statements/' but is marked as 'Versions: MBASIC Extension' and noted as 'This is a modern extension not present in original MBASIC 5.21'. Extension features should be in a separate directory or clearly marked throughout."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "SHOWSETTINGS documentation mentions HELPSETTING statement that doesn't exist in settings system",
        "affected_files": [
          "docs/help/common/language/statements/showsettings.md",
          "docs/help/common/settings.md"
        ],
        "details": "showsettings.md lists 'HELPSETTING' in 'See Also' section and describes it as 'Display help for a specific setting', but this statement is not documented anywhere in the settings system documentation (settings.md) and no HELPSETTING command is mentioned in the settings overview."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "SHOWSETTINGS documentation mentions SETSETTING statement but settings.md doesn't document it as a BASIC statement",
        "affected_files": [
          "docs/help/common/language/statements/showsettings.md",
          "docs/help/common/settings.md"
        ],
        "details": "showsettings.md references 'SETSETTING' in See Also section and describes it as 'Configure interpreter settings at runtime', but settings.md only shows CLI command usage like 'SETSETTING editor.auto_number_step 100' without documenting it as a formal BASIC statement with syntax and examples."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Variable name significance behavior documented differently in two places",
        "affected_files": [
          "docs/help/common/language/variables.md",
          "docs/help/common/settings.md"
        ],
        "details": "variables.md states: 'Note on Variable Name Significance: In the original MBASIC 5.21, only the first 2 characters of variable names were significant (AB, ABC, and ABCDEF would be the same variable). This Python implementation uses the full variable name for identification, allowing distinct variables like COUNT and COUNTER. The case handling is configurable via the `variables.case_conflict` setting.'\n\nHowever, settings.md documents `variables.case_conflict` as handling case conflicts (COUNT vs count) not name length conflicts. These are two different issues that shouldn't be conflated."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Keyboard shortcuts documented in multiple places with potential conflicts",
        "affected_files": [
          "docs/help/common/ui/curses/editing.md",
          "docs/help/common/shortcuts.md"
        ],
        "details": "shortcuts.md documents Ctrl+R as 'Run program' and Ctrl+P as 'Show help', while curses/editing.md mentions 'Ctrl+R - Run program' and 'Ctrl+P - Help' in the tips section. However, shortcuts.md also documents 'b' for toggling breakpoints and debugging shortcuts (c, s, e) that are not mentioned in the editing.md file."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Settings documentation references UI-specific pages that may not exist",
        "affected_files": [
          "docs/help/common/settings.md"
        ],
        "details": "settings.md includes links to:\n- [CLI Settings Commands](../ui/cli/settings.md)\n- [Curses Settings Widget](../ui/curses/settings.md)\n- [Tk Settings Dialog](../ui/tk/settings.md)\n- [Web Settings Dialog](../ui/web/settings.md)\n\nNone of these files are provided in the documentation set, only index files for each UI exist."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent naming of the project",
        "affected_files": [
          "docs/help/mbasic/extensions.md",
          "docs/help/mbasic/features.md"
        ],
        "details": "extensions.md states: \"This is **MBASIC-2025**, a modern implementation of Microsoft BASIC-80 5.21\" and lists multiple project names under consideration:\n- MBASIC-2025 (emphasizes the modern update)\n- Visual MBASIC 5.21 (emphasizes the multiple UIs)\n- MBASIC++ (emphasizes extensions)\n- MBASIC-X (extended MBASIC)\n\nHowever, features.md and other documents consistently refer to it as \"MBASIC interpreter\" or \"this MBASIC interpreter\" without the -2025 suffix. The project name should be consistent across all documentation."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Contradictory information about Web UI filesystem capabilities",
        "affected_files": [
          "docs/help/mbasic/compatibility.md",
          "docs/help/mbasic/extensions.md"
        ],
        "details": "compatibility.md states about Web UI: \"Files stored in browser memory (not browser localStorage)\" and \"Files persist only during browser session\"\n\nHowever, extensions.md states about Web UI: \"Auto-save - Automatic saving to browser storage\"\n\nThese statements contradict each other - if files are only in memory and not in localStorage, then auto-save to browser storage is not possible. Need clarification on whether Web UI uses localStorage or only memory."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent information about WIDTH statement support",
        "affected_files": [
          "docs/help/mbasic/compatibility.md",
          "docs/help/mbasic/features.md"
        ],
        "details": "compatibility.md states: \"WIDTH is parsed for compatibility but performs no operation. Terminal width is controlled by the UI or OS. The 'WIDTH LPRINT' syntax is not supported.\"\n\nfeatures.md does not mention WIDTH statement at all in its comprehensive feature list, despite it being a recognized statement.\n\nIf WIDTH is parsed and accepted (even as no-op), it should be documented in the features list with appropriate notes."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent description of debugging command availability",
        "affected_files": [
          "docs/help/mbasic/compatibility.md",
          "docs/help/mbasic/extensions.md"
        ],
        "details": "extensions.md states: \"**Availability:** CLI (command form), Curses (Ctrl+B), Tk (UI controls)\" for BREAK command.\n\ncompatibility.md does not mention these debugging commands at all in its feature comparison, despite them being significant extensions.\n\nThe compatibility guide should explicitly list debugging commands (BREAK, STEP, STACK) in its feature comparison table to clarify they are extensions not in MBASIC 5.21."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent description of line ending support",
        "affected_files": [
          "docs/help/mbasic/architecture.md",
          "docs/help/mbasic/compatibility.md"
        ],
        "details": "architecture.md states in the interpreter benefits: \"**Full compatibility**: Supports all BASIC-80 dynamic features\" without mentioning line ending differences.\n\ncompatibility.md states: \"**Line ending support:** More permissive than MBASIC 5.21\n- CP/M MBASIC 5.21: Only recognizes CRLF (`\\r\\n`)\n- This implementation: Recognizes CRLF, LF (`\\n`), and CR (`\\r`)\"\n\nThis is an enhancement, not full compatibility. The architecture document should note this difference or the compatibility document should clarify that this doesn't break compatibility (it's backward compatible but more permissive)."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent information about Variables Window availability across UIs",
        "affected_files": [
          "docs/help/ui/curses/feature-reference.md",
          "docs/help/ui/cli/variables.md"
        ],
        "details": "curses/feature-reference.md states 'Variables Window (Ctrl+W)' is available in Curses UI and describes it as a feature. However, cli/variables.md states 'The CLI does not have a Variables Window feature' and lists 'Curses UI - Full-screen terminal with Variables Window (Ctrl+W)' as an alternative. This suggests Variables Window is a Curses feature, but the feature-reference.md also mentions 'Edit Variable Value (Limited - Not fully implemented)' with a warning that 'Variable editing is currently limited in Curses UI. You cannot directly edit values in the variables window.' This creates confusion about what is actually implemented."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Contradictory information about Find/Replace implementation status",
        "affected_files": [
          "docs/help/ui/curses/feature-reference.md",
          "docs/help/ui/cli/find-replace.md"
        ],
        "details": "curses/feature-reference.md states 'Find/Replace (Not yet implemented)' and 'Find and Replace functionality is not yet available in Curses UI. See [Find/Replace Status](find-replace.md) for workarounds and alternatives.' However, cli/find-replace.md states 'The CLI backend does not have built-in Find/Replace commands' and recommends 'For built-in Find/Replace, use the Tk UI' with details 'Tk UI provides: Ctrl+F for Find dialog, Ctrl+H for Replace dialog, F3 for Find Next, Visual highlighting'. This creates confusion - is Find/Replace not implemented in Curses, or is it only available in Tk UI?"
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Different breakpoint management capabilities between UIs",
        "affected_files": [
          "docs/help/ui/cli/debugging.md",
          "docs/help/ui/curses/feature-reference.md"
        ],
        "details": "cli/debugging.md documents 'BREAK CLEAR' and 'BREAK CLEAR line_number' commands for clearing breakpoints. curses/feature-reference.md documents 'Clear All Breakpoints (Ctrl+Shift+B)' but does not mention the ability to clear individual breakpoints. The CLI docs show more granular control with 'BREAK CLEAR 100' to clear a specific breakpoint, while Curses only documents clearing all at once."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Settings management not documented for Curses UI",
        "affected_files": [
          "docs/help/ui/cli/settings.md",
          "docs/help/ui/curses/feature-reference.md"
        ],
        "details": "cli/settings.md provides detailed documentation for SHOWSETTINGS and SETSETTING commands including examples like 'SETSETTING editor.auto_number_step 100'. curses/feature-reference.md mentions 'Auto Line Numbers' as a feature that can be 'Toggle on/off as needed' but provides no information on how to toggle it or access settings in the Curses UI. It's unclear if the CLI commands work in Curses or if there's a different interface."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent version information for MBASIC implementation",
        "affected_files": [
          "docs/help/mbasic/implementation/string-allocation-and-garbage-collection.md",
          "docs/help/mbasic/index.md"
        ],
        "details": "string-allocation-and-garbage-collection.md states it covers 'CP/M era Microsoft BASIC-80 (MBASIC)' and mentions 'MBASIC 5.21' in a comparison table. The index.md states 'This is a complete Python implementation of MBASIC-80 (MBASIC) version 5.21 for CP/M' and 'Target compatibility: MBASIC 5.21 for CP/M'. However, the string allocation doc also states 'This implementation was widely used across 8-bit computing platforms including CP/M systems, Commodore 64, Apple II (Applesoft), and TRS-80' which suggests it's describing the original MBASIC, not the Python implementation. The doc should clarify whether it's describing the original MBASIC 5.21 behavior or the Python implementation's behavior."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Find/Replace feature status unclear",
        "affected_files": [
          "docs/help/ui/curses/find-replace.md",
          "docs/help/ui/curses/quick-reference.md"
        ],
        "details": "find-replace.md states: 'The Curses UI currently **does not have** Find/Replace functionality. This feature is planned for future implementation.'\n\nHowever, quick-reference.md does not mention Find/Replace at all in its keyboard shortcuts table, which is consistent with it not being implemented. But the existence of a dedicated find-replace.md document discussing 'Planned Implementation' with specific keyboard shortcuts (Ctrl+F, F3, Shift+F3) creates confusion about whether this is documentation for a future feature or current feature."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent keyboard shortcut notation for help",
        "affected_files": [
          "docs/help/ui/curses/quick-reference.md",
          "docs/help/ui/curses/help-navigation.md"
        ],
        "details": "quick-reference.md uses: '**?** | Help (with search)' in the Global Commands section.\n\nBut help-navigation.md uses template notation: 'Press **{{kbd:help}}** anytime to open help' and '**{{kbd:search}}** | Open search prompt'.\n\nThe actual key is unclear - is it '?' or does {{kbd:help}} expand to something else? Also, quick-reference.md shows '?' opens help with search, but help-navigation.md shows a separate search key {{kbd:search}}."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent back navigation key",
        "affected_files": [
          "docs/help/ui/curses/quick-reference.md",
          "docs/help/ui/curses/help-navigation.md"
        ],
        "details": "quick-reference.md does not list a 'back' key in any section.\n\nBut help-navigation.md clearly documents: '**{{kbd:back}}** | Go back to previous topic' in the Going Back section.\n\nThis is a significant navigation feature that should be in the quick reference."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Variables window keyboard shortcuts incomplete in quick reference",
        "affected_files": [
          "docs/help/ui/curses/variables.md",
          "docs/help/ui/curses/quick-reference.md"
        ],
        "details": "variables.md documents extensive keyboard shortcuts for the variables window:\n- 's' to cycle sort mode\n- 'd' to toggle sort direction\n- 'f' to filter variables\n- '/' to search for variable\n\nBut quick-reference.md only mentions: '**Ctrl+W** | Toggle variables watch window' and does not document any of the shortcuts available within the variables window itself."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Feature count mismatch",
        "affected_files": [
          "docs/help/ui/tk/features.md",
          "docs/help/ui/tk/feature-reference.md"
        ],
        "details": "feature-reference.md title states: 'This document covers all 37 features available in the Tkinter (Tk) UI.'\n\nHowever, counting the features listed:\n- File Operations: 8 features\n- Execution & Control: 6 features\n- Debugging: 6 features\n- Variable Inspection: 6 features\n- Editor Features: 7 features\n- Help System: 4 features\nTotal: 8+6+6+6+7+4 = 37 features ✓\n\nBut features.md (the 'Essential' features doc) only covers a subset and doesn't clarify it's showing essential features vs. all features, which could confuse users about what's available."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Settings documentation exists for Curses but referenced for Tk",
        "affected_files": [
          "docs/help/ui/curses/settings.md",
          "docs/help/ui/tk/settings.md"
        ],
        "details": "curses/settings.md provides detailed documentation about a Settings Widget with keyboard shortcut Ctrl+, and describes an interactive curses-based settings interface.\n\nHowever, tk/settings.md is referenced in tk/index.md ('Settings & Configuration') but this file is not provided in the documentation set. This suggests either:\n1. The Tk UI doesn't have settings documentation\n2. The link is broken\n3. Settings work differently in Tk vs Curses\n\nThe curses settings.md describes a terminal-based widget which wouldn't apply to Tk GUI."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Command line loading behavior inconsistency",
        "affected_files": [
          "docs/help/ui/curses/files.md",
          "docs/help/ui/curses/getting-started.md"
        ],
        "details": "files.md states under 'Loading from Command Line':\n'```bash\npython3 mbasic --ui curses myprogram.bas\n```\n\nThe program will:\n- Load into the editor\n- Automatically run\n- Then enter interactive mode'\n\nBut getting-started.md shows:\n'```bash\nmbasic --ui curses\n```'\n\nThe files.md example uses 'python3 mbasic' while getting-started.md uses just 'mbasic'. Also, files.md claims loading a file from command line will 'Automatically run' it, which is a significant behavior that should be mentioned in getting-started.md but isn't."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Variable editing capability differs between UIs",
        "affected_files": [
          "docs/help/ui/curses/variables.md",
          "docs/help/ui/tk/feature-reference.md"
        ],
        "details": "curses/variables.md states:\n'### Current Status\n⚠️ **Partial Implementation**: Variable editing in Curses UI is limited.\n\n### What Doesn't Work Yet\n- Cannot edit values directly in window'\n\nBut tk/feature-reference.md states:\n'### Edit Variable Value\nDouble-click a variable in the Variables window to edit its value during debugging.'\n\nThis is correct - different UIs have different capabilities. However, the comparison table in curses/variables.md shows:\n'| Edit values | ⚠️ | ❌ | ✅ | ✅ |'\n\nThe ⚠️ for Curses suggests partial implementation, but the documentation clearly states it doesn't work at all ('Cannot edit values directly'). Should be ❌ not ⚠️."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Debugging documentation describes extensive features marked as 'planned' or 'future', but features.md lists them as current capabilities without such qualifications",
        "affected_files": [
          "docs/help/ui/web/debugging.md",
          "docs/help/ui/web/features.md"
        ],
        "details": "debugging.md clearly marks many features as not implemented:\n'Note: Advanced features like clicking line numbers to set breakpoints, conditional breakpoints, and a dedicated breakpoint panel are planned for future releases but not yet implemented.'\n\nAnd lists entire sections as 'Planned Features':\n- Conditional Breakpoints (Future)\n- Logpoints (Future)\n- Data Breakpoints (Future)\n- Debug Console (Future)\n- Performance Profiling (Future)\n\nBut features.md under 'Debugging Tools' lists:\n'Breakpoints:\n- Line breakpoints\n- Conditional breakpoints\n- Hit count breakpoints\n- Logpoints'\n\nWithout any indication these are future features."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Features documentation describes collaboration and version control features that getting-started explicitly states are not implemented",
        "affected_files": [
          "docs/help/ui/web/features.md",
          "docs/help/ui/web/getting-started.md"
        ],
        "details": "features.md under 'Advanced Features > Session Management' mentions:\n'Session Management' section exists\n\nBut getting-started.md explicitly states:\n'Note: Collaboration features (sharing, collaborative editing, version control) are not currently implemented. Programs are stored locally in browser storage only.'\n\nThis contradiction needs resolution - either features.md should mark these as future, or getting-started.md is outdated."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent description of file save behavior between documents",
        "affected_files": [
          "docs/help/ui/web/getting-started.md",
          "docs/help/ui/web/features.md"
        ],
        "details": "getting-started.md states:\n'Note: The Web UI uses browser localStorage for auto-save functionality and downloads for explicit saves to your computer.'\n\nBut features.md under 'File Management > Save Options' only lists:\n'Save to browser\nDownload as file'\n\nWithout clarifying that 'Save to browser' is auto-save via localStorage and explicit saves trigger downloads. This could confuse users about when files are downloaded vs stored in browser."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Debugging guide describes Variable Inspector with extensive features, but getting-started only mentions 'Show Variables' as a simple popup",
        "affected_files": [
          "docs/help/ui/web/debugging.md",
          "docs/help/ui/web/getting-started.md"
        ],
        "details": "debugging.md describes elaborate Variable Inspector:\n'Variables Panel\nLocated in right sidebar during debugging:\n```\nVariables\n├─ Scalars\n│  ├─ A = 42 (Integer)\n│  ├─ B$ = \"Hello\" (String)\n...\n```\nInteractive Editing:\n1. Double-click any variable value\n2. Edit dialog appears'\n\nBut getting-started.md only mentions:\n'Show Variables\nWhile program is paused or after it runs:\n- Click Run → Show Variables\n- A popup shows all defined variables and their values'\n\nNo mention of a persistent panel, tree view, or interactive editing. These seem like different features."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Web interface documentation describes 'Load Example' menu option, but library documentation only mentions 'Download' and 'Open' for loading files",
        "affected_files": [
          "docs/help/ui/web/web-interface.md",
          "docs/library/*/index.md"
        ],
        "details": "web-interface.md states:\n'Load Example - Choose from sample BASIC programs'\n\nBut all library index.md files say:\n'Web/Tkinter UI: Click File → Open, select the downloaded file'\n\nNo mention of 'Load Example' feature in library docs. Users may be confused about how to access example programs."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Web UI documentation mentions CLI commands that don't apply to web interface",
        "affected_files": [
          "docs/help/ui/web/web-interface.md",
          "docs/library/*/index.md"
        ],
        "details": "web-interface.md File I/O section and library docs both show:\n'CLI: Type `LOAD \"filename.bas\"`'\n\nBut web-interface.md earlier states:\n'Cannot directly access local filesystem (but can load files via browser file picker)'\n\nThe LOAD command syntax shown would not work in web UI's sandboxed environment. This could confuse web users."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Contradictory information about debugger support",
        "affected_files": [
          "docs/help/ui/web/web-interface.md"
        ],
        "details": "web-interface.md Limitations section states:\n'Limited debugger support (basic breakpoints only via Run menu)'\n\nBut the Run Menu section only lists:\n'Run Program - Parse and execute the current program\nStop - Stop a running program'\n\nNo mention of breakpoints or debugger features in the Run menu description. Either the limitation is wrong or the menu description is incomplete."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Web UI documentation doesn't mention case handling settings available in MBASIC",
        "affected_files": [
          "docs/help/ui/web/web-interface.md",
          "docs/user/CASE_HANDLING_GUIDE.md"
        ],
        "details": "CASE_HANDLING_GUIDE.md extensively documents:\n'SET \"variables.case_conflict\" \"error\"'\n'SET \"keywords.case_style\" \"force_capitalize\"'\n'SHOW SETTINGS'\n\nBut web-interface.md makes no mention of these settings or the SET/SHOW commands. Web users may not know these features exist."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "File persistence information contradicts session-based claim",
        "affected_files": [
          "docs/help/ui/web/web-interface.md"
        ],
        "details": "Security & Privacy section states:\n'Session-based - Data cleared when session ends'\n\nBut File I/O section states:\n'Files persist during your session'\n\nAnd Limitations section states:\n'Files don't persist after session ends (stored in browser memory only)'\n\nWhile technically consistent, the phrasing could confuse users about whether files persist at all or only during session."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Contradictory information about project dependencies",
        "affected_files": [
          "docs/user/CHOOSING_YOUR_UI.md",
          "docs/user/INSTALL.md"
        ],
        "details": "CHOOSING_YOUR_UI.md states 'Requires urwid' for Curses UI and 'Requires nicegui' for Web UI, implying these are mandatory dependencies. However, INSTALL.md states 'Since this project has no external dependencies' and lists these as 'Optional' in INSTALLATION.md. The requirements.txt installation step in INSTALL.md would fail if there are truly no dependencies."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Feature availability mismatch for Curses UI",
        "affected_files": [
          "docs/user/CHOOSING_YOUR_UI.md",
          "docs/user/QUICK_REFERENCE.md"
        ],
        "details": "CHOOSING_YOUR_UI.md states Curses UI has 'No Find/Replace yet' and 'Partial variable editing' as limitations. However, QUICK_REFERENCE.md makes no mention of these limitations and presents the Curses UI as fully functional for editing and debugging. The decision matrix shows 'Find/Replace' with ❌ for Curses, but doesn't explain what 'partial variable editing' means."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Incomplete CP/M conversion utility reference",
        "affected_files": [
          "docs/user/FILE_FORMAT_COMPATIBILITY.md"
        ],
        "details": "FILE_FORMAT_COMPATIBILITY.md mentions 'MBASIC includes a utility script for CP/M conversion' and shows command 'python3 utils/convert_to_cpm.py yourfile.bas', but this utility is not included in the provided files and its existence cannot be verified."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Incomplete settings documentation cross-references",
        "affected_files": [
          "docs/user/SETTINGS_AND_CONFIGURATION.md"
        ],
        "details": "SETTINGS_AND_CONFIGURATION.md references 'docs/dev/KEYWORD_CASE_HANDLING_TODO.md' for future features, but this file is not provided. Also references 'docs/user/TK_UI_QUICK_START.md' which is not in the provided files. These broken references make it impossible to get complete information."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Contradictory information about Web UI file access",
        "affected_files": [
          "docs/user/CHOOSING_YOUR_UI.md"
        ],
        "details": "CHOOSING_YOUR_UI.md lists 'No local file access' as a limitation of Web UI, but also states 'Browser storage only' and 'Session-based'. However, it's unclear if this means no file I/O at all or just no access to the local filesystem. The distinction between 'browser storage' and 'local files' needs clarification."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Unclear debugging feature parity",
        "affected_files": [
          "docs/user/CHOOSING_YOUR_UI.md"
        ],
        "details": "The Decision Matrix shows all UIs (CLI, Curses, Tk, Web) have 'Debugging' marked as ✅, but the detailed sections describe different debugging capabilities. CLI has 'BREAK, STEP, WATCH' commands, Curses has breakpoint debugging with 'c/s/e' keys, Tk has 'visual breakpoints', and Web has 'conditional breakpoints'. These are different features but all marked identically in the matrix."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Unclear settings persistence behavior",
        "affected_files": [
          "docs/user/SETTINGS_AND_CONFIGURATION.md"
        ],
        "details": "SETTINGS_AND_CONFIGURATION.md states 'Settings via SET command only affect current session' but doesn't explain what 'current session' means. Does it mean until the program ends, until SYSTEM is called, or until the UI is closed? Also unclear if settings persist when using RUN vs LOAD/RUN."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Keyboard shortcut documentation mismatch between Tk UI and Curses UI guides",
        "affected_files": [
          "docs/user/TK_UI_QUICK_START.md",
          "docs/user/keyboard-shortcuts.md"
        ],
        "details": "TK_UI_QUICK_START.md documents Ctrl+H as 'Find and replace' for Tk UI:\n| **Ctrl+H** | Find and replace |\n\nBut keyboard-shortcuts.md (Curses UI) documents ^F (Ctrl+F) as help:\n| `^F` | This help |\n\nAnd Ctrl+H as help in Curses:\n| `Ctrl+H/F1` | Help |\n\nThis creates confusion about whether Ctrl+H is Find/Replace (Tk) or Help (Curses). The TK_UI_QUICK_START.md should clarify this is Tk-specific."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Find/Replace feature availability inconsistency",
        "affected_files": [
          "docs/user/TK_UI_QUICK_START.md",
          "docs/user/UI_FEATURE_COMPARISON.md"
        ],
        "details": "TK_UI_QUICK_START.md states Find and Replace is available in Tk UI:\n| **Ctrl+H** | Find and replace |\n\nAnd later:\n### 5. Advanced Editing - Find and Replace\nLarge program with repeated code?\n```\n1. Press Ctrl+H (Find and Replace)\n\nBut UI_FEATURE_COMPARISON.md shows:\n| **Find/Replace** | ❌ | ❌ | ✅ | ❌ | Tk only (new feature) |\n\nHowever, the 'Recently Added' section states:\n### Recently Added (2025-10-29)\n- ✅ Tk: Find/Replace functionality\n\nThis is consistent, but TK_UI_QUICK_START.md also mentions 'October 2025' updates without specifying the exact date (2025-10-29), creating a minor version/date inconsistency."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Save shortcut inconsistency between UIs",
        "affected_files": [
          "docs/user/TK_UI_QUICK_START.md",
          "docs/user/keyboard-shortcuts.md"
        ],
        "details": "TK_UI_QUICK_START.md documents:\n| **Ctrl+S** | Save file |\n\nkeyboard-shortcuts.md (Curses) documents:\n| `Ctrl+V` | Save program |\n| `Shift+Ctrl+V` | Save As |\n\nThis shows Curses uses Ctrl+V for Save (not Ctrl+S), which conflicts with Tk using Ctrl+V for Variables window. This is likely correct (different UIs, different shortcuts), but could be clarified in TK_UI_QUICK_START.md that these shortcuts are Tk-specific."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Inconsistent menu access documentation",
        "affected_files": [
          "docs/user/keyboard-shortcuts.md"
        ],
        "details": "keyboard-shortcuts.md shows:\n| `Ctrl+U` | Activate menu bar (arrows navigate, Enter selects) |\n\nBut also shows:\n| `Menu only` | Toggle execution stack window |\n| `Menu only` | Show/hide execution stack window |\n\nThe 'Menu only' entries suggest some features are only accessible via menu, but it's unclear how to access the menu if Ctrl+U activates the menu bar. The documentation should clarify whether 'Menu only' means 'use Ctrl+U then navigate' or if there's another way to access these features."
      },
      {
        "severity": "medium",
        "type": "documentation_inconsistency",
        "description": "Step execution shortcut inconsistency",
        "affected_files": [
          "docs/user/TK_UI_QUICK_START.md",
          "docs/user/keyboard-shortcuts.md"
        ],
        "details": "TK_UI_QUICK_START.md documents:\n| **Ctrl+T** | Step through code (next statement) |\n| **Ctrl+L** | Step through code (next line) |\n\nkeyboard-shortcuts.md (Curses) documents:\n| `Ctrl+K` | Step Line - execute all statements on current line |\n| `Ctrl+T` | Step Statement - execute one statement at a time |\n\nThis shows:\n- Tk: Ctrl+T = statement, Ctrl+L = line\n- Curses: Ctrl+T = statement, Ctrl+K = line\n\nThe functionality is the same but shortcuts differ (Ctrl+L vs Ctrl+K for line stepping). This should be clarified as UI-specific behavior."
      }
    ],
    "low": [
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Version number mismatch between description and version field",
        "affected_files": [
          "setup.py"
        ],
        "details": "setup.py line 13: version=\"0.99.0\",  # Reflects ~99% implementation status (core complete)\nsetup.py line 15: description=\"An interpreter for MBASIC 5.21 (BASIC-80 for CP/M) - Independent open-source implementation\"\n\nThe version is 0.99.0 but the description says it's for MBASIC 5.21, which could be confusing. The comment clarifies 0.99.0 refers to implementation completeness, not MBASIC version."
      },
      {
        "severity": "low",
        "type": "code_vs_comment_conflict",
        "description": "LineNode docstring says 'Never store source_text' but this is just a design note, not describing actual fields",
        "affected_files": [
          "src/ast_nodes.py"
        ],
        "details": "@dataclass\nclass LineNode:\n    \"\"\"A single line in a BASIC program (line_number + statements)\n\n    The AST is the single source of truth. Text is always regenerated from\n    the AST using token positions. Never store source_text - it creates\n    a duplicate copy that gets out of sync.\n    \"\"\"\n    line_number: int\n    statements: List['StatementNode']\n    line_num: int = 0\n    column: int = 0\n\nThe docstring warns against storing source_text, but there's no source_text field defined. This is a design guideline rather than a description of the class, which could be confusing."
      },
      {
        "severity": "low",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent use of Optional[] vs = None for optional fields",
        "affected_files": [
          "src/ast_nodes.py"
        ],
        "details": "Some dataclasses use Optional[] type hints:\n  file_number: Optional['ExpressionNode'] = None\n\nOthers use just = None without Optional[]:\n  filter: Optional[Any] = None  # in ShowSettingsStatementNode\n  count: int = None  # in StepStatementNode (should be Optional[int])\n\nStepStatementNode.count is particularly problematic: 'int = None' is type-unsafe."
      },
      {
        "severity": "low",
        "type": "code_vs_comment_conflict",
        "description": "CallStatementNode docstring describes standard MBASIC 5.21 syntax but implementation includes non-standard arguments field",
        "affected_files": [
          "src/ast_nodes.py"
        ],
        "details": "@dataclass\nclass CallStatementNode:\n    \"\"\"CALL statement - call machine language routine (MBASIC 5.21)\n\n    Standard MBASIC 5.21 Syntax:\n        CALL address           - Call machine code at numeric address\n\n    Examples:\n        CALL 16384             - Call decimal address\n        CALL &HC000            - Call hex address\n        CALL A                 - Call address in variable\n        CALL DIO+1             - Call computed address\n\n    Note: Parser also accepts extended syntax for compatibility with\n    other BASIC dialects (e.g., CALL ROUTINE(args)), but this is not\n    standard MBASIC 5.21.\n    \"\"\"\n    target: 'ExpressionNode'  # Memory address expression\n    arguments: List['ExpressionNode']  # Arguments (non-standard, for compatibility)\n\nThe docstring emphasizes standard MBASIC 5.21 syntax (address only) but the implementation includes an 'arguments' field for non-standard syntax. The note explains this, but it's still a deviation from the stated MBASIC 5.21 focus."
      },
      {
        "severity": "low",
        "type": "code_internal_inconsistency",
        "description": "Duplicate SetSettingStatementNode and ShowSettingsStatementNode definitions",
        "affected_files": [
          "src/ast_nodes.py"
        ],
        "details": "SetSettingStatementNode is defined twice:\n1. Line ~400: In main statements section with 'key' and 'value' fields\n2. Line ~1100: In Settings Commands section with 'setting_name' and 'value' fields\n\nShowSettingsStatementNode is also defined twice:\n1. Line ~420: In main statements section with 'filter' field\n2. Line ~1120: In Settings Commands section with 'pattern' field\n\nThese duplicate definitions with different field names will cause conflicts."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "UsingFormatter.format_numeric_field has comment about negative zero handling that may not match actual BASIC behavior",
        "affected_files": [
          "src/basic_builtins.py"
        ],
        "details": "Comment in format_numeric_field says:\n\"Determine sign - preserve negative sign for values that round to zero. This matches BASIC behavior where -0.001 formatted with no decimal places displays as \"-0\" (not \"0\"). Positive values that round to zero display as \"0\".\"\n\nCode implements:\nif rounded == 0 and original_negative:\n    is_negative = True\nelse:\n    is_negative = rounded < 0\n\nThis behavior needs verification against actual MBASIC 5.21. Most BASIC implementations do NOT preserve negative sign for values that round to zero."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Module docstring claims 'MBASIC 5.21' but implementation may include non-standard features",
        "affected_files": [
          "src/basic_builtins.py"
        ],
        "details": "Module docstring: \"Built-in functions for MBASIC 5.21. All BASIC built-in functions (SIN, CHR$, INT, etc.)\"\n\nHowever, the UsingFormatter class implements PRINT USING which has complex formatting rules. The specific behavior for negative zero and other edge cases should be verified against actual MBASIC 5.21 documentation to ensure compatibility claims are accurate."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "EOF function comment mentions ^Z handling but implementation may not fully match CP/M behavior",
        "affected_files": [
          "src/basic_builtins.py"
        ],
        "details": "Comment says: \"Note: For input files, respects ^Z (ASCII 26) as EOF marker (CP/M style)\"\n\nCode checks: elif next_byte[0] == 26:  # ^Z\n\nHowever, the code reads next_byte as a string (file_handle.read(1)) and then checks next_byte[0] == 26. In Python 3, reading from a text file returns a string, not bytes, so next_byte[0] would be a character, not an integer. This comparison would fail. The code should either open files in binary mode or compare against chr(26)."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "parse_numeric_field comment about leading sign not adding to digit_count contradicts later code",
        "affected_files": [
          "src/basic_builtins.py"
        ],
        "details": "Comment in parse_numeric_field says:\n\"# Note: leading sign doesn't add to digit_count, it's a format modifier\"\n\nBut later in format_numeric_field:\nif spec['leading_sign'] or spec['trailing_sign'] or spec['trailing_minus_only']:\n    field_width += 1  # Sign takes up one position\n\nThe sign does affect field_width calculation, so the comment is misleading. The distinction between digit_count and field_width should be clarified."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "CaseKeeperTable docstring example shows 'Print' but policy behavior unclear",
        "affected_files": [
          "src/case_keeper.py"
        ],
        "details": "Docstring example:\ntable = CaseKeeperTable()\ntable.set(\"PRINT\", \"Print\")  # Key: \"print\", Display: \"Print\"\n\nBut the default policy is \"first_wins\", and the example doesn't specify a policy. The example should clarify what policy is being used or show the default behavior explicitly."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Module docstring mentions 'Claude Code' which is a specific tool, making documentation less general",
        "affected_files": [
          "src/debug_logger.py"
        ],
        "details": "Docstring says: \"When enabled, errors and debug info are output to both the UI and stderr for easy visibility when debugging with Claude Code or other tools.\"\n\nAnd: \"Outputs error details to stderr (visible to Claude/developer)\"\n\nThis is overly specific to one tool. The documentation should be more general about debugging tools or IDEs."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "ProgramManager.merge_from_file() return type documentation incomplete",
        "affected_files": [
          "src/editing/manager.py"
        ],
        "details": "Method signature shows:\n```python\ndef merge_from_file(self, filename: str) -> Tuple[bool, List[Tuple[int, str]], int, int]:\n```\n\nDocstring says:\n\"Returns:\n    Tuple of (success, errors, lines_added, lines_replaced)\n    success: True if at least one line loaded successfully\n    errors: List of (line_number, error_message) for failed lines\n    lines_added: Count of new lines added\n    lines_replaced: Count of existing lines replaced\"\n\nBut doesn't document that errors is specifically List[Tuple[int, str]] where the tuple is (line_number, error_message). The type hint is more precise than the docstring."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "FileHandle.flush() method missing from abstract base class but implemented in RealFileHandle",
        "affected_files": [
          "src/filesystem/base.py",
          "src/filesystem/real_fs.py"
        ],
        "details": "FileHandle abstract base class defines:\n- read()\n- readline()\n- write()\n- close()\n- seek()\n- tell()\n- is_eof()\n\nBut RealFileHandle implements additional method:\n```python\ndef flush(self):\n    \"\"\"Flush write buffers.\"\"\"\n    if not self.closed:\n        self.file_obj.flush()\n```\n\nThis method is not in the abstract base class, creating an inconsistency in the interface contract. InMemoryFileHandle also implements flush(), suggesting it should be part of the base class."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "Duplicate error code definitions for different errors",
        "affected_files": [
          "src/error_codes.py"
        ],
        "details": "ERROR_CODES dictionary has duplicate two-letter codes:\n- Code 25: ('DF', 'Device fault')\n- Code 61: ('DF', 'Disk full')\n\nAlso:\n- Code 10: ('DD', 'Duplicate definition')\n- Code 68: ('DD', 'Device unavailable')\n\nAnd:\n- Code 17: ('CN', 'Can't continue')\n- Code 69: ('CN', 'Communication buffer overflow')\n\nThis means format_error() would produce ambiguous error messages like '?DF Error' that could mean either 'Device fault' or 'Disk full'. The two-letter codes should be unique."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment claims CP/M style uppercase filenames but doesn't explain why",
        "affected_files": [
          "src/filesystem/sandboxed_fs.py"
        ],
        "details": "In _normalize_filename():\n```python\nreturn filename.upper()  # CP/M style: uppercase filenames\n```\n\nThe comment references CP/M (an old operating system) but doesn't explain why this design choice was made for a web-based sandboxed filesystem. This seems like an arbitrary limitation that could confuse users expecting case-sensitive filenames. The comment should explain the rationale or this should be configurable."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Help text claims multi-statement lines work but are not recommended, but no code prevents or warns about them",
        "affected_files": [
          "src/immediate_executor.py"
        ],
        "details": "The _show_help() method states:\n\"• Multi-statement lines (: separator) work but are not recommended\"\n\nThe code parses and executes all statements on line 0 in a loop:\n\"for stmt in line_node.statements:\n    interpreter.execute_statement(stmt)\"\n\nThis suggests multi-statement lines do work, but there's no warning or recommendation against them in the actual execution path, only in the help text."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Note: We do not save/restore the PC' but then explains this allows RUN to work, which contradicts the help text saying control flow is not supported",
        "affected_files": [
          "src/immediate_executor.py"
        ],
        "details": "In execute() method:\n\"# Note: We do not save/restore the PC before/after execution.\n# This allows statements like RUN to change execution position.\n# Normal statements (PRINT, LET, etc.) don't modify PC anyway.\"\n\nBut the help text says:\n\"• GOTO, GOSUB, and control flow statements are not supported\"\n\nIf RUN is allowed to change execution position, this suggests some control flow IS supported, creating an inconsistency."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Help text says INPUT is not allowed but _format_error suggests INPUT might be attempted",
        "affected_files": [
          "src/immediate_executor.py"
        ],
        "details": "OutputCapturingIOHandler.input() raises:\n\"raise RuntimeError('INPUT not allowed in immediate mode')\"\n\nAnd _format_error() has special handling for this:\n\"elif 'Illegal function call' in error_str:\n    return 'Illegal function call\\n'\"\n\nBut the help text doesn't mention INPUT as a limitation. It only appears in the LIMITATIONS section indirectly. This could be clearer."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Function signature uses modern Python type hints but docstring examples show Python 2 style",
        "affected_files": [
          "src/input_sanitizer.py"
        ],
        "details": "Function signature:\n\"def sanitize_and_clear_parity(text: str) -> tuple[str, bool]:\"\n\nThis uses Python 3.9+ tuple[str, bool] syntax, but the docstring examples and the rest of the module suggest compatibility with earlier Python versions. The doctest examples don't show the tuple type hint syntax in their expected outputs."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Docstring example shows numbered line behavior but implementation has complex UI-specific logic that may not work in all contexts",
        "affected_files": [
          "src/immediate_executor.py"
        ],
        "details": "The execute() method has extensive logic for handling numbered lines:\n\"if line_match:\n    line_num = int(line_match.group(1))\n    ...\n    if hasattr(self.interpreter, 'interactive_mode') and self.interpreter.interactive_mode:\"\n\nThis requires specific UI infrastructure (interactive_mode, program manager, _refresh_editor, etc.) but the docstring doesn't mention these requirements or that numbered line editing only works in specific UI contexts."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about ERL renumbering is broader than MBASIC manual specification",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "In _renum_erl_comparison() docstring:\n\"MBASIC manual specifies: if ERL appears on left side of comparison operator\n(=, <>, <, >, <=, >=), the right-hand number is a line number reference.\n\nCurrent implementation: Renumbers for ANY binary operator with ERL on left,\nincluding arithmetic (ERL + 100, ERL * 2). This is broader than the manual\nspecifies but avoids missing valid comparison patterns.\"\n\nThe code implements:\nif type(expr).__name__ == 'BinaryOpNode':\n    left = expr.left\n    if type(left).__name__ == 'VariableNode' and left.name == 'ERL':\n        # Right side should be renumbered if it's a literal number\n\nThis is intentionally broader than spec, but the comment acknowledges this discrepancy."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about CHAIN variable preservation has complex logic that may not match description",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "In cmd_chain() method:\nComment says: \"Save variables based on CHAIN options:\n- MERGE: always preserves all variables (it's an overlay)\n- ALL: passes all variables to new program\n- Neither: only pass COMMON variables\"\n\nCode implements:\nif all_flag or merge:\n    saved_variables = self.program_runtime.get_all_variables()\nelif self.program_runtime.common_vars:\n    # Complex logic to find variables with type suffixes\n\nThe comment is accurate but doesn't mention the complexity of handling COMMON variables with type suffixes (%, $, !, #), which is a significant implementation detail."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about execute_immediate runtime selection doesn't match actual condition",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "Docstring says:\n\"Runtime selection:\n- If program_runtime exists (from RUN), use it so immediate mode can\n  examine/modify program variables (works for stopped OR finished programs)\n- Otherwise use persistent immediate mode runtime for variable isolation\"\n\nCode implements:\nif self.program_runtime is not None:\n    runtime = self.program_runtime\n    interpreter = self.program_interpreter\nelse:\n    if self.runtime is None:\n        # Initialize immediate mode runtime\n\nThe comment says it works for 'stopped OR finished programs' but the code just checks if program_runtime exists (is not None). There's no distinction between stopped and finished states in the condition. The comment may be describing intended behavior rather than actual implementation."
      },
      {
        "severity": "low",
        "type": "code_vs_comment_conflict",
        "description": "Comment references help text for GOTO/GOSUB restriction but help text is not visible in provided code",
        "affected_files": [
          "src/interactive.py"
        ],
        "details": "Comment says: \"Immediate mode does NOT support GOTO/GOSUB (see help text)\"\n\nThe help text is referenced but not included in the provided code snippet, making it impossible to verify if the help text actually documents this restriction or if the restriction is actually enforced."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "InterpreterState docstring says 'check these to determine current status' but lists input_prompt as non-None for waiting, while error_info is also non-None for errors - unclear priority",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Docstring at lines 36-40: 'Primary execution states (check these to determine current status):\n    - runtime.halted: True if stopped (paused/done/at breakpoint)\n    - input_prompt: Non-None if waiting for input\n    - error_info: Non-None if an error occurred'\n\nThis suggests checking all three, but doesn't clarify precedence. If both input_prompt and error_info are non-None, which takes priority? The tick() method shows error_info takes priority (line 367: 'if self.state.input_prompt is not None: return self.state' comes after error handling), but this isn't documented."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Docstring for current_statement_char_end has detailed explanation of max() logic, but the actual implementation is more complex with line_text_map fallback not mentioned in docstring",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Docstring at lines 84-90: 'Get current statement char_end from statement table (computed property)\n\n        Uses max(char_end, next_char_start - 1) to handle string tokens correctly.\n        This works because:\n        - If there's a next statement, the colon is at next_char_start - 1\n        - If char_end is correct (most tokens), it will be >= next_char_start - 1\n        - If char_end is too short (string tokens), next_char_start - 1 is larger'\n\nBut code at lines 103-109 has additional logic:\n'else:\n    # No next statement - use line length if we have line text, otherwise char_end\n    if pc.line_num in self._interpreter.runtime.line_text_map:\n        line_text = self._interpreter.runtime.line_text_map[pc.line_num]\n        # Return length of line (end of line)\n        return len(line_text)\n    else:\n        return stmt_char_end'\n\nThe docstring doesn't mention the line_text_map fallback for last statement on a line."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "InterpreterState docstring says 'breakpoints are stored in Runtime, not here' but doesn't explain why skip_next_breakpoint_check is in InterpreterState instead of Runtime",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "Comment at line 50: '# Debugging (breakpoints are stored in Runtime, not here)'\n\nThis suggests a design principle (breakpoint state in Runtime), but then skip_next_breakpoint_check is in InterpreterState. The comment should explain why this particular breakpoint-related flag is in InterpreterState (likely because it's execution state, not program state)."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment describes CLEAR preserving COMMON variables but doesn't mention other preserved state",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In execute_clear() at line ~1270, comment states:\n# Note: We preserve runtime.common_vars for CHAIN compatibility\n# Note: We ignore string_space and stack_space parameters (Python manages memory automatically)\n\nHowever, the code also preserves:\n- runtime.files (file handles)\n- runtime.field_buffers (random access file buffers)\n- User functions (runtime.user_functions)\n- Data pointers and other runtime state\n\nThe comment should document all preserved state, not just common_vars."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "File reading comment mentions three EOF detection methods but implementation may have edge cases",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In _read_line_from_file() at line ~1490, comment describes three EOF detection methods:\n1. EOF flag already set (file_info['eof'] == True) → returns None immediately\n2. read() returns empty bytes (physical EOF) → sets EOF flag, returns partial line or None\n3. Byte value 26 (^Z) encountered → sets EOF flag, returns partial line or None\n\nHowever, the code has a potential edge case: if ^Z appears at the start of a line (line_bytes is empty), it returns None. But if ^Z appears mid-line, it returns the partial line. The comment says 'returns partial line or None' but doesn't clarify when each occurs. This could be confusing for users expecting consistent behavior."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "LSET/RSET comments say 'If not a field variable, just do normal assignment' but this may not match MBASIC behavior",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In execute_lset() and execute_rset() at lines ~2050 and ~2090, both have:\nif not found:\n    # If not a field variable, just do normal assignment\n    self.runtime.set_variable_raw(var_name, value)\n\nIn MBASIC, LSET/RSET are specifically for field variables in random access files. Using them on non-field variables may be an error or undefined behavior. The comment suggests this is intentional fallback behavior, but it's unclear if this matches MBASIC semantics or is a compatibility extension."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says get_variable_for_debugger is used because 'we're saving state, not actually reading for use', but this is misleading",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In evaluate_functioncall, the comment states:\n\"# Note: We use get_variable_for_debugger here because we're saving state, not actually reading for use\"\n\nHowever, the code IS reading the variable value for actual use (to save and restore it around function calls). The distinction being made seems to be about tracking variable access, not about the purpose of reading. The comment should clarify this is to avoid triggering access tracking, not because the value isn't being used."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about debugger_set=True usage is inconsistent with the actual purpose",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "In evaluate_functioncall, when restoring variables:\n\"# Use debugger_set=True since this is implementation detail, not actual program assignment\"\n\nBut earlier when saving, the comment says:\n\"# Note: We use get_variable_for_debugger here because we're saving state, not actually reading for use\"\n\nThese comments suggest debugger_set and get_variable_for_debugger are about distinguishing implementation details from program behavior, but the terminology is confusing. One uses 'debugger' to mean 'don't track access', the other uses it to mean 'implementation detail'. The naming convention is inconsistent."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "execute_step docstring says it's 'not yet functional' but also says it's a 'placeholder', creating ambiguity about implementation status",
        "affected_files": [
          "src/interpreter.py"
        ],
        "details": "The docstring states:\n\"STEP is intended to execute one or more statements, then pause.\nCurrent implementation: Placeholder that prints a message (not yet functional).\"\n\nThen the code comment says:\n\"# For now, just acknowledge the command\n# Full implementation would involve:\"\n\nThis creates confusion about whether STEP is partially implemented, completely unimplemented, or intentionally stubbed. The status should be clearer."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Deprecated alias methods suggest backward compatibility but no evidence of prior API",
        "affected_files": [
          "src/iohandler/web_io.py"
        ],
        "details": "web_io.py contains:\n    # Alias for backward compatibility\n    def print(self, text=\"\", end=\"\\n\"):\n        \"\"\"Deprecated: Use output() instead.\"\"\"\n        self.output(text, end)\n\n    # Alias for backward compatibility\n    def get_char(self):\n        \"\"\"Deprecated: Use input_char() instead.\"\"\"\n        return self.input_char(blocking=False)\n\nThese suggest a prior API existed, but there's no evidence of when these methods were the primary API or when they were deprecated."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "input_line() docstring says it delegates to self.input() but comment says 'same behavior'",
        "affected_files": [
          "src/iohandler/console.py"
        ],
        "details": "In console.py:\n    def input_line(self, prompt: str = '') -> str:\n        \"\"\"Input a complete line from console.\n\n        For console, this delegates to self.input() (same behavior).\n        \"\"\"\n        return self.input(prompt)\n\nThe base class IOHandler.input_line() docstring says: 'Similar to input() but preserves leading/trailing spaces and doesn't interpret commas as field separators.'\n\nThe console implementation doesn't actually implement this distinction - it just calls input(). This may be correct for console but the comment should clarify why the distinction doesn't matter."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent documentation of error() method color behavior",
        "affected_files": [
          "src/iohandler/base.py",
          "src/iohandler/curses_io.py"
        ],
        "details": "base.py IOHandler.error() docstring:\n        \"\"\"Output error message.\n\n        Args:\n            message: Error message to display\n\n        Examples:\n            error(\"Syntax error in 100\")\n            error(\"Type mismatch\")\n        \"\"\"\n\ncurses_io.py CursesIOHandler.error() docstring:\n        \"\"\"Output error message to curses window.\n\n        Args:\n            message: Error message\n        \"\"\"\n\nThe curses implementation tries to use red color (curses.color_pair(4)) but this is not documented in either the base class or the implementation. Users wouldn't know errors appear in red."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "get_screen_size() method exists but not in base IOHandler interface",
        "affected_files": [
          "src/iohandler/web_io.py"
        ],
        "details": "web_io.py implements:\n    def get_screen_size(self):\n        \"\"\"Get terminal size.\n\n        Returns:\n            Tuple of (rows, cols) - returns reasonable defaults for web\n        \"\"\"\n        return (24, 80)\n\nThis method is not defined in the base IOHandler abstract class, so it's not part of the standard interface. Other implementations don't have it."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about preprocessing old BASIC appears twice with slightly different wording",
        "affected_files": [
          "src/lexer.py"
        ],
        "details": "In read_identifier() method, two comments say essentially the same thing:\n\nLine ~280: \"This lexer parses properly-formed MBASIC 5.21 which requires spaces between keywords and identifiers. Old BASIC with NEXTI instead of NEXT I should be preprocessed before parsing.\"\n\nLine ~330: \"NOTE: We do NOT handle old BASIC where keywords run together (NEXTI, FORI). This is properly-formed MBASIC 5.21 which requires spaces. Old BASIC files should be preprocessed with conversion scripts.\"\n\nThe repetition suggests either copy-paste or that one comment is outdated."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Docstring claims RND and INKEY$ can be called without parentheses for MBASIC 5.21 compatibility, but this is standard BASIC behavior not specific to version 5.21",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Module docstring states:\n\"Expression parsing notes:\n- Functions generally require parentheses: SIN(X), CHR$(65)\n- Exception: RND and INKEY$ can be called without parentheses (MBASIC 5.21 compatibility)\"\n\nThis implies it's a special compatibility feature for version 5.21, but RND and INKEY$ without parentheses is standard BASIC behavior across many versions, not specific to 5.21."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about semicolon handling mentions context matters but doesn't fully explain the distinction",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "In parse_line() at line ~320:\n\"# Allow trailing semicolon at end of line (treat as no-op).\n# Context matters: Semicolons WITHIN PRINT/LPRINT are item separators (parsed there),\n# but semicolons BETWEEN statements are treated as trailing no-ops (handled here).\"\n\nThe comment says semicolons between statements are no-ops, but the code then raises an error if there's content after the semicolon:\n\"if not self.at_end_of_line() and not self.match(TokenType.COLON):\n    token = self.current()\n    raise ParseError(f'Expected : or newline after ;, got {token.type.name}', token)\"\n\nThis means semicolons aren't really 'between statements' as no-ops - they're only allowed as trailing characters at end of line."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete documentation of parse_print_using error message format",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "In parse_print_using() at line ~1050:\n\"if not self.match(TokenType.SEMICOLON):\n    raise ValueError(f'Expected \\';\\' after PRINT USING format string at line {self.current.line}')\"\n\nThis uses ValueError instead of ParseError (used elsewhere), and accesses self.current.line directly instead of self.current().line (method call). This is inconsistent with the rest of the parser's error handling pattern."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about variable type precedence doesn't mention symbol table",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "In get_variable_type() docstring at line ~950:\n\"Determine variable type based on suffix or DEF statement\n\nType precedence:\n1. Explicit suffix ($, %, !, #)\n2. DEF statement for first letter\n3. Default (SINGLE)\"\n\nHowever, the parser has a symbol_table attribute (line ~60) that maps variable names to types, but this isn't mentioned in the type precedence documentation. It's unclear if/when the symbol table is consulted for type determination."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment describes LINE modifier syntax that appears incomplete or incorrect",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Comment at line ~50 states:\n\"# Check for LINE modifier after semicolon: INPUT \"prompt\";LINE var$\n# LINE allows input of entire line including commas\"\n\nThis suggests LINE comes after the semicolon following the prompt, but the code checks for LINE_INPUT token after parsing the prompt and separator, not specifically after a semicolon. The comment may be misleading about when LINE can appear."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about malformed FOR loop handling doesn't match actual implementation behavior",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Comment in parse_for() at line ~860 states:\n\"# Malformed FOR loop like \"FOR 1 TO 100\"\n# Create a dummy variable \"I\" and use the number as start\"\n\nThe code creates a dummy variable 'I' but this seems like error recovery rather than intentional support. The comment doesn't indicate this is error handling, making it unclear if this is a feature or a workaround. The docstring doesn't mention this case either."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Docstring for parse_deffn mentions 'FN' as optional keyword but implementation treats it differently",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Docstring states:\n\"# Handle \"DEF FN name\" with space (optional FN keyword)\"\n\nBut the code has two branches:\n1. TokenType.FN followed by IDENTIFIER (treats FN as separate token)\n2. IDENTIFIER starting with 'fn' (treats FN as part of identifier)\n\nThe comment 'optional FN keyword' is misleading - FN is not optional, it's either a separate token or part of the identifier name. The docstring should clarify this is about tokenization differences, not optionality."
      },
      {
        "severity": "low",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent case handling for letter ranges in parse_deftype",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "In parse_deftype() at line ~1270:\n\"first_letter = letter_token.value[0].upper()\nfirst_letter_lower = first_letter.lower()\n...\nfor letter in range(ord(first_letter_lower), ord(last_letter_lower) + 1):\n    letter_char = chr(letter)\n    self.def_type_map[letter_char] = var_type\n    letters.add(letter_char)\"\n\nThe code converts to upper, then back to lower, then stores lowercase in def_type_map. This is unnecessarily complex and the comment doesn't explain why both conversions are needed. The pattern suggests possible confusion about case normalization."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "parse_call docstring mentions 'MBASIC 5.21 standard syntax' but no version info elsewhere",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Docstring says: 'MBASIC 5.21 standard syntax: CALL address - Call machine code at numeric address'\n\nThis is the only reference to a specific MBASIC version (5.21) in the entire code snippet. Other statements don't specify versions. This inconsistency in documentation style could confuse users about which BASIC dialect/version is being implemented."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "parse_resume docstring says 'RESUME 0' is valid but implementation doesn't document this special case",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Comment in parse_resume says: '# Note: RESUME 0 is valid BASIC syntax meaning \"retry error statement\" (same as RESUME)'\n\nHowever, the code treats line_number=0 the same as any other line number, not as a special sentinel. The comment suggests RESUME 0 should behave like RESUME (no argument), but the implementation stores 0 as a regular line number. Either the comment is wrong or the code needs special handling for 0."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent docstring format for syntax examples",
        "affected_files": [
          "src/parser.py"
        ],
        "details": "Most parse methods use 'Syntax:' followed by examples, but formatting varies:\n- parse_common: 'Syntax: COMMON variable1, variable2, array1(), string$, ...'\n- parse_open: Lists multiple variations with dashes\n- parse_close: 'Syntax: CLOSE [#]n [, [#]n ...]'\n- parse_field: 'Syntax: FIELD #n, width AS variable$ [, width AS variable$ ...]'\n- parse_width: 'Syntax: WIDTH width [, device]' followed by Args section\n\nThe parse_width method uniquely includes an 'Args:' section describing parameters, while others don't. This inconsistency makes the documentation harder to follow."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment in serialize_let_statement says 'Operators are not stored as separate tokens in AST' but this is implementation detail that may not be universally true",
        "affected_files": [
          "src/position_serializer.py"
        ],
        "details": "In serialize_let_statement method:\n# Equals sign (operator position not tracked - using None for column)\n# Operators are not stored as separate tokens in AST, so position is inferred\n\nThis comment describes current implementation but presents it as absolute fact. Other operators in serialize_expression do have position tracking (BinaryOpNode, UnaryOpNode), so the comment is misleading about the general case."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment in serialize_expression fallback doesn't match code behavior regarding spacing",
        "affected_files": [
          "src/position_serializer.py"
        ],
        "details": "In serialize_expression method:\nelse:\n    # Fallback: use pretty printing\n    from src.ui.ui_helpers import serialize_expression\n    return \" \" + serialize_expression(expr)\n\nSame issue as serialize_statement - adds leading space but comment doesn't explain why or when this is appropriate. This could cause spacing inconsistencies."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "renumber_with_spacing_preservation docstring says 'AST is the single source of truth' but then describes updating AST",
        "affected_files": [
          "src/position_serializer.py"
        ],
        "details": "Docstring says:\n\"AST is the single source of truth. This function:\n1. Updates line numbers in the AST\n2. Updates all line number references (GOTO, GOSUB, etc.)\n3. Adjusts token column positions to account for line number length changes\n4. Text is regenerated from AST by position_serializer\"\n\nIf AST is the 'single source of truth', then updating it seems contradictory. The comment should clarify that the AST is the source of truth for CONTENT, but this function updates METADATA (line numbers, positions) within the AST."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "estimate_size method comment says 'TypeInfo (INTEGER, SINGLE, DOUBLE, STRING) or VarType enum' but doesn't explain when each is used",
        "affected_files": [
          "src/resource_limits.py"
        ],
        "details": "Docstring says:\nArgs:\n    value: The actual value (number, string, array)\n    var_type: TypeInfo (INTEGER, SINGLE, DOUBLE, STRING) or VarType enum\n\nThe code only checks for TypeInfo values, not VarType enum. Either:\n1. VarType enum support is missing (code bug)\n2. Comment is outdated and VarType is no longer supported\n3. TypeInfo and VarType are the same thing (comment should clarify)"
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment in check_array_allocation says 'BASIC is 0-indexed' but this is incorrect for most BASIC dialects",
        "affected_files": [
          "src/resource_limits.py"
        ],
        "details": "Code comment:\ntotal_elements *= (dim_size + 1)  # +1 because BASIC is 0-indexed\n\nThis is misleading. BASIC arrays are 0-indexed by default (0 to N), but the +1 is because DIM A(10) creates 11 elements (0-10), not because of 0-indexing. The comment should say '+1 because DIM A(N) creates N+1 elements (0 to N)' to be clearer."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "StatementTable docstring says 'Uses regular dict which maintains insertion order (Python 3.7+)' but this is now guaranteed in Python 3.7+",
        "affected_files": [
          "src/pc.py"
        ],
        "details": "The comment 'Python 3.7+' suggests this is a version-specific feature that might not work in older versions. If the codebase requires Python 3.7+, this comment is unnecessary. If it supports older versions, the code would break. The comment should either:\n1. Be removed if 3.7+ is required\n2. Include a version check if older versions are supported"
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Docstring for get_array_element() says 'optionally tracking read access' but token parameter determines tracking, not optional behavior",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "Docstring says:\n\"Get array element value, optionally tracking read access.\"\n\nBut the implementation shows:\n```python\n# Track read access if token is provided\nif token is not None:\n    # Track at array level (for variables window display)\n    tracking_info = {...}\n```\n\nThe tracking is not 'optional' in the sense of a flag - it's determined by whether token is provided. The wording suggests there might be a parameter to control tracking, but there isn't."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Module docstring lists 'case_variants' in variable storage but implementation uses '_variable_case_variants' as separate dict",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "Module docstring at top:\n\"Variable storage (PRIVATE - use get_variable/set_variable methods)\nEach variable is stored as: name_with_suffix -> {'value': val, 'last_read': {...}, 'last_write': {...}, 'original_case': str, 'case_variants': [...]}\"\n\nBut implementation shows:\n```python\nself._variables = {}  # name_with_suffix -> {'value': val, 'last_read': {...}, 'last_write': {...}, 'original_case': str}\nself._variable_case_variants = {}  # Maps normalized name (lowercase) to list of all case variants\n```\n\nThe 'case_variants' is not stored in each variable entry, but in a separate tracking dict."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Docstring for set_variable() says 'token can be None' when debugger_set=True, but earlier says 'MUST be called with a token'",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "Docstring for set_variable():\n\"This method MUST be called with a token for normal program execution.\nFor debugger writes, pass debugger_set=True (token can be None).\"\n\nThis is internally consistent but contradicts the general pattern established by get_variable() which says to use a separate method (get_variable_for_debugger) instead of allowing token=None."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment in get_all_variables() says 'line -1 in last_write indicates debugger/prompt/internal set' but set_variable_raw uses line=-1 for system variables",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "In get_all_variables() docstring:\n\"Note: line -1 in last_write indicates debugger/prompt/internal set\"\n\nBut set_variable_raw() creates FakeToken with line=-1 for system variables like ERR% and ERL%, which are not debugger/prompt sets but internal initialization. This overloads the meaning of line=-1."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Missing 'stmt' field in FOR loop example in get_execution_stack() docstring",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "The docstring example shows:\n\"Example with nested control flow:\n[\n    {'type': 'FOR', 'var': 'I', 'current': 1, 'end': 10, 'step': 1, 'line': 100},\n    {'type': 'GOSUB', 'from_line': 130, 'return_line': 130},\n    {'type': 'WHILE', 'line': 500}\n]\"\n\nBut the documented FOR loop structure includes:\n\"For FOR loops:\n{\n    'type': 'FOR',\n    'var': 'I',\n    'current': 5,\n    'end': 10,\n    'step': 1,\n    'line': 100,\n    'stmt': 0             # Statement offset\n}\"\n\nThe example is missing the 'stmt' field that is documented and implemented in the actual code."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Missing 'return_stmt' field in GOSUB example in get_execution_stack() docstring",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "The docstring example shows:\n\"{'type': 'GOSUB', 'from_line': 130, 'return_line': 130}\"\n\nBut the documented GOSUB structure includes:\n\"For GOSUB calls:\n{\n    'type': 'GOSUB',\n    'from_line': 60,\n    'return_line': 60,\n    'return_stmt': 0      # Statement offset to return to\n}\"\n\nThe example is missing the 'return_stmt' field that is documented and implemented in the actual code."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent terminology for statement offset indexing in docstrings",
        "affected_files": [
          "src/runtime.py"
        ],
        "details": "In set_breakpoint() docstring:\n\"stmt_offset: Optional statement offset (0-based). If None, breaks on entire line.\"\n\"set_breakpoint(100, 2)        # Statement-level (line 100, 3rd statement)\"\n\nThis shows stmt_offset=2 refers to the \"3rd statement\" (1-based description) but the parameter is described as \"0-based\". While technically correct (offset 2 = 3rd item), the mixed terminology could be confusing. The same pattern appears in get_gosub_stack() docstring:\n\"- line 500, statement 2 (third statement on line 500)\"\n\nConsistency in describing offsets vs ordinal positions would improve clarity."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Comment claims 'ui.theme not implemented yet' but no placeholder or definition exists for this setting",
        "affected_files": [
          "src/settings_definitions.py"
        ],
        "details": "Comment at line ~153 in settings_definitions.py:\n# Note: ui.theme not implemented yet\n\nThis suggests ui.theme was planned but there's no SettingDefinition for it, not even a placeholder. This is inconsistent with the pattern of defining all settings even if not fully implemented."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Tab key is used for window switching in curses UI, not indentation' but there's no curses UI context in this file",
        "affected_files": [
          "src/settings_definitions.py"
        ],
        "details": "Comment at line ~145:\n# Note: Tab key is used for window switching in curses UI, not indentation\n# Removed editor.tab_size setting as it's not relevant for BASIC\n\nThis comment references curses UI implementation details in a settings definition file, which is a layer violation. The comment explains why a setting was removed, but the reasoning is UI-specific and doesn't belong in the settings definitions module."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Line numbers are always shown - they're fundamental to BASIC!' but this is a UI decision documented in a settings definition file",
        "affected_files": [
          "src/settings_definitions.py"
        ],
        "details": "Comment at line ~148:\n# Note: Line numbers are always shown - they're fundamental to BASIC!\n# Removed editor.show_line_numbers setting as it makes no sense for BASIC\n\nThis is another UI implementation detail in the settings definitions. The comment explains a removed setting but the reasoning is architectural, not about the setting system itself."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "Token class has both original_case and original_case_keyword fields but documentation doesn't explain when each is used",
        "affected_files": [
          "src/tokens.py"
        ],
        "details": "In tokens.py Token dataclass (lines ~245-250):\noriginal_case: Any = None  # Original case for identifiers (before lowercasing)\noriginal_case_keyword: str = None  # Original case for keywords (e.g., \"PRINT\", \"Print\", \"print\")\n\nThe comments suggest original_case is for identifiers and original_case_keyword is for keywords, but the __repr__ method shows both can be present simultaneously. The relationship and usage pattern is not clearly documented."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Comment says 'Curses UI not available' when import fails, but doesn't explain why or what's needed",
        "affected_files": [
          "src/ui/__init__.py"
        ],
        "details": "In ui/__init__.py (lines ~16-19):\nexcept ImportError:\n    # Curses UI not available\n    _has_curses = False\n    CursesBackend = None\n\nThe comment doesn't explain that urwid is an optional dependency or how to install it. This could confuse users who see CursesBackend = None."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "AutoSaveManager docstring says 'Emacs-style auto-save' but doesn't explain what that means for users unfamiliar with Emacs",
        "affected_files": [
          "src/ui/auto_save.py"
        ],
        "details": "In auto_save.py (lines ~4-12):\n\"\"\"Auto-Save Manager for MBASIC IDE\n\nProvides Emacs-style auto-save functionality:\n- Saves to temp files (#filename#) automatically\n- Never overwrites user-saved files without permission\n- Offers recovery on startup if autosave is newer\n- Cleans up old autosaves\n\nThe term 'Emacs-style' is jargon that may not be clear to all users. The bullet points explain it, but the term itself could be removed or explained."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "UIBackend docstring lists 'HeadlessBackend: No UI, for batch processing' but no such backend exists in the codebase",
        "affected_files": [
          "src/ui/base.py"
        ],
        "details": "In base.py (lines ~24-28):\nDifferent UIs can implement this interface:\n- CLIBackend: Terminal-based REPL (current InteractiveMode)\n- GUIBackend: Desktop GUI with visual editor\n- MobileBackend: Touch-based mobile UI\n- WebBackend: Browser-based interface\n- HeadlessBackend: No UI, for batch processing\n\nOnly CLIBackend, VisualBackend, CursesBackend, and TkBackend are defined in ui/__init__.py. GUIBackend, MobileBackend, WebBackend, and HeadlessBackend don't exist."
      },
      {
        "severity": "low",
        "type": "Documentation inconsistency",
        "description": "Footer text shows ESC/^P for Cancel but keypress handler only implements ESC",
        "affected_files": [
          "src/ui/curses_settings_widget.py"
        ],
        "details": "Footer text displays:\n\"Enter=OK  ESC/^P=Cancel  ^A=Apply  ^R=Reset\"\n\nBut keypress() method only handles:\nif key == 'esc':\n    self._on_cancel()\n    return None\n\nThere is no handler for 'ctrl p' to cancel. The ^P shortcut is documented but not implemented."
      },
      {
        "severity": "low",
        "type": "Code vs Comment conflict",
        "description": "TODO comment about help system integration never implemented",
        "affected_files": [
          "src/ui/cli_debug.py"
        ],
        "details": "In _add_debug_help() method:\ndef _add_debug_help(self):\n    \"\"\"Add debug commands to help system (not yet implemented)\"\"\"\n    # TODO: Integrate debug commands with help system\n    pass\n\nThis method is called during initialization but does nothing. The docstring and TODO indicate planned functionality that was never completed. This creates confusion about whether the debug commands appear in any help system."
      },
      {
        "severity": "low",
        "type": "Code vs Documentation inconsistency",
        "description": "Enum radio button implementation comment doesn't match actual storage mechanism",
        "affected_files": [
          "src/ui/curses_settings_widget.py"
        ],
        "details": "In _create_setting_widget() for ENUM type:\n# Create display label (strip force_ prefix for cleaner display)\ndisplay_label = choice.replace('force_', '')\nrb = urwid.RadioButton(group, display_label, state=(choice == current_value))\n# Store the actual value as user_data for later retrieval\nrb._actual_value = choice\n\nThe comment says 'Store the actual value as user_data' but the code stores it as a private attribute '_actual_value', not using urwid's user_data mechanism. This is misleading about the implementation approach."
      },
      {
        "severity": "low",
        "type": "Code vs Comment conflict",
        "description": "Comment about showing error dialog doesn't match actual implementation",
        "affected_files": [
          "src/ui/curses_settings_widget.py"
        ],
        "details": "In _apply_settings() method:\nexcept Exception as e:\n    # Show error (in real implementation would show dialog)\n    return False\n\nThe comment suggests this is placeholder code ('in real implementation would show dialog'), but the method is used in production code by _on_apply() and _on_ok(). This creates ambiguity about whether error handling is complete or still needs implementation."
      },
      {
        "severity": "low",
        "type": "Documentation inconsistency",
        "description": "STACK command docstring incomplete - doesn't document actual output format",
        "affected_files": [
          "src/ui/cli_debug.py"
        ],
        "details": "cmd_stack() docstring says:\n\"\"\"STACK command - show call stack.\n\nShows current GOSUB call stack and FOR loop stack.\n\"\"\"\n\nBut doesn't document:\n1. What happens when no program is running\n2. The specific format of output (numbered list with 'Line X' format)\n3. The FOR loop details shown (variable, current, limit)\n4. That it checks hasattr() for stack existence (defensive programming not documented)"
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment describes format with fixed-width line numbers but implementation uses variable width parsing",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "In _parse_line_numbers method comment (line ~1030):\n'Handles both:\n- Lines with column structure: \" [space]     10 PRINT\"\n- Raw pasted lines: \"10 PRINT\"'\n\nThe comment shows '     10' (5 spaces for line number), but the _parse_line_number method uses variable-width parsing:\nspace_idx = line.find(' ', 1)\nif space_idx > 1:\n    line_num = int(line[1:space_idx])\n\nThis suggests variable width, but the formatting code still uses fixed 5 chars."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about column positions assumes fixed width but code checks variable positions",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment at line ~460:\n'# Sort if we're in the line number area\nif 1 <= col_in_line <= 6:'\n\nThis assumes columns 1-6 are line number area (fixed 5 digits + space), but the actual check should be dynamic based on where the space after the line number is located, since _parse_line_number uses variable-width parsing."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says toolbar is removed from UI layout but _create_toolbar method still exists and is fully implemented",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment at line ~213: '# Toolbar removed from UI layout - use Ctrl+U menu instead for keyboard navigation\n# (_create_toolbar method still exists but is not called)'\n\nThe _create_toolbar() method (lines ~177-211) is fully implemented with all button handlers, suggesting it may have been used recently or could be re-enabled. The comment acknowledges this but the extensive implementation seems inconsistent with 'removed' status."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'don't create multiple' interpreters but code creates interpreter twice in different contexts",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment at line ~53: '# Create one interpreter for the session - don't create multiple!'\n\nHowever, the code creates the interpreter once in __init__ (line ~56) and then re-initializes ImmediateExecutor with it in start() (line ~95). While technically reusing the same interpreter object, the pattern of re-initialization could be clearer."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about syncing pre-loaded program mentions command line loading but no command line argument handling is visible",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment at lines ~97-98: '# Sync any pre-loaded program to the editor\n# (e.g., when loading a file from command line)'\n\nThe code checks if self.program.has_lines() but there's no visible code in this file showing how a program would be pre-loaded from command line arguments. This may be handled elsewhere but the comment suggests it should be relevant to this initialization."
      },
      {
        "severity": "low",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent reference to self.editor_lines which is not initialized as an instance variable",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Line ~99: 'if self.program.has_lines() and not self.editor_lines:'\n\nNo initialization of self.editor_lines is visible in __init__. The editor widget has self.editor.lines (a dict), but self.editor_lines as a direct attribute of the UI class is never created. This will cause an AttributeError."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about PC setting timing is confusing given the actual flow",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "In _setup_program() around line 1075:\nComment: '# If start_line is specified, set PC AFTER start() has called setup()\\n# because setup() resets PC to first line'\n\nThis comment suggests setup() resets PC, but the actual method called is start(), not setup(). The comment may be referring to an internal method called by start(), but this creates confusion about the actual call chain."
      },
      {
        "severity": "low",
        "type": "code_internal_inconsistency",
        "description": "Inconsistent handling of self.running flag in _setup_program",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "In _setup_program() method:\n- Line ~1070: Sets 'self.running = False' when program is empty\n- Line ~1085: Sets 'self.running = False' on startup error\n- But never sets 'self.running = True' on successful setup\n\nThe method returns True/False to indicate success, but doesn't consistently manage the self.running flag. The caller (_run_program) may be responsible for setting it to True, but this creates an asymmetric pattern where _setup_program sets it to False but not to True."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about 'focus highlighting on first char' doesn't match typical urwid behavior",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "In _update_output() around line 1175 and _update_output_with_lines() around line 1190:\nComment: '# Add all lines from buffer with focus highlighting on first char'\n\nThis comment appears in multiple places but the code just calls make_output_line(line) without any special focus highlighting logic visible in this file. The comment may be describing behavior implemented in make_output_line(), but without seeing that function, it's unclear if this comment is accurate or outdated."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Variable window title shows conflicting keyboard shortcuts",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "In _update_variables_window() around line 680:\nTitle format: 'Variables (Sort: {mode_label} {arrow}) - s=mode d=dir f=filter e=edit Ctrl+W=toggle'\n\nBut in the same method around line 650, the title when filtered shows:\n'Variables ({len}/{total} filtered: '{filter}') Sort: {mode_label} {arrow} - s=mode d=dir f=filter e=edit Ctrl+W=toggle'\n\nThe shortcuts are the same, but there's no indication what 'Ctrl+W=toggle' toggles. Looking at other window titles, this likely toggles window visibility, but it's not documented consistently with other windows."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment 'No state checking - just ask the interpreter' is misleading as the code does check if interpreter exists",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment: '# No state checking - just ask the interpreter'\nCode: has_work = self.interpreter.has_work() if self.interpreter else False\nThe comment suggests no checking is done, but the code does check if self.interpreter exists before calling has_work()."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment 'Use main_widget as base (not current loop.widget which might be a menu)' suggests defensive programming but doesn't explain when loop.widget would be a menu",
        "affected_files": [
          "src/ui/curses_ui.py"
        ],
        "details": "Comment: '# Use main_widget as base (not current loop.widget which might be a menu)'\nThe comment warns about loop.widget potentially being a menu, but there's no context about when this would happen or what problems it would cause. This suggests incomplete understanding or documentation of the widget state management."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "Help widget search footer shows inconsistent capitalization for ESC",
        "affected_files": [
          "src/ui/help_widget.py",
          "src/ui/keybindings.py"
        ],
        "details": "help_widget.py line 161:\nself.footer.set_text(\" /=New Search ESC=Back \")\n\nhelp_widget.py line 72:\nself.footer.set_text(\" ↑/↓=Scroll Tab=Next Link Enter=Follow /=Search u=Back ESC/Q=Exit \")\n\nFirst uses 'ESC=Back', second uses 'ESC/Q=Exit'. The capitalization is consistent, but the inconsistency is in showing 'ESC' alone vs 'ESC/Q' for similar exit actions."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Ctrl+L is context-sensitive' but there's no CTRL_L constant defined or used in the keybindings",
        "affected_files": [
          "src/ui/keybindings.py"
        ],
        "details": "keybindings.py line 207-209:\n# Note: Ctrl+L is context-sensitive in curses UI:\n# - When debugging: Step Line (execute all statements on current line)\n# - When editing: List program (same as LIST_KEY)\n\nThis comment describes Ctrl+L behavior but there's no corresponding constant or configuration for Ctrl+L. The LIST_KEY is defined as Ctrl+K, not Ctrl+L."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "Search results show '📘 UI' tier but this emoji is not defined in tier_labels dictionary",
        "affected_files": [
          "src/ui/help_widget.py"
        ],
        "details": "help_widget.py line 95-98:\ntier_labels = {\n    'language': '📕 Language',\n    'mbasic': '📗 MBASIC',\n}\n\nhelp_widget.py line 115-118:\nif tier_name.startswith('ui/'):\n    tier_label = '📘 UI'\nelse:\n    tier_label = tier_labels.get(tier_name, '📙 Other')\n\nThe '📘 UI' tier is hardcoded in the conditional but not in the tier_labels dictionary, and there's also a fallback '📙 Other' that's not in the dictionary. This suggests the tier_labels dict is incomplete."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Ctrl+S unavailable - terminal flow control' but doesn't explain why Ctrl+V was chosen as alternative",
        "affected_files": [
          "src/ui/keybindings.py"
        ],
        "details": "keybindings.py line 143-145:\n# Save program (Ctrl+S unavailable - terminal flow control)\n# Use Ctrl+V instead (V for saVe)\n_save_key = _get_key('editor', 'save') or 'Ctrl+V'\n\nThe comment explains why Ctrl+S can't be used but the mnemonic 'V for saVe' is weak. This could confuse users expecting Ctrl+S. The comment should perhaps mention that Ctrl+V is also commonly used for paste in other applications."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Ctrl+I unavailable - identical to Tab' but doesn't explain why Ctrl+J was chosen for insert line",
        "affected_files": [
          "src/ui/keybindings.py"
        ],
        "details": "keybindings.py line 176-179:\n# Smart Insert Line (Ctrl+I unavailable - identical to Tab)\n# Use Ctrl+J instead (J for inJect/insert)\nINSERT_LINE_KEY = 'ctrl j'\nINSERT_LINE_CHAR = '\\x0a'\n\nThe mnemonic 'J for inJect/insert' is weak and 'inject' is not a common term for inserting lines. Also, Ctrl+J is actually the newline character (\\x0a), which could cause confusion."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'title=None creates border without title text (still has top border line)' but this is misleading - title=None creates a LineBox with no title, which is the standard behavior",
        "affected_files": [
          "src/ui/keymap_widget.py"
        ],
        "details": "Line 48-49:\n# Wrap in line box with black background\n# title=None creates border without title text (still has top border line)\nlinebox = urwid.LineBox(\n    urwid.AttrMap(self.listbox, 'body'),\n    title=None\n)\n\nThe comment suggests something special about title=None, but this is just the default LineBox behavior. The comment is unnecessarily explanatory."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "Help browser implements Escape key to close in-page search but this is not documented in tk_keybindings.json",
        "affected_files": [
          "src/ui/tk_help_browser.py",
          "src/ui/tk_keybindings.json"
        ],
        "details": "tk_help_browser.py line 103:\nself.inpage_search_entry.bind('<Escape>', lambda e: self._inpage_search_close())\n\ntk_keybindings.json has no entry for Escape key in help_browser section"
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Docstring says 'Note: Not thread-safe (no locking mechanism)' but this is more of a limitation note than a documentation inconsistency. However, it's worth noting that the class doesn't document what happens in concurrent access scenarios",
        "affected_files": [
          "src/ui/recent_files.py"
        ],
        "details": "Line 13-14:\n- Cross-platform (uses pathlib)\n- Note: Not thread-safe (no locking mechanism)\n\nThis is actually consistent - just a limitation note. No inconsistency here."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment in _format_table_row says 'Format columns with consistent spacing (15 chars each)' and this exact same comment appears in tk_help_browser.py _format_table_row method, suggesting code duplication",
        "affected_files": [
          "src/ui/markdown_renderer.py"
        ],
        "details": "markdown_renderer.py line 127:\n# Format columns with consistent spacing (15 chars each)\n\ntk_help_browser.py line 555:\n# Format columns with consistent spacing (15 chars each)\n\nBoth methods have identical implementation for table formatting. This is code duplication, not an inconsistency per se, but suggests the code should be refactored to use a shared utility."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Instructions text says '↑/↓ scroll  ESC/Q close' but the keypress handler accepts both lowercase 'q' and uppercase 'Q', which is redundant information",
        "affected_files": [
          "src/ui/keymap_widget.py"
        ],
        "details": "Line 38:\ninstructions = urwid.AttrMap(\n    urwid.Text(\"↑/↓ scroll  ESC/Q close\", align='center'),\n    'help_text'\n)\n\nLine 85:\nif key in ('esc', 'q', 'Q'):\n\nThe display shows 'Q' (uppercase) but the code accepts both 'q' and 'Q'. This is not really an inconsistency since urwid typically handles both cases, but the display could just say 'ESC/q' to be clearer."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Raise search tags so they appear above other formatting' but this is standard tkinter behavior for tag_raise, not a special implementation detail",
        "affected_files": [
          "src/ui/tk_help_browser.py"
        ],
        "details": "Line 122-124:\n# Raise search tags so they appear above other formatting\nself.text_widget.tag_raise(\"search_highlight\")\nself.text_widget.tag_raise(\"search_current\")\n\nThe comment is accurate but overly explanatory for standard tkinter API usage."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says dialog is 'non-blocking' but implementation uses grab_set() which blocks input to other windows",
        "affected_files": [
          "src/ui/tk_settings_dialog.py"
        ],
        "details": "Line 33 comment: '# Make modal (grab input focus, but non-blocking - no wait_window())'\nLine 34 code: 'self.grab_set()'\n\nThe comment claims the dialog is 'non-blocking' because it doesn't call wait_window(), but grab_set() still makes it modal by blocking input to other windows in the application. The dialog is modal (blocks other windows) but doesn't block code execution (no wait_window). The comment is misleading about what 'non-blocking' means in this context."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment describes inline help as 'not a hover tooltip' but doesn't explain what it actually is",
        "affected_files": [
          "src/ui/tk_settings_dialog.py"
        ],
        "details": "Line 157 comment: '# Show short help as inline label (not a hover tooltip, just a gray label)'\n\nThe comment emphasizes what it's NOT (a hover tooltip) rather than clearly describing what it IS. This is a minor clarity issue - the comment could be more direct by saying 'Show short help as inline gray label' without the negative comparison."
      },
      {
        "severity": "low",
        "type": "implementation_inconsistency",
        "description": "Redundant type check in _get_current_widget_values method",
        "affected_files": [
          "src/ui/tk_settings_dialog.py"
        ],
        "details": "Lines 176-181:\n    for key, widget in self.widgets.items():\n        if isinstance(widget, tk.Variable):\n            values[key] = widget.get()\n        else:\n            values[key] = widget.get()\n\nBoth branches of the if/else statement do exactly the same thing (widget.get()). The isinstance check serves no purpose and the else branch is unreachable in practice since all stored widgets are tk.Variable instances based on the _create_setting_widget implementation."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Module docstring doesn't mention that dialog is modal",
        "affected_files": [
          "src/ui/tk_settings_dialog.py"
        ],
        "details": "Module docstring (lines 1-5):\n\"\"\"TK Settings Dialog for MBASIC\n\nProvides a GUI dialog for modifying settings.\"\"\"\n\nThe docstring is very brief and doesn't mention important characteristics like the dialog being modal, having Apply/OK/Cancel buttons, or being organized into category tabs. While not technically incorrect, it's incomplete for a user-facing component."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment references removed history widget that no longer exists",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "Line ~260 comment: '# Create dummy immediate_history and immediate_status for compatibility\\n# (some code still references these)'\n\nCode sets: self.immediate_history = None\n\nBut there's no evidence in the visible code of anything referencing immediate_history. This appears to be a leftover comment from refactoring that removed the history widget."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Toolbar comment mentions removed utility buttons but doesn't reflect current state",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "Comment at line ~420: '# Utility buttons removed - use menus instead:\\n# - List → Run > List Program\\n# - Clear Prog → File > New\\n# - Clear Out → Run > Clear Output'\n\nThis comment describes what was removed but doesn't describe what the toolbar currently contains. The comment is historical rather than descriptive of current implementation."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about accepting both 'tree' and 'cell' regions is redundant",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "At line ~810:\n# Check if we clicked on a row (accept 'tree' for first column or 'cell' for other columns)\nregion = self.variables_tree.identify_region(event.x, event.y)\nif region not in ('cell', 'tree'):\n    return\n\nThe comment explains why both are accepted, but this is standard Treeview behavior and doesn't need explanation. The comment adds no value."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about column sorting contradicts implementation",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "At line ~770:\n# Click on rest = cycle/set sort column\nif col_x < ARROW_CLICK_WIDTH:\n    self._toggle_variable_sort_direction()\nelse:\n    if column == '#0':  # Variable column - only sortable column\n        self._cycle_variable_sort()\n    # Type and Value columns are not sortable\n\nComment says 'cycle/set sort column' but only Variable column is sortable. The comment should say 'cycle sort column (Variable only)' to be accurate."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about blank line removal contradicts actual behavior",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _remove_blank_lines() docstring:\n\"Remove all blank lines from the editor (except final line).\\n\\nRemoves blank lines to keep program clean, but preserves the final\\nline which is always blank in Tk Text widget (internal Tk behavior).\\nCalled after any modification (typing, pasting, etc.)\"\n\nBut the method is NOT called after every modification - it's not bound to any event handler in the visible code. The comment \"Called after any modification\" appears to be outdated or aspirational rather than actual behavior."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about validation timing is misleading",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _validate_editor_syntax() docstring:\n\"Validates each line independently as entered - immediate feedback.\"\n\nBut the method is called:\n1. After cursor movement (100ms delay) - line 1182\n2. After mouse click (100ms delay) - line 1191\n3. On focus out - line 1196\n\nThis is NOT \"immediate feedback as entered\" - it's delayed feedback after navigation. True immediate feedback would require binding to <KeyRelease> or similar."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about preventing blank lines contradicts actual behavior",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _on_enter_key() at line 1207:\n\"# If line is completely blank, don't do anything (prevent blank lines)\\n        if not current_line_text:\\n            return 'break'\"\n\nBut this doesn't actually prevent blank lines - it just prevents processing them. The blank line still exists in the editor. To truly prevent blank lines, the code would need to delete the line or prevent the newline insertion. The comment is misleading about what the code does."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about 'half yellow line' issue doesn't match when highlight is cleared",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _on_key_press() method around line 850:\nComment: '# Clear yellow statement highlight when user starts editing\\n# This prevents the \"half yellow line\" issue when editing error/breakpoint lines'\n\nBut the code clears highlight only 'if self.paused_at_breakpoint', which means it won't clear the highlight during normal running execution (when lines flash yellow briefly). The comment suggests it should clear on any editing to prevent visual issues, but the condition is more restrictive."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Query interpreter directly via has_work()' but then checks runtime flags anyway",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "In _execute_immediate() method around line 1570:\nComment: '# Check if interpreter has work to do (after RUN statement)\\n# Query interpreter directly via has_work() instead of checking runtime flags'\n\nCode: 'has_work = self.interpreter.has_work()'\n\nBut then immediately after (line 1580): 'self.runtime.halted = False  # Clear halted flag to start execution'\n\nThis shows the code is still manipulating runtime flags directly, contradicting the comment's suggestion to use has_work() instead of runtime flags."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about updating variables/stack windows is incomplete",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "At end of _execute_immediate() method (line 1590):\nComment: '# Update variables/stack windows if they exist'\n\nBut there's no code following this comment - it's just a TODO note. Either the comment should be removed or the code should be implemented."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'immediate mode has no history widget' but code shows immediate_history widget exists",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "Method _add_immediate_output has comment:\n\"\"\"Add text to main output pane (immediate mode has no history widget).\"\"\"\n\nBut later in the file, methods like _setup_immediate_context_menu, _copy_immediate_selection, and _select_all_immediate all reference self.immediate_history widget, which clearly exists."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "clear_screen() docstring says 'GUI output not clearable like terminal' but this is misleading",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "clear_screen() docstring: \"Clear screen - no-op for Tk UI (GUI output not clearable like terminal).\"\n\nThis is misleading because GUI text widgets CAN be cleared programmatically (e.g., self.output_text.delete('1.0', tk.END)). The comment should clarify that it's a design decision not to clear, not a technical limitation."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "input_char() docstring says 'limited to 1 character' but implementation doesn't enforce this in the dialog",
        "affected_files": [
          "src/ui/tk_ui.py"
        ],
        "details": "input_char() docstring: \"For Tk UI, shows a simple input dialog limited to 1 character.\"\n\nBut the implementation uses:\nresult = simpledialog.askstring(\n    \"INPUT$ (Single Character)\",\n    \"Enter a single character:\",\n    parent=self.root\n)\n\naskstring() doesn't limit input length - user can type multiple characters. The code only takes the first character after submission: 'return result[0] if result else \"\"', but the dialog itself isn't limited."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Canvas width comment says '20px for one status character' but actual width is set to 20 without unit specification",
        "affected_files": [
          "src/ui/tk_widgets.py"
        ],
        "details": "Comment states:\n\"# Width: 20px for one status character (●, ?, or space)\"\n\nBut code uses:\nself.canvas = tk.Canvas(\n    self,\n    width=20,\n    ...\n)\n\nIn Tkinter, the width parameter is in pixels by default, so the comment is technically correct, but the 'px' notation suggests CSS/web context rather than Tkinter convention."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Blank line removal feature is implemented but not documented in class docstring",
        "affected_files": [
          "src/ui/tk_widgets.py"
        ],
        "details": "The class implements automatic blank line removal when cursor moves away from a blank line:\n- _on_cursor_move() method tracks cursor movement\n- _delete_line() method removes blank lines\n- Bindings set up for '<KeyPress>' and '<ButtonPress-1>'\n\nHowever, the class docstring only documents:\n\"Layout: [Status (●/?/ )][ Code with line numbers ]\n\nStatus symbols:\n- ● : Breakpoint set on this line\n- ? : Parse error on this line\n- ' ': Normal line (no breakpoint, no error)\"\n\nThe blank line removal behavior is a significant feature that affects user experience but is not mentioned in the documentation."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent terminology for line number types - 'BASIC line number' vs 'editor line' vs 'text widget line number'",
        "affected_files": [
          "src/ui/tk_widgets.py"
        ],
        "details": "The code uses multiple terms for different line number concepts:\n- 'BASIC line number' (the actual line number in BASIC code like 10, 20, 30)\n- 'editor line' (mentioned in _on_status_click)\n- 'text widget line number' (mentioned in _delete_line docstring)\n- 'line_num' variable used for both BASIC and Tkinter line numbers\n\nThis creates confusion. For example:\n- line_metadata uses BASIC line numbers as keys\n- Tkinter text widget uses 1-based sequential line numbers\n- Comments don't always clarify which type is being used"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Module docstring claims 'No UI-specific dependencies allowed' but the list_files() function uses glob and os modules which are filesystem-specific, not truly UI-agnostic portable logic.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "Module docstring:\n\"This module contains UI-agnostic helper functions that can be used by\nany UI (CLI, Tk, Web, Curses). No UI-specific dependencies allowed.\"\n\nBut list_files() implementation:\nimport glob\nimport os\n\nThese are filesystem operations, not UI operations, so technically correct but the claim of 'portable logic for all UIs' is slightly misleading since filesystem access patterns differ across platforms."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "The serialize_statement() function has a comment about REMARK being converted to REM, but this conversion logic is not present in the function itself.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "Comment in RemarkStatementNode handling:\n# Preserve comments using original syntax (REM or ')\n# Note: REMARK is converted to REM for consistency\n\nBut the code only checks:\nif stmt.comment_type == \"APOSTROPHE\":\n    return f\"' {stmt.text}\"\nelse:  # REM, REMARK, or default\n    return f\"REM {stmt.text}\"\n\nThe conversion from REMARK to REM must happen elsewhere (likely in the parser), not in this serialization function. The comment is misleading about where the conversion occurs."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "The serialize_line() function comment mentions 'preserving indentation' but the implementation only preserves RELATIVE indentation (spaces after line number), not absolute indentation.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "Docstring:\nSerialize a LineNode back to source text, preserving indentation.\n\nComment in code:\n# Preserve RELATIVE indentation (spaces after line number) from original source\n# This ensures indentation survives RENUM when line numbers change width\n\nThe docstring should clarify that only relative indentation is preserved, not absolute column positions."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "The update_line_references() regex pattern comment says it matches 'ON <expr> GOTO/GOSUB' but the actual regex pattern is 'ON\\s+[^G]+\\s+GOTO' which matches 'ON' + spaces + anything except G + spaces + GOTO. This doesn't accurately match expressions.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "Comment:\n# Keywords: GOTO, GOSUB, THEN, ELSE, or \"ON <expr> GOTO/GOSUB\"\n\nRegex:\nr'\\b(GOTO|GOSUB|THEN|ELSE|ON\\s+[^G]+\\s+GOTO|ON\\s+[^G]+\\s+GOSUB)\\s+(\\d+)'\n\nThe pattern [^G]+ means 'one or more characters that are not G', which would fail on expressions like 'ON G GOTO 100' or 'ON X+G GOTO 100'. This is a potential bug or the comment is inaccurate."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "The get_variable_sort_modes() function returns sort modes including 'accessed', 'written', 'read', 'name', but the comment in get_sort_key_function() mentions 'old type/value modes' that are not in the current list.",
        "affected_files": [
          "src/ui/variable_sorting.py"
        ],
        "details": "In get_sort_key_function():\nelse:\n    # Default to name sorting (unknown modes fall back to this, e.g., old 'type'/'value')\n    return lambda v: v['name'].lower()\n\nBut get_variable_sort_modes() only returns: 'accessed', 'written', 'read', 'name'\n\nThe comment references 'type' and 'value' modes that don't exist in the current implementation, suggesting these were removed but the comment wasn't updated."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "The parse_delete_args() function docstring shows examples with sorted line numbers [10, 20, 30, 40, 50], but the function doesn't require or verify that all_line_numbers is sorted.",
        "affected_files": [
          "src/ui/ui_helpers.py"
        ],
        "details": "Docstring examples:\n>>> parse_delete_args(\"40\", [10, 20, 30, 40, 50])\n(40, 40)\n\nBut the function implementation:\nmin_line = min(all_line_numbers) if all_line_numbers else 0\nmax_line = max(all_line_numbers) if all_line_numbers else 0\n\nThe function uses min() and max() which work on unsorted lists, but the examples suggest sorted input. This could be misleading."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "cmd_run() docstring says 'Override or use this implementation' but the method creates Runtime and Interpreter which requires knowledge of internal structure",
        "affected_files": [
          "src/ui/visual.py"
        ],
        "details": "The docstring suggests this is a usable base implementation:\n\"Override or use this implementation:\n1. Create Runtime and Interpreter from ProgramManager\n2. Run the program\n3. Handle errors and display output\"\n\nHowever, the implementation imports 'create_local_limits' from 'resource_limits' module without showing the import at the top of the file, and uses internal attributes like 'self.program.line_asts' and 'self.program.lines' which may not be part of ProgramManager's public API. This makes it unclear if subclasses can actually 'use this implementation' as-is."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Class docstring mentions 'Use self.program for program management' but doesn't document what self.program is or its type",
        "affected_files": [
          "src/ui/visual.py"
        ],
        "details": "The docstring says:\n\"6. Use self.program for program management\"\n\nBut there's no documentation of what self.program is, its type (presumably ProgramManager based on __init__ parameter), or what methods are available. The __init__ method receives 'program_manager' parameter but doesn't show it being assigned to self.program."
      },
      {
        "severity": "low",
        "type": "code_vs_documentation",
        "description": "get_cursor_position() docstring says it returns placeholder but doesn't document that it's not actually functional",
        "affected_files": [
          "src/ui/web/codemirror5_editor.py"
        ],
        "details": "The method docstring says:\n\"Get current cursor position (placeholder implementation).\n\nReturns:\n    Dict with 'line' and 'column' keys (always returns {0, 0} - not implemented)\"\n\nWhile it does mention 'not implemented' in parentheses, the docstring format suggests this is a working method. The comment inside says:\n\"# This would need async support, for now return placeholder\"\n\nThis is inconsistent - a placeholder/unimplemented method should probably raise NotImplementedError or be more clearly marked as non-functional in the docstring."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about event args being dict conflicts with type hints suggesting string value",
        "affected_files": [
          "src/ui/web/codemirror5_editor.py"
        ],
        "details": "In the value property getter:\n\"if isinstance(self._value, dict):\n    # Sometimes event args are dict - return empty string\n    return ''\"\n\nBut the __init__ method shows:\n\"def _internal_change_handler(e):\n    self._value = e.args  # CodeMirror sends new value as args\"\n\nThe comment says 'CodeMirror sends new value as args' suggesting it should be a string, but then the property getter handles the case where it's a dict. This suggests either:\n1. The event handling is buggy and sometimes receives unexpected dict values\n2. The comment is wrong about what CodeMirror sends\n3. There's an undocumented edge case"
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says input handler 'already echoes the input with newline' but SimpleWebIOHandler.input() doesn't echo anything",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In SimpleWebIOHandler.input() method (lines 60-70):\nComment says: '# The inline input handler already echoes the input with newline\\n# So we don't need to echo it again here'\nBut the input() method code shows:\n```\ndef input(self, prompt=\"\"):\n    # Don't print prompt here - _enable_inline_input will add it\n    # Get input from UI (this will block until user enters input)\n    result = self.input_callback(prompt)\n    # The inline input handler already echoes the input with newline\n    # So we don't need to echo it again here\n    return result\n```\nThe method doesn't call self.output() to echo anything. The comment suggests echoing happens elsewhere (_enable_inline_input), but this creates confusion about where echoing actually occurs."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Docstring says 'Uses asyncio.Future for coordination' but no Future is visible in the code",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In SimpleWebIOHandler.input() docstring (lines 54-59):\n\"\"\"Get input from user via inline input field.\n\nUses asyncio.Future for coordination between synchronous interpreter\nand async web UI. The input field appears below the output pane,\nallowing users to see all previous output while typing.\n\"\"\"\nThe method implementation doesn't show any asyncio.Future usage:\n```\ndef input(self, prompt=\"\"):\n    result = self.input_callback(prompt)\n    return result\n```\nThe Future coordination likely happens inside input_callback, but the docstring makes it sound like it's in this method."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about 'Content change handlers via CodeMirror's on_change callback' is incomplete",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "At line 1046-1053:\n```\n# Content change handlers via CodeMirror's on_change callback\n# The _on_editor_change method (defined below) handles:\n# - Removing blank lines\n# - Auto-numbering\n# - Placeholder clearing\n\n# Click and blur handlers registered separately\nself.editor.on('click', self._on_editor_click, throttle=0.05)\nself.editor.on('blur', self._on_editor_blur)\n```\nThe comment says '_on_editor_change method (defined below)' but the method definition is not shown in the provided code snippet. This makes it impossible to verify if the listed behaviors are actually implemented."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Module docstring mentions 'Breakpoint support' but no breakpoint-related code is visible",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Class docstring (lines 906-922) lists features:\n\"Features:\n- Web-based interface accessible via browser\n- Modern, responsive design\n- Split-pane editor and output\n- Menu system\n- File management\n- Execution controls\n- Variables window\n- Breakpoint support\n\nBased on TK UI feature set (see docs/dev/TK_UI_FEATURE_AUDIT.md).\"\n\nThe 'Breakpoint support' feature is mentioned but no breakpoint-related methods, UI elements, or functionality is shown in the provided code. This could mean the feature is not yet implemented or the code is incomplete."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about 'Current line indicator' is incomplete/cut off",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "At line 1056, the code ends with:\n```\n# Current line indicator\n```\nThis comment appears to be incomplete as there's no code following it. The file seems to be truncated at this point, making it unclear what the current line indicator implementation looks like or if it exists."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Don't clear output' but earlier code in _menu_step_line and _menu_step_stmt calls _clear_output()",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In _menu_run():\n# Don't clear output - continuous scrolling like ASR33 teletype\nself._set_status('Running...')\n\nBut in _menu_step_line() and _menu_step_stmt():\n# Start execution\nself._clear_output()\n\nThis is inconsistent - stepping clears output but running doesn't."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment says 'Don't append prompt - interpreter already printed it' but this assumes interpreter behavior not shown in code",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In _execute_tick() and _handle_step_result():\nif not self.waiting_for_input:\n    self.waiting_for_input = True\n    self.input_prompt_text = state.input_prompt\n    # Don't append prompt - interpreter already printed it via io.output()\n\nThis comment assumes the interpreter has already output the prompt, but there's no visible code confirming this behavior. If the interpreter doesn't output the prompt, the user won't see it."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment about Ctrl+C handling describes implementation not visible in this code",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "In _execute_tick() docstring:\n\"\"\"Execute one tick of the interpreter.\n\nNote on Ctrl+C handling:\nThis method is called every 10ms by ui.timer(). During long-running programs,\nthis can make Ctrl+C unresponsive because Python signal handlers only run\nbetween bytecode instructions, and the event loop stays busy.\n\nThe KeyboardInterrupt handling is done at the top level in mbasic,\nwhich wraps start_web_ui() in a try/except.\n\"\"\"\n\nThis describes behavior in a different file (mbasic) that isn't shown. While informative, it's documenting external behavior rather than this method's behavior."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment in _save_editor_to_program mentions CP/M EOF markers but implementation is straightforward",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Comment at line ~1180:\n# Normalize line endings and remove CP/M EOF markers\n# \\r\\n -> \\n (Windows line endings)\n# \\r -> \\n (old Mac line endings)\n# \\x1a (Ctrl+Z, CP/M EOF marker)\n\nCode:\ntext = text.replace('\\r\\n', '\\n').replace('\\r', '\\n').replace('\\x1a', '')\n\nThe comment is accurate and helpful, no inconsistency. This is actually good documentation."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment in _on_editor_change describes paste detection heuristic but logic seems fragile",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Comment at line ~1270:\n# Detect paste: large content change (more than 1-2 chars difference from last tracked)\n# This helps clear auto-number prompts before paste content merges with them\n\nCode:\ncontent_diff = abs(len(current_text) - len(last_text))\nif content_diff > 5:\n    # Check if first line is just an auto-number prompt (e.g., '10 ')\n    lines = current_text.split('\\n')\n    if lines and re.match(r'^\\d+\\s+\\d+\\s+', lines[0]):\n\nThe comment says '>1-2 chars' but code checks '>5 chars'. Also, the regex pattern looks for double line numbers which is very specific. This might miss other paste scenarios."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment in _get_input says it returns empty string to signal interpreter, but behavior depends on interpreter implementation",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Comment at line ~1550:\n# Return empty string - signals interpreter to transition to 'waiting_for_input'\n# state (state transition happens in interpreter when it receives empty string\n# from input()). Execution pauses until _submit_input() calls provide_input().\n\nThis assumes specific interpreter behavior that isn't verified in this code. If the interpreter changes how it handles empty input, this will break. The comment should note this is a contract/assumption."
      },
      {
        "severity": "low",
        "type": "code_vs_comment",
        "description": "Comment in _flush_output_batch mentions 'running slowly' but no slow-running detection in code",
        "affected_files": [
          "src/ui/web/nicegui_backend.py"
        ],
        "details": "Comment at line ~1500:\n# Flush after 50ms of inactivity, or immediately if running slowly\n\nCode:\nself.output_batch_timer = ui.timer(0.05, self._flush_output_batch, once=True)\n\nThere's no 'running slowly' detection. The code always uses 50ms timer. The comment suggests conditional behavior that doesn't exist."
      },
      {
        "severity": "low",
        "type": "code_comment_conflict",
        "description": "Comment says 'Legacy class removed' but the deprecated class is still present in the file",
        "affected_files": [
          "src/ui/web_help_launcher.py"
        ],
        "details": "Line comment: '# Legacy class removed - using direct web URL instead'\nBut WebHelpLauncher_DEPRECATED class with full implementation follows immediately after"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "getting-started.md references UI-specific help paths that don't match the structure in index.md",
        "affected_files": [
          "docs/help/common/getting-started.md",
          "docs/help/common/index.md"
        ],
        "details": "getting-started.md: 'See your UI-specific help for how to type programs: [Curses UI](../ui/curses/editing.md)'\nBut index.md doesn't provide navigation to UI-specific sections, only lists common topics"
      },
      {
        "severity": "low",
        "type": "code_comment_conflict",
        "description": "Function docstring says it returns bool but doesn't document what True/False means in all cases",
        "affected_files": [
          "src/ui/web_help_launcher.py"
        ],
        "details": "open_help_in_browser() docstring: 'Returns: bool: True if browser opened successfully, False otherwise'\nBut the function returns webbrowser.open(url) result directly, and the code comments suggest uncertainty: 'sys.stderr.write(f\"webbrowser.open() returned: {result}\\n\")' - indicating the return value semantics may not be well understood"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "index.md says 'Code Generation Status: In Progress' but optimizations.md also has a 'Code Generation' section with same status",
        "affected_files": [
          "docs/help/common/compiler/index.md",
          "docs/help/common/compiler/optimizations.md"
        ],
        "details": "Both files have identical 'Code Generation Status: In Progress' sections, creating redundancy and potential for one to become outdated"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "debugging.md describes Variables Window editing features but doesn't explain what happens if you enter an invalid value",
        "affected_files": [
          "docs/help/common/debugging.md"
        ],
        "details": "Section 'Editing Variables' describes the UI for changing values in all three UIs but doesn't document error handling, validation, or what happens if you enter a string for an integer variable, etc."
      },
      {
        "severity": "low",
        "type": "code_comment_conflict",
        "description": "Docstring says 'Provides a NiceGUI dialog' but class name is WebSettingsDialog suggesting it might be more general",
        "affected_files": [
          "src/ui/web/web_settings_dialog.py"
        ],
        "details": "Module docstring: 'Web UI Settings Dialog for MBASIC\\n\\nProvides a NiceGUI dialog for viewing and modifying settings.'\nClass uses NiceGUI-specific imports and methods (ui.dialog, ui.card, etc.) so it's NiceGUI-specific, but the naming suggests it could be a general web dialog"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "ASCII table shows DEL (127) in two different locations",
        "affected_files": [
          "docs/help/common/language/appendices/ascii-codes.md"
        ],
        "details": "The ASCII codes documentation shows DEL (decimal 127, hex 7F) both:\n1. In the main printable characters table (32-126) at the end\n2. In a separate \"Special Character: DEL\" section\n\nThis is redundant and potentially confusing. DEL should either be in the printable table OR in its own section, not both."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Typo in See Also reference",
        "affected_files": [
          "docs/help/common/language/functions/cvi-cvs-cvd.md"
        ],
        "details": "In cvi-cvs-cvd.md See Also section:\n\"See also MKI$r MKS$, MKD$\"\n\nShould be \"MKI$, MKS$, MKD$\" (comma instead of 'r' after MKI$)"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Mathematical constants precision inconsistency",
        "affected_files": [
          "docs/help/common/language/appendices/math-functions.md"
        ],
        "details": "In math-functions.md Constants section:\n\"PI = 3.141592653589793   ' Use ATN(1) * 4 for pi\nE = 2.718281828459045    ' Use EXP(1) for e\"\n\nThe comment says to use ATN(1) * 4 for pi, but ATN(1) would give approximately 0.7854 (pi/4), so ATN(1) * 4 is correct. However, for E, the comment says \"Use EXP(1) for e\" which is circular - EXP(1) means e^1 = e, so this doesn't help calculate e."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent exponent notation examples",
        "affected_files": [
          "docs/help/common/language/data-types.md"
        ],
        "details": "In data-types.md DOUBLE Precision section:\n\"BIGNUM# = 1.23456789012345D+100\"\n\nThen in the note:\n\"Use D or E for exponent notation (e.g., 1.5D+10 or 1.5E+10)\"\n\nThis suggests D and E are interchangeable, but typically in BASIC-80, D is for double precision and E is for single precision. The documentation should clarify this distinction."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent description text in INKEY$ 'See Also' reference to itself",
        "affected_files": [
          "docs/help/common/language/functions/inkey_dollar.md",
          "docs/help/common/language/functions/inp.md"
        ],
        "details": "In inp.md, the 'See Also' link to INKEY$ has description: 'Returns either a one-character string cont~ining a character read from the terminal...' with a typo 'cont~ining' instead of 'containing'. This appears to be a copy-paste error with a tilde character corruption."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting in INT documentation",
        "affected_files": [
          "docs/help/common/language/functions/int.md"
        ],
        "details": "The INT examples show:\n'PRINT INT(99.89)\\n 99\\nOk\\n\\nPRINT INT(-12.11)\\n -13\\nOk'\nwith inconsistent spacing and 'Ok' placement compared to other function documentation examples."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting in LEFT$ documentation",
        "affected_files": [
          "docs/help/common/language/functions/left_dollar.md"
        ],
        "details": "The LEFT$ example shows:\n'10 A$ = \"BASIC-80\"\\n 20 B$ = LEFT$(A$,5)\\n 30 PRINT B$\\n BASIC\\n Ok'\nwith leading spaces before line numbers that are inconsistent with other documentation."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting in LEN documentation",
        "affected_files": [
          "docs/help/common/language/functions/len.md"
        ],
        "details": "The LEN example shows:\n'10 X$ = \"PORTLAND, OREGON\"\\n 20 PRINT LEN (X$)\\n 16\\n Ok'\nwith leading spaces that differ from other examples."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting in LOG documentation",
        "affected_files": [
          "docs/help/common/language/functions/log.md"
        ],
        "details": "The LOG example shows:\n'PRINT LOG ( 45/7 )\\n 1.86075\\nOk'\nwithout line numbers, unlike most other function examples."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete and fragmented documentation in MKI$/MKS$/MKD$ file",
        "affected_files": [
          "docs/help/common/language/functions/mki_dollar-mks_dollar-mkd_dollar.md"
        ],
        "details": "The MKI$/MKS$/MKD$ documentation contains fragmented text:\n'90 AMT= (K+T)\\n 100 FIELD #1, 8 AS D$, 20 AS N$\\n 110 LSET D$ = MKS$(AMT)\\n 120 LSET N$ = A$\\n 130 PUT #1\\n See also CVI, CVS, CVD, Section 3.9 and Appendix\\n B.\\n 3.27 OCT$\\nPRINT OCT$ (24)\\n 30\\n Ok\\n See the HEX $ function for hexadecimal\\n conversion.\\n3.2S PEEK\\nA=PEEK (&H5AOO)'\nThis appears to be corrupted with multiple function descriptions merged together."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting in OCT$ documentation",
        "affected_files": [
          "docs/help/common/language/functions/oct_dollar.md"
        ],
        "details": "The OCT$ documentation has two separate examples with different formatting styles, and the second example doesn't show the 'Ok' prompt consistently."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting in RIGHT$ documentation",
        "affected_files": [
          "docs/help/common/language/functions/right_dollar.md"
        ],
        "details": "The RIGHT$ example shows:\n'10 A$=\"DISK BASIC-80\"\\n 20 PRINT RIGHT$(A$,8)\\n RUN\\n BASIC-80\\n Ok'\nwith leading spaces before line numbers."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting in RND documentation",
        "affected_files": [
          "docs/help/common/language/functions/rnd.md"
        ],
        "details": "The RND example shows:\n'10 FOR I=l TO 5\\n 20 PRINT INT(RND*100);\\n 30 NEXT\\n RUN\\n 24 30 31 51 5\\n Ok'\nwith 'I=l' using lowercase 'l' instead of '1', which could be confusing."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete example in SGN documentation",
        "affected_files": [
          "docs/help/common/language/functions/sgn.md"
        ],
        "details": "The SGN example shows:\n'ON SGN(X)+2 GOTO 100,200,300 branches to 100 if\\n X is negative, 200 if X is 0 and 300 if X is\\n positive.'\nThis is descriptive text mixed with code, not a proper runnable example like other functions."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting in SIN documentation",
        "affected_files": [
          "docs/help/common/language/functions/sin.md"
        ],
        "details": "The SIN example shows:\n'PRINT SIN(1.5)\\n .997495\\n Ok'\nwithout line numbers, unlike most other function examples."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent example formatting in SQR documentation",
        "affected_files": [
          "docs/help/common/language/functions/sqr.md"
        ],
        "details": "The SQR example shows:\n'10 FOR X = 10 TO 25 STEP 5\\n 20 PRINT X, SQR(X)\\n 30 NEXT\\n RUN\\n 10 3.16228\\n 15 3.87298\\n 20 4.47214\\n 25 5\\n Ok'\nwith leading spaces before line numbers."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete example in STR$ documentation",
        "affected_files": [
          "docs/help/common/language/functions/str_dollar.md"
        ],
        "details": "The STR$ example shows:\n'5 REM ARITHMETIC FOR KIDS\\n 10 INPUT \"TYPE A NUMBER\";N\\n 20 ON LEN(STR$(N» GOSUB 30,100,200,300,400,500\\n Also see the VAL function.'\nThe example is incomplete (no subroutines shown) and has a double closing parenthesis '»' which appears to be a formatting error."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Typo in TAN documentation description",
        "affected_files": [
          "docs/help/common/language/functions/tan.md"
        ],
        "details": "The TAN description contains 'TAN (X) is calculated in single preclslon.' with 'preclslon' misspelled (should be 'precision')."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete example in USR documentation",
        "affected_files": [
          "docs/help/common/language/functions/usr.md"
        ],
        "details": "The USR example shows:\n'40 B = T*SIN (Y)\\n 50 C = USR (B/2)\\n 60 D = USR(B/3)'\nwith leading spaces before line numbers and starting at line 40, suggesting it's a fragment of a larger program."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Typo in VAL function example - missing closing parenthesis",
        "affected_files": [
          "docs/help/common/language/functions/val.md"
        ],
        "details": "In the Description section, the example text reads:\n\"For example, VAL (\" -3) returns -3.\"\n\nShould be:\n\"For example, VAL (\" -3\") returns -3.\"\n\nThe closing quote and parenthesis are missing."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete example code in VAL function documentation",
        "affected_files": [
          "docs/help/common/language/functions/val.md"
        ],
        "details": "The Example section contains incomplete BASIC code:\n\n```basic\n10 READ NAME$,CITY$,STATE$,ZIP$\n 20 IF VAL(ZIP$) <90000 OR VAL(ZIP$) >96699 THEN\n PRINT NAME$ TAB(25) \"OUT OF STATE\"\n 30 IF VAL(ZIP$) >=90801 AND VAL(ZIP$) <=90815 THEN\n PRINT NAME$ TAB(25) \"LONG BEACH\"\n See the STR$ function for numeric to string\n conversion.\n```\n\nIssues:\n1. Line 20 THEN statement is incomplete (no line number or statement)\n2. Line 30 THEN statement is incomplete\n3. The text \"See the STR$ function...\" appears to be documentation mixed into the code example\n4. Missing line numbers for continuation\n5. Inconsistent indentation"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent spacing guidance in DEF FN documentation",
        "affected_files": [
          "docs/help/common/language/statements/def-fn.md"
        ],
        "details": "The DEF FN documentation provides conflicting guidance about spacing:\n\nIn the Syntax section, it shows:\n\"Alternative forms (all valid):\"\nDEF FN<name> [(<parameter list>)] = <function definition>  ' With spaces\nDEF FN<name>(<parameter list>)=<function definition>       ' Without spaces\n\nBut then in the \"Spacing\" subsection under \"Syntax Notes\", it states:\n\"Space after FN is optional. Both styles are valid:\"\n- `DEF FN A(X) = X * 2` - with space after FN (FN and A are separate)\n- `DEF FNA(X) = X * 2` - without space after FN (FNA is one token)\n\nThe first example shows spacing around the equals sign and parameters, while the second focuses only on the space after FN. The documentation should clarify that multiple spacing variations are acceptable (after FN, around =, around parameters)."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Formatting error in CLOAD documentation title",
        "affected_files": [
          "docs/help/common/language/statements/cload.md"
        ],
        "details": "The title contains inconsistent spacing:\n\"CLOAD     THIS COMMAND IS NOT INCLUDED IN THE DEC VT180 VERSION\"\n\nShould be:\n\"CLOAD - THIS COMMAND IS NOT INCLUDED IN THE DEC VT180 VERSION\"\n\nor use consistent spacing throughout."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Formatting error in CSAVE documentation title",
        "affected_files": [
          "docs/help/common/language/statements/csave.md"
        ],
        "details": "The title contains inconsistent spacing:\n\"CSAVE      THIS COMMAND IS NOT INCLUDED IN THE DEC VT180 VERSION\"\n\nShould match the formatting used in other similar warnings."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete example in CLOSE documentation",
        "affected_files": [
          "docs/help/common/language/statements/close.md"
        ],
        "details": "The Example section states:\n\"See PART II, Chapter 3, MBASIC       Disk\n              I/O, of the MBASIC User's Guide.\"\n\nThis is a reference to external documentation rather than an actual example. The documentation should either:\n1. Provide a concrete example of CLOSE usage\n2. Remove the Example section if no example is available\n3. Provide a more helpful reference"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent spacing in AUTO example",
        "affected_files": [
          "docs/help/common/language/statements/auto.md"
        ],
        "details": "The Example section shows:\n```basic\nAUTO 100,50      Generates line numbers 100,\n                              150, 200 •••\n             AUTO             Generates line numbers 10,\n                              20,30,40 •••\n```\n\nThe indentation and spacing are inconsistent. The second AUTO command has excessive leading spaces, and the continuation lines have irregular indentation."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Unclear example formatting in CLEAR documentation",
        "affected_files": [
          "docs/help/common/language/statements/clear.md"
        ],
        "details": "The Example section shows:\n```basic\nCLEAR\n                CLEAR ,32768\n                CLEAR ,,2000\n                CLEAR ,32768,2000\n```\n\nThe excessive indentation before the last three examples is inconsistent and unclear. These should either:\n1. Be formatted consistently with no indentation\n2. Include explanatory comments about what each does\n3. Be presented as a proper numbered list"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent spacing in DELETE example",
        "affected_files": [
          "docs/help/common/language/statements/delete.md"
        ],
        "details": "The Example section shows:\n```basic\nDELETE 40         Deletes line 40\n                DELETE 40-100     Deletes lines 40 through\n                                  100, inclusive\n                DELETE-40         Deletes all lines up to\n                                  and including line 40\n```\n\nThe indentation is inconsistent - the first example has no leading spaces, while the second and third have excessive leading spaces."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent spacing in CSAVE example",
        "affected_files": [
          "docs/help/common/language/statements/csave.md"
        ],
        "details": "The Example section shows:\n```basic\nCSAVE \"TIMER\"\n                Saves the program currently in memory on\n                cassette under filename \"T\".\n```\n\nThe explanation has excessive leading spaces and should be formatted as a comment or separate description."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "ERASE documentation has incomplete syntax specification",
        "affected_files": [
          "docs/help/common/language/statements/erase.md"
        ],
        "details": "Syntax shows: 'ERASE <list of array variables>'\n\nBut the example shows: '450 ERASE A,B'\n\nThe syntax should clarify the format of the list (comma-separated) like: 'ERASE <array>[,<array>...]'"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "FIELD documentation has inconsistent file number syntax",
        "affected_files": [
          "docs/help/common/language/statements/field.md"
        ],
        "details": "Syntax shows: 'FIELD [#]<file number>'\n\nExample shows: 'FIELD #1, 30 AS NAME$'\n\nThe syntax should clarify multiple field definitions like: 'FIELD [#]<file number>,<field width> AS <string variable>[,<field width> AS <string variable>...]'"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "FOR...NEXT loop execution behavior description is incorrect",
        "affected_files": [
          "docs/help/common/language/statements/for-next.md"
        ],
        "details": "Documentation states: 'Loop always executes at least once if start equals end'\n\nThis is incorrect for standard BASIC behavior. If start > end (with positive STEP) or start < end (with negative STEP), the loop body should not execute at all. The condition is checked before the first iteration."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "GOSUB documentation syntax is incomplete",
        "affected_files": [
          "docs/help/common/language/statements/gosub-return.md"
        ],
        "details": "Syntax shows:\n'GOSUB <line number>'\n'RETURN'\n\nBut doesn't show they must be on separate lines or that RETURN can optionally specify a line number in some BASIC variants. The relationship between the two statements could be clearer."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "GOTO example output formatting is unclear",
        "affected_files": [
          "docs/help/common/language/statements/goto.md"
        ],
        "details": "Example shows output with unusual formatting:\n'R = 5                AREA = 7S.5'\n\nThe spacing and the 'S' in '7S.5' (should be '75.5') appears to be a typo. Also 'l53.S6' should be '153.86'."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "INPUT statement semicolon behavior description is confusing",
        "affected_files": [
          "docs/help/common/language/statements/input.md"
        ],
        "details": "Documentation mentions two different uses of semicolon:\n1. 'The semicolon after INPUT suppresses the carriage return after the user presses Enter'\n2. 'A semicolon after the prompt string causes the prompt to be displayed without a question mark'\n\nThe syntax 'INPUT[:] [<\"prompt string\">:]' uses colons in the syntax description but discusses semicolons in remarks. This is confusing."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "LINE INPUT# example has formatting issues",
        "affected_files": [
          "docs/help/common/language/statements/inputi.md"
        ],
        "details": "Example code shows:\n'10 OPEN \"O\",l,\"LIST\"'\n'20 LINE INPUT \"CUSTOMER INFORMATION? \" :C$'\n\nInconsistent use of 'l' vs '1' for file number, and unusual spacing in the LINE INPUT statement with space before colon."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "LET example has formatting issues",
        "affected_files": [
          "docs/help/common/language/statements/let.md"
        ],
        "details": "Example shows:\n'120 LET E=12A2'\n'130 LET F=12A4'\n\nShould use exponentiation operator: '12^2' and '12^4' or '12**2' and '12**4', not 'A'."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "LIST documentation has unclear formatting and version differences",
        "affected_files": [
          "docs/help/common/language/statements/list.md"
        ],
        "details": "Documentation shows:\n'Format 2:     LIST [<line number>[-[<line number>]]] Extended, Disk'\n\nThe version information 'Extended, Disk' appears to be part of the syntax line rather than a separate version note. Formatting is confusing."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "LOAD documentation uses inconsistent quote characters",
        "affected_files": [
          "docs/help/common/language/statements/load.md"
        ],
        "details": "Remarks section uses 'nRn' with straight quotes in some places:\n'if the nRn option is used'\n\nBut example shows: 'LOAD nSTRTRKn,R'\n\nShould consistently use either straight quotes or explain the 'n' prefix notation."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Index has inconsistent command name formatting",
        "affected_files": [
          "docs/help/common/language/statements/index.md"
        ],
        "details": "Some entries use spaces in names:\n- 'ERR and ERL' (lowercase 'and')\n- 'DEFINT/SNG/DBL/STR' (slashes)\n- 'FOR...NEXT' (ellipsis)\n- 'IF...THEN...ELSE/IF...GOTO' (mixed ellipsis and slash)\n\nInconsistent formatting makes it harder to know the actual command syntax."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "MERGE documentation has spacing issues",
        "affected_files": [
          "docs/help/common/language/statements/merge.md"
        ],
        "details": "Text contains irregular spacing:\n'BASIC-80 always returns to command   level     after executing a MERGE command.'\n\nExtra spaces between 'command' and 'level'."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "MID$ assignment documentation has incorrect 'related' reference",
        "affected_files": [
          "docs/help/common/language/statements/mid-assignment.md"
        ],
        "details": "The 'related' field lists 'mid_dollar' but should list 'mid-dollar' to match the actual function documentation filename pattern. The See Also section correctly references MID$ as a function."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "NAME statement example formatting is inconsistent",
        "affected_files": [
          "docs/help/common/language/statements/name.md"
        ],
        "details": "The example section shows:\n```basic\nOk\n              NAME \"ACCTS\" AS \"LEDGER\"\n              Ok\n              In this example, the file that was\n              formerly named ACCTS will now be named LEDGER.\n```\nThis mixes code and explanation in an unusual format with excessive indentation. Other docs separate code examples from explanatory text more clearly."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "NULL statement example has inconsistent formatting",
        "affected_files": [
          "docs/help/common/language/statements/null.md"
        ],
        "details": "Example shows:\n```basic\nOk\n              NULL 2\n              Ok\n              100 INPUT X\n              200 IF X<50 GOTO 800\n              Two null characters will be printed after each\n              line.\n```\nMixes direct mode commands with program lines and explanation text in a confusing way."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "OPTION BASE example comment is misleading",
        "affected_files": [
          "docs/help/common/language/statements/option-base.md"
        ],
        "details": "The comment states 'Without OPTION BASE 1, the array would have elements A(0) through A(10)' but this is only true if DIM A(10) is used. The actual behavior depends on whether OPTION BASE is set before the DIM statement."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "RANDOMIZE example has excessive whitespace in output",
        "affected_files": [
          "docs/help/common/language/statements/randomize.md"
        ],
        "details": "The example output shows inconsistent spacing:\n'Random Number Seed (-32768    to 32767)? 3'\nwith multiple spaces between 'to' and '32767'. This appears to be a formatting artifact rather than actual output."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "READ documentation has incomplete remarks about array elements",
        "affected_files": [
          "docs/help/common/language/statements/read.md"
        ],
        "details": "States 'Array elements must be dimensioned before being referenced in a READ statement' but doesn't mention that simple variables in arrays with default dimensions (10 elements) don't require explicit DIM statements."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "REM example has inconsistent line numbering",
        "affected_files": [
          "docs/help/common/language/statements/rem.md"
        ],
        "details": "Example shows:\n'120 REM CALCULATE AVERAGE VELOCITY\n130 FOR I=1 TO 20\n140 SUM=SUM + V(I)'\n\nThen shows alternative:\n'120 FOR I=l TO 20     'CALCULATE   AVERAGE VELOCITY\n130 SUM=SUM+V(I)\n140 NEXT I'\n\nThe line numbers don't align (120/130/140 vs 120/130/140) and the second version has 'I=l' (lowercase L) instead of 'I=1'."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "RESUME documentation references non-existent error.md file",
        "affected_files": [
          "docs/help/common/language/statements/resume.md"
        ],
        "details": "See Also section references 'error.md' but the actual file might be named differently (e.g., 'error-statement.md'). Cross-references should use consistent naming."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "SAVE documentation has unclear CP/M-specific note",
        "affected_files": [
          "docs/help/common/language/statements/save.md"
        ],
        "details": "States '(With CP/M, the default extension .BAS is supplied.)' but doesn't clarify if this applies to all versions or only CP/M. Modern implementations may have different default behavior."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Implementation notes formatting inconsistency",
        "affected_files": [
          "docs/help/common/language/statements/poke.md",
          "docs/help/common/language/statements/out.md"
        ],
        "details": "POKE uses '⚠️ **Emulated as No-Op**' while OUT uses '⚠️ **Not Implemented**'. These should use consistent terminology and formatting for similar situations (both are hardware access features that can't be implemented)."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "SHOWSETTINGS references LIMITS statement that is not documented",
        "affected_files": [
          "docs/help/common/language/statements/showsettings.md",
          "docs/help/common/settings.md"
        ],
        "details": "showsettings.md See Also section includes '[LIMITS](limits.md) - Display resource usage and interpreter limits' but no limits.md file is provided in the documentation set."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "WIDTH documentation claims 'WIDTH LPRINT' syntax is not supported but doesn't clarify if this is a parse error or silent ignore",
        "affected_files": [
          "docs/help/common/language/statements/width.md"
        ],
        "details": "width.md states 'Limitations: The \"WIDTH LPRINT\" syntax is not supported (parse error). Only the simple \"WIDTH <number>\" form is accepted.' This conflicts with the general implementation note that says 'Statement executes successfully without errors' - unclear if LPRINT variant causes parse error or is silently ignored."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent cross-references in See Also sections",
        "affected_files": [
          "docs/help/common/language/statements/stop.md",
          "docs/help/common/language/statements/system.md"
        ],
        "details": "stop.md See Also includes SYSTEM but system.md See Also includes STOP. However, stop.md references system.md as 'Exit MBASIC and return to the operating system' while system.md references stop.md as 'To terminate program execution and return to command level' - these describe different behaviors (exiting interpreter vs pausing program)."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent file naming and cross-references for WRITE variants",
        "affected_files": [
          "docs/help/common/language/statements/write.md",
          "docs/help/common/language/statements/writei.md"
        ],
        "details": "write.md is titled 'WRITE (Screen)' and writei.md is titled 'WRITE# (File)'. The cross-references use different formats:\n- write.md references 'WRITE#' as writei.md\n- writei.md references 'WRITE' as write.md\nThe '#' symbol in filenames vs titles is inconsistent (writei.md vs WRITE#)."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Tk interface keyboard shortcuts differ from general shortcuts documentation",
        "affected_files": [
          "docs/help/common/ui/tk/index.md",
          "docs/help/common/shortcuts.md"
        ],
        "details": "tk/index.md documents Ctrl+Break for stopping programs, while shortcuts.md doesn't mention this. Additionally, tk/index.md shows F1 for help while shortcuts.md shows Ctrl+P. These may be UI-specific differences but should be clarified."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Broken link reference in main index",
        "affected_files": [
          "docs/help/index.md",
          "docs/help/mbasic/getting-started.md"
        ],
        "details": "index.md references '[Getting Started](mbasic/getting-started.md)' in the 'About MBASIC 5.21' section, but the actual path shown in the documentation set is 'docs/help/common/getting-started.md' not 'docs/help/mbasic/getting-started.md'."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "TRON-TROFF See Also section has incomplete cross-references",
        "affected_files": [
          "docs/help/common/language/statements/tron-troff.md"
        ],
        "details": "tron-troff.md references 'ON ERROR GOTO' with link [ON ERROR GOTO](on-error-goto.md) but the actual file naming convention in other docs uses lowercase with hyphens. Should verify if this link target exists and matches naming convention."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "SWAP See Also section has incomplete reference format",
        "affected_files": [
          "docs/help/common/language/statements/swap.md"
        ],
        "details": "swap.md See Also section has: '[LET](let.md) - To assign     the   value   of   an   expression   to   a variable' with excessive spacing in the description, suggesting copy-paste error or formatting issue."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Different counts of optimizations in semantic analyzer",
        "affected_files": [
          "docs/help/mbasic/architecture.md",
          "docs/help/mbasic/features.md"
        ],
        "details": "architecture.md states: \"The semantic analyzer implements **18 distinct optimizations**\" and lists all 18.\n\nfeatures.md states: \"The interpreter includes an advanced semantic analyzer with 18 optimizations\" and also lists all 18.\n\nWhile both documents agree on the count (18), the lists should be verified to ensure they're identical and in the same order for consistency."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Installation instructions reference non-existent repository",
        "affected_files": [
          "docs/help/mbasic/getting-started.md"
        ],
        "details": "getting-started.md provides installation instructions:\n\"# Clone the repository\ngit clone https://github.com/avwohl/mbasic.git\ncd mbasic\"\n\nThis appears to be a placeholder URL. The actual repository URL should be verified and updated, or this should be noted as an example."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent description of Web UI debugging capabilities",
        "affected_files": [
          "docs/help/mbasic/features.md",
          "docs/help/mbasic/extensions.md"
        ],
        "details": "features.md states about Web UI: \"**Basic debugging** - Simple breakpoint support via menu\"\n\nextensions.md does not mention Web UI debugging capabilities at all in its debugging commands section, only listing CLI, Curses, and Tk.\n\nIf Web UI has basic debugging support, it should be documented in the extensions guide alongside the other UIs."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Different keyboard shortcuts documented for Step functionality",
        "affected_files": [
          "docs/help/ui/curses/feature-reference.md",
          "docs/help/ui/cli/debugging.md"
        ],
        "details": "curses/feature-reference.md documents 'Step Statement (Ctrl+T)' and 'Step Line (Ctrl+K)' as separate features. However, cli/debugging.md only documents 'STEP [n]' command with no mention of separate statement vs line stepping, and notes 'STEP INTO/OVER not yet implemented (use STEP)'. This suggests the Curses UI has more advanced stepping features than CLI, but the distinction between statement and line stepping is not explained in the CLI docs."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent keyboard shortcut usage explanation",
        "affected_files": [
          "docs/help/ui/curses/feature-reference.md"
        ],
        "details": "curses/feature-reference.md states 'Cut/Copy/Paste (Not implemented)' and explains 'Note: Ctrl+X is used for Stop/Interrupt, Ctrl+C exits the program, and Ctrl+V is used for Save.' However, earlier in the same document under 'Save File (Ctrl+V)' it states 'Note: Uses Ctrl+V because Ctrl+S is reserved for terminal flow control.' This is consistent, but the Cut/Copy/Paste section also says 'Use your terminal's native copy/paste functions instead (typically Shift+Ctrl+C/V or mouse selection)' which suggests Shift+Ctrl+V might conflict with the documented Shift+Ctrl+V for Save As."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Ambiguous feature count claim",
        "affected_files": [
          "docs/help/ui/curses/feature-reference.md"
        ],
        "details": "curses/feature-reference.md title states 'This document covers all 36 features available in the Curses UI' but when counting the documented features: File Operations (8) + Execution & Control (6) + Debugging (6) + Variable Inspection (6) + Editor Features (6) + Help System (4) = 36 features. However, some items like 'Cut/Copy/Paste (Not implemented)' and 'Find/Replace (Not yet implemented)' are counted as features despite not being implemented. This inflates the feature count."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent documentation of line deletion methods",
        "affected_files": [
          "docs/help/ui/curses/feature-reference.md",
          "docs/help/ui/curses/editing.md"
        ],
        "details": "curses/feature-reference.md documents 'Delete Lines (Ctrl+D)' as a file operation feature. However, curses/editing.md documents a different method: 'To delete a line: 1. Navigate to the line 2. Delete all text after the line number 3. Press Enter' or 'type just the line number: Type: 10, Press Enter → Line 10 deleted'. No mention of Ctrl+D in the editing guide."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Placeholder documentation marked as in progress",
        "affected_files": [
          "docs/help/ui/common/running.md"
        ],
        "details": "running.md is marked as 'PLACEHOLDER - Documentation in progress' and states 'This page will cover: How to run BASIC programs, RUN command, Program execution, Stopping programs, Continuing after STOP'. This is incomplete documentation that should be finished or removed."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Menu-only features not explained",
        "affected_files": [
          "docs/help/ui/curses/feature-reference.md"
        ],
        "details": "curses/feature-reference.md mentions several features as 'Menu only' including 'List Program (Menu only)' and 'Execution Stack (Menu only)' but provides no information about how to access the menu bar, what key opens it, or how to navigate it. Users are told these features exist but not how to use them."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Quit key inconsistency",
        "affected_files": [
          "docs/help/ui/curses/quick-reference.md",
          "docs/help/ui/curses/getting-started.md"
        ],
        "details": "quick-reference.md lists: '**Ctrl+Q** | Quit' under Global Commands.\n\nBut getting-started.md lists: '**Q** - Quit' in the Essential Keys section (without Ctrl modifier).\n\nThese are different keys - one requires Ctrl, the other doesn't."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Default UI startup command inconsistency",
        "affected_files": [
          "docs/help/ui/tk/getting-started.md",
          "docs/help/ui/index.md"
        ],
        "details": "tk/getting-started.md states:\n'```bash\nmbasic --ui tk [filename.bas]\n```\n\nOr to use the default curses UI:\n```bash\nmbasic [filename.bas]\n```'\n\nThis implies curses is the default. However, ui/index.md under Curses UI section states:\n'```bash\nmbasic                # Default UI\nmbasic --ui curses\n```'\n\nBoth documents agree curses is default, but the tk/getting-started.md phrasing 'Or to use the default curses UI' in a Tk getting started guide is confusing."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Referenced file not provided",
        "affected_files": [
          "docs/help/ui/tk/tips.md",
          "docs/help/ui/tk/index.md"
        ],
        "details": "tk/index.md references: '[Tips & Tricks](tips.md) - Best practices and productivity tips'\n\nBut the tips.md file for the Tk UI is not included in the provided documentation set. This is a broken link."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Tips document references Ctrl+I for Smart Insert but workflows document doesn't mention this feature",
        "affected_files": [
          "docs/help/ui/tk/tips.md",
          "docs/help/ui/tk/workflows.md"
        ],
        "details": "tips.md extensively uses Smart Insert:\n'Use Ctrl+I (Smart Insert) to add details under each section without calculating line numbers!'\n'Add comments with Ctrl+I (Smart Insert).'\n\nworkflows.md mentions it once:\n'2. Press Ctrl+I (Smart Insert) to insert blank line'\n\nBut workflows.md doesn't explain what Smart Insert does or how it differs from just pressing Enter. This could confuse users following the workflow guide."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Settings persistence location differs between Tk and Web but Web doc doesn't clearly explain localStorage limitations",
        "affected_files": [
          "docs/help/ui/tk/settings.md",
          "docs/help/ui/web/settings.md"
        ],
        "details": "Tk settings.md clearly states:\n'Location:\n- Linux/Mac: ~/.mbasic/settings.json\n- Windows: %APPDATA%\\mbasic\\settings.json'\n\nWeb settings.md mentions localStorage but buries important limitations:\n'Settings are per-browser, per-domain\nClearing browser data clears settings\nSettings don't sync across devices/browsers\nNot shared with CLI/desktop versions'\n\nThis should be more prominent since it's a significant difference from Tk's persistent file storage."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Workflows suggest using Ctrl+R to run without saving, but tips warn against this",
        "affected_files": [
          "docs/help/ui/tk/workflows.md",
          "docs/help/ui/tk/tips.md"
        ],
        "details": "workflows.md states:\n'Fastest workflow:\n```\nType → Ctrl+R (Run) → Check → Edit → Ctrl+R (Run) → Check → ...\n```\nNo need to save between test runs! Save with Ctrl+S only when satisfied.'\n\nBut tips.md warns:\n'Common Mistakes to Avoid\n❌ Running without saving → Save often with Ctrl+S'\n\nThese contradict each other about when to save during development."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent terminology for loading files in web UI",
        "affected_files": [
          "docs/help/ui/web/web-interface.md",
          "docs/library/*/index.md"
        ],
        "details": "web-interface.md uses:\n'Load a .bas file from your computer (via browser file picker)'\n\nlibrary docs use:\n'Click File → Open, select the downloaded file using browser file picker'\n\nBoth describe same action but use different menu names: 'Open' vs 'Load'"
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Library statistics count mismatch",
        "affected_files": [
          "docs/library/index.md",
          "docs/library/*/index.md"
        ],
        "details": "docs/library/index.md states:\n'Total Programs: 114+'\n\nBut counting all programs listed in category index files:\n- Games: 141 programs\n- Utilities: 18 programs\n- Education: 3 programs\n- Business: 8 programs\n- Electronics: 13 programs\n- Ham Radio: 7 programs\n- Data Management: 5 programs\n- Telecommunications: 5 programs\n- Demos: 5 programs\nTotal: 205 programs\n\nThe '114+' count is significantly lower than actual count."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Category count mismatch in library statistics",
        "affected_files": [
          "docs/library/index.md"
        ],
        "details": "Library index states:\n'Categories: 9'\n\nBut lists 9 categories in the page. This is actually consistent, but the phrasing 'Categories: 9' appears after listing all 9, making it redundant rather than a summary."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Settings dialog mentioned but not documented in menu sections",
        "affected_files": [
          "docs/help/ui/web/web-interface.md"
        ],
        "details": "web-interface.md Auto-Numbering section mentions:\n'Use the Settings dialog (⚙️ icon) to change the increment or disable auto-numbering entirely'\n\nBut the Menu Functions section does not list a Settings menu or ⚙️ icon option. Users won't know where to find this feature."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Malformed program entry in utilities index",
        "affected_files": [
          "docs/library/utilities/index.md"
        ],
        "details": "One entry shows:\n'### Remarks:  This program will con\n\n**Year:** 1980s\n**Tags:** \n\n**[Download hex2data.bas](hex2data.bas)**'\n\nThe title 'Remarks: This program will con' appears to be truncated program comments rather than a proper title. Should likely be '### Hex2data' or similar."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent program entry formatting",
        "affected_files": [
          "docs/library/utilities/index.md"
        ],
        "details": "Most entries have format:\n'### ProgramName\n\n**Year:** 1980s\n**Tags:**'\n\nBut some have additional fields:\n'### Survival\n\n**Author:** R Logan & Ian Lycholm CBASIC 2 VER\n**Year:** 1982'\n\n'### Un-Prot\n\nFixup for ** UN.COM **\n\n**Year:** 1980s'\n\n'### Xextract\n\n0 -->END PAGE / 1-20 -->EXTRACT ITEM / 21 -->RESTART'\n\nInconsistent metadata structure across entries."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Duplicate calendar program in games and utilities",
        "affected_files": [
          "docs/library/games/index.md"
        ],
        "details": "Calendar.bas appears in both:\n- docs/library/games/index.md\n- docs/library/utilities/index.md\n\nSame filename, same year (1980s). Unclear if this is intentional (same program in multiple categories) or an error."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent UI name capitalization",
        "affected_files": [
          "docs/user/CHOOSING_YOUR_UI.md",
          "docs/user/QUICK_REFERENCE.md"
        ],
        "details": "CHOOSING_YOUR_UI.md uses 'Curses' (capitalized) throughout, while QUICK_REFERENCE.md title uses 'MBASIC Curses IDE' but the filename and other references use lowercase 'curses'. The command line flag is '--ui curses' (lowercase) in both documents."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent mouse support indicators",
        "affected_files": [
          "docs/user/CHOOSING_YOUR_UI.md"
        ],
        "details": "In the Decision Matrix table, Curses UI shows mouse support as '⚠️' (warning/partial), but in the 'Unique advantages' section for Curses, it lists 'Limited mouse support' as a limitation. The CLI section says 'No mouse support' with ❌. The distinction between 'limited' (⚠️) and 'no' (❌) mouse support is unclear."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent feature availability timeline",
        "affected_files": [
          "docs/user/CHOOSING_YOUR_UI.md"
        ],
        "details": "The document states 'Which UI gets new features first?' with an ordered list (Tk, Web, Curses, CLI), but earlier states that Curses has 'No Find/Replace yet' implying it's planned, while the Tk section shows Find/Replace as already available. The timeline for when features move between UIs is unclear."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Missing file references in examples",
        "affected_files": [
          "docs/user/QUICK_REFERENCE.md"
        ],
        "details": "QUICK_REFERENCE.md references example files 'test_continue.bas', 'demo_continue.bas', and 'test_continue_manual.sh' but these files are not provided and their location is not specified. Also references multiple .md files (DEBUGGER_COMMANDS.md, CONTINUE_FEATURE.md, BREAKPOINT_SUMMARY.md, HELP_SYSTEM_SUMMARY.md) that are not in the provided documentation."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent Python command usage",
        "affected_files": [
          "docs/user/INSTALL.md"
        ],
        "details": "INSTALL.md uses 'python3' throughout most examples but then suggests 'Try using python instead of python3' in troubleshooting. The guide should be consistent about which command to use or clearly explain when to use each."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete directory description",
        "affected_files": [
          "docs/user/README.md"
        ],
        "details": "README.md states this directory contains 'Installation guides' (plural) but only lists QUICK_REFERENCE.md, URWID_UI.md, and FILE_FORMAT_COMPATIBILITY.md. It doesn't mention INSTALL.md, INSTALLATION.md, CHOOSING_YOUR_UI.md, or SETTINGS_AND_CONFIGURATION.md which are all present in the same directory."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent documentation of Variables window shortcut",
        "affected_files": [
          "docs/user/TK_UI_QUICK_START.md",
          "docs/user/keyboard-shortcuts.md"
        ],
        "details": "TK_UI_QUICK_START.md documents two different shortcuts for Variables window:\n| **Ctrl+V** | Show/hide Variables window |\n| **Ctrl+W** | Show/hide Variables & Resources window |\n\nkeyboard-shortcuts.md (Curses) documents:\n| `Ctrl+W` | Toggle variables watch window |\n\nUI_FEATURE_COMPARISON.md shows:\n| **Variables** | WATCH | Ctrl+W | Ctrl+V | Ctrl+Alt+V |\n\nThis suggests Ctrl+V is Tk-specific and Ctrl+W is Curses-specific, but TK_UI_QUICK_START.md lists both Ctrl+V and Ctrl+W for Tk, which may be confusing or incorrect."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent date format in documentation",
        "affected_files": [
          "docs/user/TK_UI_QUICK_START.md"
        ],
        "details": "TK_UI_QUICK_START.md uses 'October 2025' in two places:\n## Variable Case Preservation (New in October 2025)\n## Improved Debugging Features (October 2025)\n\nBut UI_FEATURE_COMPARISON.md uses specific date:\n### Recently Added (2025-10-29)\n\nFor consistency, either both should use 'October 2025' or both should use '2025-10-29'."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete feature status in comparison table",
        "affected_files": [
          "docs/user/UI_FEATURE_COMPARISON.md"
        ],
        "details": "UI_FEATURE_COMPARISON.md shows:\n| **Find/Replace** | ❌ | ❌ | ✅ | ❌ | Tk only (new feature) |\n\nBut the 'Coming Soon' section states:\n### Coming Soon\n- ⏳ Find/Replace in Web UI\n\nThis suggests Web UI Find/Replace is planned, but the main table shows it as ❌ (Not Available) rather than ⏳ (Coming Soon). The table should use a consistent symbol for planned features."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Duplicate Execution Stack window shortcut documentation",
        "affected_files": [
          "docs/user/TK_UI_QUICK_START.md"
        ],
        "details": "TK_UI_QUICK_START.md documents:\n| **Ctrl+K** | Show/hide Execution Stack window |\n\nBut later in the same document:\n### Execution Stack Window\nPress **Ctrl+K** to see the execution stack...\n\nThis is consistent within the document, but keyboard-shortcuts.md (Curses) shows:\n| `Ctrl+K` | Step Line - execute all statements on current line |\n\nAnd:\n| `Menu only` | Show/hide execution stack window |\n\nThis indicates Ctrl+K has different meanings in Tk (Execution Stack) vs Curses (Step Line), and Curses requires menu access for Execution Stack. TK_UI_QUICK_START.md should clarify this is Tk-specific."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Incomplete cross-reference in sequential files documentation",
        "affected_files": [
          "docs/user/sequential-files.md"
        ],
        "details": "sequential-files.md has a 'See Also' section:\n- [OPEN Statement](../help/common/language/statements/open.md)\n- [INPUT# Statement](../help/common/language/statements/input_hash.md)\n- [LINE INPUT# Statement](../help/common/language/statements/line-input.md)\n- [EOF Function](../help/common/language/functions/eof.md)\n- [Compatibility Guide](../help/mbasic/compatibility.md)\n\nHowever, these referenced files are not provided in the documentation set, so it's impossible to verify if the links are correct or if the referenced documentation exists. This is a potential broken link issue."
      },
      {
        "severity": "low",
        "type": "documentation_inconsistency",
        "description": "Inconsistent feature status symbols",
        "affected_files": [
          "docs/user/UI_FEATURE_COMPARISON.md"
        ],
        "details": "UI_FEATURE_COMPARISON.md uses:\n✅ Available | ⚠️ Partial | ❌ Not Available\n\nBut in 'Coming Soon' section uses:\n- ⏳ DATA/READ/RESTORE statements\n\nThe ⏳ symbol is not defined in the legend at the top of the document. For consistency, either add ⏳ to the legend or use ⚠️ for planned features."
      }
    ]
  }
}